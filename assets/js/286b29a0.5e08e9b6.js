"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[8453],{11328:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"api-reference/react/use-widget","title":"useWidget","description":"The useWidget hook is used to create React wrappers for normal (non-React) deck.gl widgets, or to create custom widgets with UI rendered by React.","source":"@site/../docs/api-reference/react/use-widget.md","sourceDirName":"api-reference/react","slug":"/api-reference/react/use-widget","permalink":"/docs/api-reference/react/use-widget","draft":false,"unlisted":false,"editUrl":"https://github.com/visgl/deck.gl/tree/master/website/../docs/api-reference/react/use-widget.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"DeckGL (React Component)","permalink":"/docs/api-reference/react/deckgl"},"next":{"title":"@deck.gl/test-utils","permalink":"/docs/api-reference/test-utils/overview"}}');var n=s(74848),c=s(28453);const i={},o="useWidget",d={},a=[{value:"Usage",id:"usage",level:2},{value:"Signature",id:"signature",level:2},{value:"Source",id:"source",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"usewidget",children:"useWidget"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"useWidget"})," hook is used to create React wrappers for normal (non-React) deck.gl widgets, or to create custom widgets with UI rendered by React."]}),"\n",(0,n.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"// React wrapper usage\nimport DeckGL, {useWidget} from '@deck.gl/react';\nimport {CompassWidget as UniversalCompassWidget, type CompassWidgetProps} from '@deck.gl/react';\n\nconst CompassWidget = (props: CompassWidgetProps) => {\n  const widget = useWidget(UniversalCompassWidget, props);\n  return null;\n}\n\n<DeckGL>\n  <CompassWidget/>\n</DeckGL>\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For a custom widget, React can be used to implement the UI itself. A widget class is used to hook into deck.gl apis, and a React ",(0,n.jsx)(t.a,{href:"https://react.dev/reference/react-dom/createPortal",children:(0,n.jsx)(t.code,{children:"portal"})})," is utilized to render the widget UI along-side other widgets."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"import React, {useMemo} from 'react';\nimport type {Widget} from '@deck.gl/core';\nimport DeckGL, {useWidget} from '@deck.gl/react';\nimport {createPortal} from 'react-dom';\n\nclass MyWidget implements Widget {\n  constructor(props) {\n    this.props = { ...props };\n  }\n\n  onAdd() {\n    return this.props.element; // HTMLDivElement\n  }\n}\n\nconst MyReactWidget = (props) => {\n  const element = useMemo(() => document.createElement('div'), []);\n  const widget = useWidget(MyWidget, {...props, element});\n  return createPortal(\n    <div>Hello World</div>,\n    element\n  );\n};\n\n<DeckGL>\n  <MyReactWidget/>\n</DeckGL>\n"})}),"\n",(0,n.jsx)(t.h2,{id:"signature",children:"Signature"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-tsx",children:"useWidget<T extends Widget, PropsT extends {}>(\n  WidgetClass: {new (props: PropsT): T},\n  props: PropsT\n): T\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The hook creates an ",(0,n.jsx)(t.a,{href:"/docs/api-reference/core/widget",children:(0,n.jsx)(t.code,{children:"Widget"})})," instance, adds it to deck.gl, and removes it upon unmount."]}),"\n",(0,n.jsx)(t.p,{children:"Parameters:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"WidgetClass"}),": ",(0,n.jsx)(t.code,{children:"{new (props: PropsT): T}"})," - called to create an instance of the control."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"props"}),": ",(0,n.jsx)(t.code,{children:"PropsT"})," - props passed into the widget constructor on creation and ",(0,n.jsx)(t.code,{children:"widget.setProps"})," on render."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Returns:"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/docs/api-reference/core/widget",children:(0,n.jsx)(t.code,{children:"Widget"})})," - the widget instance of ",(0,n.jsx)(t.code,{children:"WidgetClass"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"source",children:"Source"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/visgl/deck.gl/tree/9.1-release/modules/react/src/utils/use-widget.ts",children:"modules/react/src/utils/use-widget.ts"})})]})}function p(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>o});var r=s(96540);const n={},c=r.createContext(n);function i(e){const t=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(c.Provider,{value:t},e.children)}}}]);