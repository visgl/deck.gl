"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[20],{4175:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"api-reference/react/deckgl","title":"DeckGL (React Component)","description":"DeckGL is the main interface to deck.gl for React applications. DeckGL is a React component that takes a list of deck.gl layer instances and a view state, and renders those layers on a transparent canvas that can be used as an overlay over other components like maps.","source":"@site/../docs/api-reference/react/deckgl.md","sourceDirName":"api-reference/react","slug":"/api-reference/react/deckgl","permalink":"/docs/api-reference/react/deckgl","draft":false,"unlisted":false,"editUrl":"https://github.com/visgl/deck.gl/tree/master/website/../docs/api-reference/react/deckgl.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"@deck.gl/react","permalink":"/docs/api-reference/react/overview"},"next":{"title":"useWidget","permalink":"/docs/api-reference/react/use-widget"}}');var s=i(74848),c=i(28453);const r={},a="DeckGL (React Component)",o={},l=[{value:"Usage",id:"usage",level:2},{value:"Properties",id:"properties",level:2},{value:"React Context",id:"react-context",level:3},{value:"<code>ContextProvider</code> (React.Component, optional)",id:"contextprovider",level:4},{value:"Children",id:"children",level:3},{value:"JSX layers",id:"jsx-layers",level:4},{value:"JSX views",id:"jsx-views",level:4},{value:"JSX Widgets",id:"jsx-widgets",level:4},{value:"Position Children in Views",id:"position-children-in-views",level:4},{value:"Render callbacks",id:"render-callbacks",level:4},{value:"Methods",id:"methods",level:2},{value:"Source",id:"source",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"deckgl-react-component",children:"DeckGL (React Component)"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"DeckGL"})," is the main interface to deck.gl for React applications. ",(0,s.jsx)(n.code,{children:"DeckGL"})," is a React component that takes a list of deck.gl layer instances and a view state, and renders those layers on a transparent canvas that can be used as an overlay over other components like maps."]}),"\n",(0,s.jsxs)(n.p,{children:["Make sure to read the ",(0,s.jsx)(n.a,{href:"/docs/get-started/using-with-react",children:"Using deck.gl with React"})," article."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"DeckGL"})," class is a React wrapper of the ",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/deck",children:"Deck"})," JavaScript class which exposes essentially the same props. The ",(0,s.jsx)(n.code,{children:"Deck"})," class should not be used directly in React applications."]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Basic usage\nimport {DeckGL} from '@deck.gl/react';\nimport {ScatterplotLayer} from '@deck.gl/layers';\n\nconst App = (data) => (\n  <DeckGL\n    longitude={-122.45}\n    latitude={37.78}\n    zoom={12}\n    layers={[new ScatterplotLayer({data})]} />\n);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Like any React component, ",(0,s.jsx)(n.code,{children:"DeckGL"})," can accept child components. Typical React components include:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Base maps such as the ",(0,s.jsx)(n.a,{href:"https://visgl.github.io/react-map-gl/docs/api-reference/map",children:(0,s.jsx)(n.code,{children:"Map"})})," component from ",(0,s.jsx)(n.code,{children:"react-map-gl"}),", which can synchronize with deck.gl's view state."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/api-reference/react/overview#using-react-wrapped-widgets",children:"Widgets"}),", which can display and control deck.gl state."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import {DeckGL} from '@deck.gl/react';\nimport {Map} from 'react-map-gl/maplibre';\nimport 'maplibre-gl/dist/maplibre-gl.css';\n\nconst App = (data) => (\n  <DeckGL\n    initialViewState={{longitude: -122.45, latitude: 37.78, zoom: 12}}\n    controller={true}\n    layers={[new ScatterplotLayer({data})]}\n  >\n    <Map mapStyle=\"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json\" />\n  </DeckGL>\n);\n\n"})}),"\n",(0,s.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"DeckGL"})," accepts all ",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/deck#properties",children:"Deck"})," properties, with these additional semantics:"]}),"\n",(0,s.jsx)(n.h3,{id:"react-context",children:"React Context"}),"\n",(0,s.jsxs)(n.h4,{id:"contextprovider",children:[(0,s.jsx)(n.code,{children:"ContextProvider"})," (React.Component, optional)"]}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.a,{href:"https://reactjs.org/docs/context.html#contextprovider",children:"Context.Provider"})," component. If supplied, will be rendered as the ancestor to all children. The passed through context contains the following values:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"viewport"})," (",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/viewport",children:"Viewport"}),") - the current viewport"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"container"})," (DOMElement) - the DOM element containing the deck canvas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eventManager"})," (",(0,s.jsx)(n.a,{href:"https://visgl.github.io/mjolnir.js/docs/api-reference/event-manager",children:"EventManager"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"onViewStateChange"})," (",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/deck#onviewstatechange",children:"onViewStateChange"}),") - the view state change handler"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deck"})," (",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/deck",children:"Deck"}),") - the current deck instance, if present"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"widgets"})," (",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/widget",children:"Widget"}),"[]) - the current jsx widgets, if any"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"/// Example using react-map-gl v6 controls with deck.gl\n/// To use react-map-gl v7, see https://deck.gl/docs/api-reference/mapbox/mapbox-overlay\nimport {DeckGL} from '@deck.gl/react';\nimport {_MapContext as MapContext, NavigationControl} from 'react-map-gl';\n\n<DeckGL ... ContextProvider={MapContext.Provider}>\n  <div style={NAVIGATION_CONTROL_STYLES}>\n    <NavigationControl />\n  </div>\n</DeckGL>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"children",children:"Children"}),"\n",(0,s.jsxs)(n.p,{children:["The following semantics of the standard React ",(0,s.jsx)(n.code,{children:"children"})," property are considered experimental."]}),"\n",(0,s.jsx)(n.h4,{id:"jsx-layers",children:"JSX layers"}),"\n",(0,s.jsxs)(n.p,{children:["It is possible to use JSX syntax to create deck.gl layers as React children of the ",(0,s.jsx)(n.code,{children:"DeckGL"})," React components, instead of providing them as ES6 class instances to the ",(0,s.jsx)(n.code,{children:"layers"})," prop."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'  <DeckGL initialViewState={...viewState}>\n    <LineLayer id="line-layer" data={data} />\n  <DeckGL />\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Caveat: The JSX layer syntax is limited in that it only works when the layers are direct children of the ",(0,s.jsx)(n.code,{children:"DeckGL"})," component. deck.gl layers are not true React components and cannot be rendered independently by React, and the JSX support depends on deck.gl intercepting the JSX generated child elements before React tries to render them."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"jsx-views",children:"JSX views"}),"\n",(0,s.jsxs)(n.p,{children:["It is possible to use JSX syntax to create deck.gl views as React children of the ",(0,s.jsx)(n.code,{children:"DeckGL"})," React components, instead of providing them as ES6 class instances to the ",(0,s.jsx)(n.code,{children:"views"})," prop."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'  <DeckGL initialViewState={...viewState} layers={layers} >\n    <MapView id="map" width="50%" controller={true} >\n      <Map mapStyle="https://basemaps.cartocdn.com/gl/positron-gl-style/style.json" />\n    </MapView>\n    <FirstPersonView width="50%" x="50%" fovy={50} />\n  <DeckGL />\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If a certain view id is used in both JSX views and the ",(0,s.jsx)(n.code,{children:"views"})," prop, the view instance in the ",(0,s.jsx)(n.code,{children:"views"})," prop has priority."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"  const views = [\n    new MapView({id: 'map', width: '50%', controller: true}),\n    new FirstPersonView({width: '50%', x: '50%', fovy: 50})\n  ];\n\n  <DeckGL initialViewState={...viewState} layers={layers} views={views} >\n    <View id=\"map\">\n      <Map mapStyle=\"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json\" />\n    </View>\n  <DeckGL />\n"})}),"\n",(0,s.jsx)(n.h4,{id:"jsx-widgets",children:"JSX Widgets"}),"\n",(0,s.jsxs)(n.p,{children:["It is possible to use JSX syntax to create deck.gl widgets as React children of the ",(0,s.jsx)(n.code,{children:"DeckGL"})," React components, instead of providing them as ES6 class instances to the ",(0,s.jsx)(n.code,{children:"widgets"})," props."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'  <DeckGL initialViewState={...viewState}>\n    <ZoomWidget id="zoom-widget" placement="top-right" />\n  <DeckGL />\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Learn how to use widgets in JSX by reading ",(0,s.jsx)(n.a,{href:"/docs/api-reference/react/overview#using-react-wrapped-widgets",children:"Using React-wrapped widgets"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"position-children-in-views",children:"Position Children in Views"}),"\n",(0,s.jsx)(n.p,{children:"To make it easy to use React components in combination with deck.gl views (e.g. to place a base map under a view, or add a label on top of a view), deck.gl can make such components automatically adjust as that view is added, removed or resized."}),"\n",(0,s.jsxs)(n.p,{children:["Each child element of ",(0,s.jsx)(n.code,{children:"DeckGL"})," is positioned inside a view. All children of a view is wrapped in a DOM container that:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"is offset to be relative to the deck.gl view that it corresponds to."}),"\n",(0,s.jsx)(n.li,{children:"is resized to match the extent of the deck.gl view with the corresponding view id."}),"\n",(0,s.jsxs)(n.li,{children:["is hidden if the view id is missing from ",(0,s.jsx)(n.code,{children:"DeckGL"}),"'s ",(0,s.jsx)(n.code,{children:"views"})," prop."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The containing view of each element is determined as follows:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If the element is a direct child of ",(0,s.jsx)(n.code,{children:"DeckGL"}),", it is positioned inside the default (first) view."]}),"\n",(0,s.jsxs)(n.li,{children:["If the element is nested under a ",(0,s.jsx)(n.code,{children:"<View id={id}>"})," tag, it is positioned inside the view corresponding to the ",(0,s.jsx)(n.code,{children:"id"})," prop."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"render-callbacks",children:"Render callbacks"}),"\n",(0,s.jsxs)(n.p,{children:["You may supply a function as a child to the ",(0,s.jsx)(n.code,{children:"DeckGL"})," or ",(0,s.jsx)(n.code,{children:"View"})," node (see ",(0,s.jsx)(n.strong,{children:"JSX views"}),"). The function will be called to retrieve the React children when the viewport updates."]}),"\n",(0,s.jsx)(n.p,{children:"The following arguments are passed:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"x"})," - the left offset of the current view, in pixels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"y"})," - the top offset of the current view, in pixels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"width"})," - the width of the current view, in pixels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"height"})," - the height of the current view, in pixels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"viewState"})," - the view state of the current view"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"viewport"})," - the ",(0,s.jsx)(n.code,{children:"Viewport"})," instance of the current view"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This is useful when you need to specify custom rendering logic for a child:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"  <DeckGL {...viewState}>\n    {({x, y, width, height, viewState, viewport}) => (\n      <Marker\n        project={viewport.project}\n        longitude={-122.45}\n        latitude={37.8}\n        width={24}\n        height={24} />\n    )}\n  <DeckGL />\n"})}),"\n",(0,s.jsx)(n.p,{children:"Additional Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The DeckGL components own ",(0,s.jsx)(n.code,{children:"canvas"})," element is added last to the child list, to sit on top of all the base components, however Z index can be used to override this."]}),"\n",(0,s.jsx)(n.li,{children:"Child repositioning is done with CSS styling on a wrapper div."}),"\n",(0,s.jsxs)(n.li,{children:["Children that do not belong to any ",(0,s.jsx)(n.code,{children:"<View>"})," tag and are functions are called with the properties of the default view."]}),"\n",(0,s.jsxs)(n.li,{children:["Children that do not belong to any ",(0,s.jsx)(n.code,{children:"<View>"})," tag and are valid React elements are rendered as is."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsxs)(n.p,{children:["All ",(0,s.jsx)(n.a,{href:"/docs/api-reference/core/deck#methods",children:"Deck"})," methods are available on the ",(0,s.jsx)(n.code,{children:"DeckGL"})," component, but not all of them can be explicitly called. For example, to rerender your component, you can pass updated props to ",(0,s.jsx)(n.code,{children:"DeckGL"})," component directly, while you should call ",(0,s.jsx)(n.code,{children:"setProps"})," with new props in ",(0,s.jsx)(n.code,{children:"Deck"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The public methods you can call explicitly list below:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"pickObject"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"pickMultipleObjects"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"pickObjects"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["We do recommend you to use the pure JavaScript version of deck.gl if you are more comfortable with an imperative programming style (e.g. ",(0,s.jsx)(n.code,{children:"deck.setProps()"}),")."]}),"\n",(0,s.jsx)(n.h2,{id:"source",children:"Source"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/visgl/deck.gl/tree/9.1-release/modules/react/src/deckgl.ts",children:"modules/react/src/deckgl.ts"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const s={},c=t.createContext(s);function r(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);