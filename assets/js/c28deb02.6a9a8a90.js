"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[6439],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>g});var r=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var i=r.createContext({}),p=function(e){var t=r.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return r.createElement(i.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=o,g=u["".concat(i,".").concat(m)]||u[m]||d[m]||n;return a?r.createElement(g,l(l({ref:t},c),{},{components:a})):r.createElement(g,l({ref:t},c))}));function g(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,l=new Array(n);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[u]="string"==typeof e?e:o,l[1]=s;for(var p=2;p<n;p++)l[p]=a[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(67294),o=a(86010);const n={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:a,className:l}=e;return r.createElement("div",{role:"tabpanel",className:(0,o.Z)(n.tabItem,l),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(83117),o=a(67294),n=a(86010),l=a(12466),s=a(16550),i=a(91980),p=a(67392),c=a(50012);function u(e){return function(e){return o.Children.map(e,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))}(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:o}}=e;return{value:t,label:a,attributes:r,default:o}}))}function d(e){const{values:t,children:a}=e;return(0,o.useMemo)((()=>{const e=null!=t?t:u(a);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const r=(0,s.k6)(),n=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:a});return[(0,i._X)(n),(0,o.useCallback)((e=>{if(!n)return;const t=new URLSearchParams(r.location.search);t.set(n,e),r.replace({...r.location,search:t.toString()})}),[n,r])]}function v(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,n=d(e),[l,s]=(0,o.useState)((()=>function(e){var t;let{defaultValue:a,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!m({value:a,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+r.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}const o=null!=(t=r.find((e=>e.default)))?t:r[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:n}))),[i,p]=g({queryString:a,groupId:r}),[u,v]=function(e){let{groupId:t}=e;const a=function(e){return e?"docusaurus.tab."+e:null}(t),[r,n]=(0,c.Nk)(a);return[r,(0,o.useCallback)((e=>{a&&n.set(e)}),[a,n])]}({groupId:r}),h=(()=>{const e=null!=i?i:u;return m({value:e,tabValues:n})?e:null})();(0,o.useLayoutEffect)((()=>{h&&s(h)}),[h]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:n}))throw new Error("Can't select invalid tab value="+e);s(e),p(e),v(e)}),[p,v,n]),tabValues:n}}var h=a(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:t,block:a,selectedValue:s,selectValue:i,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.o5)(),d=e=>{const t=e.currentTarget,a=c.indexOf(t),r=p[a].value;r!==s&&(u(t),i(r))},m=e=>{var t;let a=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var r;const t=c.indexOf(e.currentTarget)+1;a=null!=(r=c[t])?r:c[0];break}case"ArrowLeft":{var o;const t=c.indexOf(e.currentTarget)-1;a=null!=(o=c[t])?o:c[c.length-1];break}}null==(t=a)||t.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.Z)("tabs",{"tabs--block":a},t)},p.map((e=>{let{value:t,label:a,attributes:l}=e;return o.createElement("li",(0,r.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:d},l,{className:(0,n.Z)("tabs__item",f.tabItem,null==l?void 0:l.className,{"tabs__item--active":s===t})}),null!=a?a:t)})))}function y(e){let{lazy:t,children:a,selectedValue:r}=e;if(a=Array.isArray(a)?a:[a],t){const e=a.find((e=>e.props.value===r));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function b(e){const t=v(e);return o.createElement("div",{className:(0,n.Z)("tabs-container",f.tabList)},o.createElement(k,(0,r.Z)({},e,t)),o.createElement(y,(0,r.Z)({},e,t)))}function w(e){const t=(0,h.Z)();return o.createElement(b,(0,r.Z)({key:String(t)},e))}},95059:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>u});var r=a(83117),o=(a(67294),a(3905)),n=a(74866),l=a(85162);const s={},i="Using with Google Maps Platform",p={unversionedId:"developer-guide/base-maps/using-with-google-maps",id:"developer-guide/base-maps/using-with-google-maps",title:"Using with Google Maps Platform",description:"| Pure JS | React | Overlaid | Interleaved |",source:"@site/../docs/developer-guide/base-maps/using-with-google-maps.md",sourceDirName:"developer-guide/base-maps",slug:"/developer-guide/base-maps/using-with-google-maps",permalink:"/docs/developer-guide/base-maps/using-with-google-maps",draft:!1,editUrl:"https://github.com/visgl/deck.gl/tree/master/website/../docs/developer-guide/base-maps/using-with-google-maps.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using with ArcGIS",permalink:"/docs/developer-guide/base-maps/using-with-arcgis"},next:{title:"Using with Mapbox",permalink:"/docs/developer-guide/base-maps/using-with-mapbox"}},c={},u=[{value:"Integration Modes",id:"integration-modes",level:2},{value:"Interleaved",id:"interleaved",level:3},{value:"Overlaid",id:"overlaid",level:3},{value:"Reverse Controlled",id:"reverse-controlled",level:3},{value:"Examples",id:"examples",level:2},{value:"Example: interleaved or overlaid",id:"example-interleaved-or-overlaid",level:3},{value:"Example: reverse controlled",id:"example-reverse-controlled",level:3},{value:"Additional Information",id:"additional-information",level:2},{value:"react-google-maps",id:"react-google-maps",level:3},{value:"Google Maps Platform API key",id:"google-maps-platform-api-key",level:3}],d={toc:u},m="wrapper";function g(e){let{components:t,...a}=e;return(0,o.kt)(m,(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"using-with-google-maps-platform"},"Using with Google Maps Platform"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Pure JS"),(0,o.kt)("th",{parentName:"tr",align:null},"React"),(0,o.kt)("th",{parentName:"tr",align:null},"Overlaid"),(0,o.kt)("th",{parentName:"tr",align:null},"Interleaved"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,o.kt)("td",{parentName:"tr",align:null},"\u2713"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://github.com/visgl/deck.gl/tree/9.0-release/examples/get-started/pure-js/google-maps"},"example")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://developers.google.com/maps/documentation/javascript/examples/deckgl-tripslayer"},"example"))))),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.github.com/visgl/deck.gl-data/master/images/whats-new/google-maps.jpg",alt:"deck.gl as a Google Maps overlay"})),(0,o.kt)("h2",{id:"integration-modes"},"Integration Modes"),(0,o.kt)("p",null,"When using deck.gl and Google Maps JavaScript API, there are three options you can choose from: interleaved, overlaid, and reverse-controlled."),(0,o.kt)("h3",{id:"interleaved"},"Interleaved"),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"/docs/get-started/using-with-map#interleaved"},"interleaved")," mode renders deck.gl layers into the WebGL2 context created by Google's vector map, using the Maps JavaScript API ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/maps/documentation/javascript/webgl/webgl-overlay-view"},"WebGLOverlayView class"),". If you need to mix deck.gl layers with Maps layers, e.g. having deck.gl objects and Maps 3D buildings occluding each other correctly, then you have to use this option."),(0,o.kt)("p",null,"Interleaving is supported by using ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/google-maps/google-maps-overlay"},"GoogleMapsOverlay")," with an instance of Google's ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/maps/documentation/javascript/vector-map"},"vector map"),". Some ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/google-maps/overview#supported-features-and-limitations"},"limitations")," apply when using this option."),(0,o.kt)("h3",{id:"overlaid"},"Overlaid"),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"/docs/get-started/using-with-map#overlaid"},"overlaid")," mode renders deck.gl in a separate canvas inside the Maps' controls container, using the Maps JavaScript API ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/maps/documentation/javascript/reference/#OverlayView"},"OverlayView class"),"."),(0,o.kt)("p",null,"This is supported by using ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/google-maps/google-maps-overlay"},"GoogleMapsOverlay")," with Google's ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/maps/documentation/javascript/vector-map"},"raster map"),". When a deck.gl overlay instance is added to the map, if a vector map is not detected or the user's device does not support WebGL2, it will automatically fallback to overlaid mode. You can also explicitly use this mode by setting the option ",(0,o.kt)("inlineCode",{parentName:"p"},"interleaved")," to false when creating the GoogleMapsOverlay. In this mode, 3D features like tilt, rotation, and fractional zoom are not supported."),(0,o.kt)("h3",{id:"reverse-controlled"},"Reverse Controlled"),(0,o.kt)("p",null,"The reverse-controlled mode renders deck.gl above the Maps container and blocks any interaction to the base map. If your use case does not require interleaving, but you need to implement your own ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/core/controller"},"pointer input handling"),", have multiple maps or a map that does not fill the whole canvas (with Deck's ",(0,o.kt)("a",{parentName:"p",href:"/docs/developer-guide/views#using-multiple-views"},"multi-view feature"),"), you need this to allow deck.gl manage the map's size and camera."),(0,o.kt)("p",null,"You cannot use Maps' own UI controls such as the zoom buttons or layer selector with this option. Instead, use the components from ",(0,o.kt)("inlineCode",{parentName:"p"},"@deck.gl/widgets"),"."),(0,o.kt)("h2",{id:"examples"},"Examples"),(0,o.kt)("h3",{id:"example-interleaved-or-overlaid"},"Example: interleaved or overlaid"),(0,o.kt)("p",null,"Both the interleaved and the overlaid options are supported in by the ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/google-maps/overview"},"@deck.gl/google-maps")," module. This is recommended approach for developers coming from the Google Maps JavaScript API ecosystem, as it handles fallbacks gracefully, as well as being compatible with other Maps controls and plugins."),(0,o.kt)(n.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import {Loader} from '@googlemaps/js-api-loader';\nimport {GoogleMapsOverlay} from '@deck.gl/google-maps';\nimport {ScatterplotLayer} from '@deck.gl/layers';\n\nconst loader = new Loader({apiKey: '<google_maps_api_key>'});\nconst googlemaps = await loader.importLibrary('maps');\n\nconst map = new googlemaps.Map(document.getElementById('map'), {\n  center: {lat: 51.47, lng: 0.45},\n  zoom: 11,\n  mapId: '<google_map_id>'\n});\n\nconst overlay = new GoogleMapsOverlay({\n  layers: [\n    new ScatterplotLayer({\n      id: 'deckgl-circle',\n      data: [\n        {position: [0.45, 51.47]}\n      ],\n      getPosition: d => d.position,\n      getFillColor: [255, 0, 0, 100],\n      getRadius: 1000\n    })\n  ]\n});\n\noverlay.setMap(map);\n"))),(0,o.kt)(l.Z,{value:"react",label:"React",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, {useMemo, useEffect} from 'react';\nimport {APIProvider, Map, useMap} from '@vis.gl/react-google-maps';\nimport {DeckProps} from '@deck.gl/core';\nimport {ScatterplotLayer} from '@deck.gl/layers';\nimport {GoogleMapsOverlay} from '@deck.gl/google-maps';\n\nfunction DeckGLOverlay(props: DeckProps) {\n  const map = useMap();\n  const overlay = useMemo(() => new GoogleMapsOverlay(props));\n\n  useEffect(() => {\n    overlay.setMap(map);\n    return () => overlay.setMap(null);\n  }, [map])\n\n  overlay.setProps(props);\n  return null;\n}\n\nfunction App() {\n  const layers = [\n    new ScatterplotLayer({\n      id: 'deckgl-circle',\n      data: [\n        {position: [0.45, 51.47]}\n      ],\n      getPosition: d => d.position,\n      getFillColor: [255, 0, 0, 100],\n      getRadius: 1000\n    })\n  ];\n\n  return <APIProvider apiKey=\"<google_maps_api_key>\">\n    <Map\n      defaultCenter={{lat: 51.47, lng: 0.45}}\n      defaultZoom={11}\n      mapId=\"<google_maps_id>\" >\n      <DeckGLOverlay layers={layers} />\n    </Map>\n  </APIProvider>;\n}\n")))),(0,o.kt)("p",null,"You can find full project setups in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/visgl/deck.gl/tree/9.0-release/examples/get-started/react/google-maps/"},"react get-started example")," and ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/visgl/deck.gl/tree/9.0-release/examples/get-started/pure-js/google-maps/"},"pure js get-started example"),"."),(0,o.kt)("h3",{id:"example-reverse-controlled"},"Example: reverse controlled"),(0,o.kt)("p",null,"The reverse-controlled option is currently only supported in React when used with the ",(0,o.kt)("inlineCode",{parentName:"p"},"@visgl/react-google-maps")," library."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import React from 'react';\nimport {APIProvider, Map} from '@vis.gl/react-google-maps';\nimport DeckGL from '@deck.gl/react';\nimport {ScatterplotLayer} from '@deck.gl/layers';\n\nfunction App() {\n  const layers = [\n    new ScatterplotLayer({\n      id: 'deckgl-circle',\n      data: [\n        {position: [0.45, 51.47]}\n      ],\n      getPosition: d => d.position,\n      getFillColor: [255, 0, 0, 100],\n      getRadius: 1000\n    })\n  ];\n\n  return <APIProvider apiKey=\"<google_maps_api_key>\">\n    <DeckGL\n      initialViewState={{\n        longitude: 0.45,\n        latitude: 51.47,\n        zoom: 11\n      }}\n      controller\n      layers={layers}\n    >\n      <Map mapId=\"<google_maps_id>\" />\n    </DeckGL>\n  </APIProvider>;\n}\n")),(0,o.kt)("h2",{id:"additional-information"},"Additional Information"),(0,o.kt)("h3",{id:"react-google-maps"},"react-google-maps"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://visgl.github.io/react-google-maps/"},"@visgl/react-google-maps")," is a React wrapper around Google Maps JavaScript API maintained by the vis.gl community. If you'd like to use deck.gl together with Google Maps and React, this library is the recommended companion."),(0,o.kt)("p",null,"When you choose the interleaved or overlaid option, the ",(0,o.kt)("inlineCode",{parentName:"p"},"@visgl/react-google-maps")," ",(0,o.kt)("a",{parentName:"p",href:"https://visgl.github.io/react-google-maps/docs/api-reference/components/map"},"Map")," React component acts as the root component, and ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/google-maps/google-maps-overlay"},"GoogleMapsOverlay")," is used with a ",(0,o.kt)("inlineCode",{parentName:"p"},"useMemo")," hook. "),(0,o.kt)("p",null,"When you choose the reverse-controlled option, the ",(0,o.kt)("inlineCode",{parentName:"p"},"DeckGL")," React component acts as the root component, and the ",(0,o.kt)("inlineCode",{parentName:"p"},"@visgl/react-google-maps")," ",(0,o.kt)("a",{parentName:"p",href:"https://visgl.github.io/react-google-maps/docs/api-reference/components/map"},"Map")," is a child. In this case, ",(0,o.kt)("inlineCode",{parentName:"p"},"Map")," will automatically interpret the deck.gl view state (i.e. latitude, longitude, zoom etc), so that deck.gl layers will render as a synchronized geospatial overlay over the underlying map."),(0,o.kt)("h3",{id:"google-maps-platform-api-key"},"Google Maps Platform API key"),(0,o.kt)("p",null,"Note that to use deck.gl with the Google's basemap, you must load the Maps JavaScript API using a valid API key. For more information on getting an API key, see the ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/maps/documentation/javascript/get-api-key"},"Google Maps Platform API key documentation")," for the Maps JavaScript API."),(0,o.kt)("p",null,"If you are using ",(0,o.kt)("inlineCode",{parentName:"p"},"@visgl/react-google-maps"),", supply the API key to the ",(0,o.kt)("inlineCode",{parentName:"p"},"APIProvider")," and wrap it around all components that should have access to the Google Maps API."))}g.isMDXComponent=!0}}]);