"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[7466],{3905:(e,r,t)=>{t.d(r,{Zo:()=>c,kt:()=>m});var a=t(67294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=a.createContext({}),p=function(e){var r=a.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):l(l({},r),e)),t},c=function(e){var r=p(e.components);return a.createElement(s.Provider,{value:r},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},d=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),d=n,m=u["".concat(s,".").concat(d)]||u[d]||y[d]||o;return t?a.createElement(m,l(l({ref:r},c),{},{components:t})):a.createElement(m,l({ref:r},c))}));function m(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var s in r)hasOwnProperty.call(r,s)&&(i[s]=r[s]);i.originalType=e,i[u]="string"==typeof e?e:n,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},98302:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>l,default:()=>y,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=t(83117),n=(t(67294),t(3905));const o={},l="Writing Your Own Layer",i={unversionedId:"developer-guide/custom-layers/README",id:"developer-guide/custom-layers/README",title:"Writing Your Own Layer",description:"Preparations",source:"@site/../docs/developer-guide/custom-layers/README.md",sourceDirName:"developer-guide/custom-layers",slug:"/developer-guide/custom-layers/",permalink:"/docs/developer-guide/custom-layers/",draft:!1,editUrl:"https://github.com/visgl/deck.gl/tree/master/website/../docs/developer-guide/custom-layers/README.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using with MapLibre",permalink:"/docs/developer-guide/base-maps/using-with-maplibre"},next:{title:"Layer Lifecycle",permalink:"/docs/developer-guide/custom-layers/layer-lifecycle"}},s={},p=[{value:"Preparations",id:"preparations",level:2},{value:"Creating The Layer class",id:"creating-the-layer-class",level:2},{value:"Naming Your Layer",id:"naming-your-layer",level:3},{value:"Defining Layer Properties",id:"defining-layer-properties",level:3}],c={toc:p},u="wrapper";function y(e){let{components:r,...t}=e;return(0,n.kt)(u,(0,a.Z)({},c,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"writing-your-own-layer"},"Writing Your Own Layer"),(0,n.kt)("h2",{id:"preparations"},"Preparations"),(0,n.kt)("p",null,"Before creating a new layer, it is recommended that you verify that you can not achieve the desired effect either through layer subclassing or through using composite layers."),(0,n.kt)("p",null,"There are a couple of ways to build a layer in deck.gl, and it is helpful to consider what approach will serve you best before starting:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"/docs/developer-guide/custom-layers/composite-layers"},"Create a composite layer")),' - A composite layer is a special kind of layer that creates other layers. This allows you to build e.g. a "semantic layer" - a layer that presents a different interface (set of props) than an existing layer, transforms those props into a format that fits and existing layer, etc.'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"/docs/developer-guide/custom-layers/subclassed-layers"},"Subclass a layer"))," - Subclassed layer is a new layer created by subclassing another layers. This allows the developer to reuse all of the interfaces and implementations of an existing layer unless they are explicitly overridden."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"/docs/developer-guide/custom-layers/primitive-layers"},"Implement a layer from scratch"))," - If you want to draw something completely different and you are comfortable with WebGL2/WebGPU and shader programming, this option gives you the most flexibility. You have full control of the layer lifecycle, you can manage your own model(s) and directly manipulate the WebGL2/WebGPU context.")),(0,n.kt)("h2",{id:"creating-the-layer-class"},"Creating The Layer class"),(0,n.kt)("p",null,"Your layer class must be a subclass of ",(0,n.kt)("a",{parentName:"p",href:"/docs/api-reference/core/layer"},"Layer"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"import {Layer} from 'deck.gl';\n\nclass AwesomeLayer extends Layer {...}\n")),(0,n.kt)("p",null,"It can be a direct subclass of ",(0,n.kt)("inlineCode",{parentName:"p"},"Layer"),", or extend another layer."),(0,n.kt)("h3",{id:"naming-your-layer"},"Naming Your Layer"),(0,n.kt)("p",null,"Store the layer name in the ",(0,n.kt)("inlineCode",{parentName:"p"},"layerName")," static property on your ",(0,n.kt)("inlineCode",{parentName:"p"},"Layer")," subclass:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"AwesomeLayer.layerName = 'AwesomeLayer';\n")),(0,n.kt)("p",null,"The layer name will be used as the default id of layer instances and also during\ndebugging."),(0,n.kt)("h3",{id:"defining-layer-properties"},"Defining Layer Properties"),(0,n.kt)("p",null,"The list of properties is the main API your new layer will provide to\napplications. So it makes sense to carefully consider what properties\nyour layer should offer."),(0,n.kt)("p",null,"You also need to define the default values of the layer's properties."),(0,n.kt)("p",null,"The most efficient method of doing this is to define a static ",(0,n.kt)("inlineCode",{parentName:"p"},"defaultProps"),"\nmember on your layer class."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"AwesomeLayer.defaultProps = {\n  color: [255, 0, 0],\n  opacity: 0.5\n};\n")),(0,n.kt)("p",null,"Also consider the properties of the base ",(0,n.kt)("a",{parentName:"p",href:"/docs/api-reference/core/layer"},"Layer")," class,\nas well as any other inherited properties if you are deriving."))}y.isMDXComponent=!0}}]);