{"version":3,"sources":["webpack://lib/../node_modules/@arcgis/core/chunks/DefaultMaterial.glsl.js","webpack://lib/../node_modules/@arcgis/core/chunks/RealisticTree.glsl.js","webpack://lib/../node_modules/@arcgis/core/chunks/builtins.js","webpack://lib/../node_modules/@arcgis/core/chunks/quat.js","webpack://lib/../node_modules/@arcgis/core/chunks/vec32.js","webpack://lib/../node_modules/@arcgis/core/chunks/vec33.js","webpack://lib/../node_modules/@arcgis/core/chunks/vec3f32.js","webpack://lib/../node_modules/@arcgis/core/geometry/support/buffer/math/common.js","webpack://lib/../node_modules/@arcgis/core/libs/basisu/BasisU.js","webpack://lib/../node_modules/@arcgis/core/support/requestImageUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","webpack://lib/../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateMainLighting.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DecodeNormal.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/AutoDisposable.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BoundingInfo.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialTexture.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLDriverTest.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/doublePrecisionUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/glUtil3D.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js","webpack://lib/../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/BufferObject.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/FramebufferObject.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/Program.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/Renderbuffer.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/ShaderTranspiler.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/Texture.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/Util.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/capabilities/isWebGL2Context.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/checkWebGLError.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/enums.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/renderState.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/reservedWordsGLSL3.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/testFloatBufferBlend.js","webpack://lib/../node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,iEAAC;AACxC;AACA,CAAC,GAA4B;;;;;;;;;;;;;ACf7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACiH,QAAQ,4DAAC,YAAY,4DAAC,UAAU,cAAc,kOAAkO,iEAAC;AAClY;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG,gBAAgB,2IAAyP;;;;;;;;;;;;;ACb7Q;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAC+H,cAAc,UAAU,iFAAC,aAAa,iEAAC;AACtK;AACA;AACA;AACA;AACA,CAAC,GAAgC;;;;;;;;;;;;;ACTjC;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACyD,cAAc,wBAAwB,MAAM,iEAAC;AACtG;AACA;AACA,CAAC,SAAS,iEAAC;AACX;AACA;AACA,CAAC,SAAS,iEAAC;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAmC;;;;;;;;;;;;;ACjBpC;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACmJ,gBAAgB,mBAAmB,wHAAwH,iEAAC;AAC/S;AACA;AACA;AACA;AACA,CAAC,cAAc,iEAAC;AAChB;AACA;AACA;AACA;AACA,CAAC,gEAAgE,iEAAC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD,qGAAC,sGAAsG,iEAAC;AAC3J;AACA;AACA,QAAQ,qDAAqD;AAC7D;AACA;AACA;AACA,MAAwC;;;;;;;;;;;;;AChCxC;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACyD,gBAAgB,oGAAoG,8DAA8D,iEAAC;AAC5O;AACA;AACA,CAAC,6JAA6J,iEAAC;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uVAAuV,iEAAC;AACzV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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AA;AACA;AACA;AACA;AACqH,cAAc,UAAU,wEAAC,aAAa,iEAAC;AAC5J;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,iEAAC,QAAQ;AAC7B;AACA;AACA,yBAAyB,iEAAC,QAAQ;AAClC;AACA;AACA,yBAAyB,iEAAC,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,iEAAC,QAAQ;AAC7B;AACA;AACA,yBAAyB,iEAAC,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAmC;;;;;;;;;;;;;AC9CnC;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACyD,cAAc,WAAW,iEAAC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAkC;;;;;;;;;;;;;ACxBnC;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACiJ,cAAc,kBAAkB,iEAAC;AAClL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,iEAAC;AACvB;AACA,CAAC,qBAAqB,iEAAC;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,iEAAC;AACvB;AACA,CAAC,qBAAqB,iEAAC;AACvB;AACA;AACA;AACA;AACA,CAAC,qBAAqB,iEAAC;AACvB;AACA,CAAC,qBAAqB,iEAAC;AACvB;AACA,CAAC,GAAG,gBAAgB,4BAA4B,qGAAC,oDAAoD,kEAAkE,qGAAC,wCAAkH;;;;;;;;;;;;;ACnC1R;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACyD,cAAc,kHAAkH,iEAAC;AAC1L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAmC;;;;;;;;;;;;;ACzBpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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","file":"57.render-page.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VertexNormal as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{VerticalOffset as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as m}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{ComputeNormalTexture as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js\";import{EvaluateAmbientOcclusion as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{Normals as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{PhysicallyBasedRendering as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as C}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as L,DiscardOrAdjustAlpha as j}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{HeaderComment as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js\";import{MixExternalColor as T}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as E}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as O}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function P(P){const _=new O,S=_.vertex.code,$=_.fragment.code;return _.include(M,{name:\"Default Material Shader\",output:P.output}),_.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),_.include(t),_.varyings.add(\"vpos\",\"vec3\"),_.include(C,P),_.include(i,P),_.include(g,P),0!==P.output&&7!==P.output||(_.include(l,P),_.include(a,{linearDepth:!1}),0===P.normalType&&P.offsetBackfaces&&_.include(r),_.include(p,P),_.include(c,P),P.instancedColor&&_.attributes.add(\"instanceColor\",\"vec4\"),_.varyings.add(\"localvpos\",\"vec3\"),_.include(d,P),_.include(e,P),_.include(n,P),_.include(s,P),_.vertex.uniforms.add(\"externalColor\",\"vec4\"),_.varyings.add(\"vcolorExt\",\"vec4\"),P.multipassTerrainEnabled&&_.varyings.add(\"depth\",\"float\"),S.add(E`\n      void main(void) {\n        forwardNormalizedVertexColor();\n        vcolorExt = externalColor;\n        ${P.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n        vcolorExt *= vvColor();\n        vcolorExt *= getSymbolColor();\n        forwardColorMixMode();\n\n        if (vcolorExt.a < ${E.float(L)}) {\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        }\n        else {\n          vpos = calculateVPos();\n          localvpos = vpos - view[3].xyz;\n          vpos = subtractOrigin(vpos);\n          ${0===P.normalType?E`\n          vNormalWorld = dpNormal(vvLocalNormal(normalModel()));`:\"\"}\n          vpos = addVerticalOffset(vpos, localOrigin);\n          ${P.vertexTangents?\"vTangent = dpTransformVertexTangent(tangent);\":\"\"}\n          gl_Position = transformPosition(proj, view, vpos);\n          ${0===P.normalType&&P.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n        }\n\n        ${P.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n        forwardLinearDepth();\n        forwardTextureCoordinates();\n      }\n    `)),7===P.output&&(_.include(o,P),_.include(j,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.fragment.include(T),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        ${P.attributeColor?E`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===P.output&&(_.include(o,P),_.include(b,P),_.include(u,P),_.include(j,P),P.receiveShadows&&_.include(y,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.include(w,P),_.include(x,P),_.fragment.include(T),_.include(f,P),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        shadingParams.viewDirection = normalize(vpos - camPos);\n        ${3===P.normalType?E`\n        vec3 normal = screenDerivativeNormal(localvpos);`:E`\n        shadingParams.normalView = vNormalWorld;\n        vec3 normal = shadingNormal(shadingParams);`}\n        ${1===P.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${P.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===P.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${P.attributeColor?E`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${P.hasNormalTexture?E`\n              mat3 tangentSpace = ${P.vertexTangents?\"computeTangentSpace(normal);\":\"computeTangentSpace(normal, vpos, vuv0);\"}\n              vec3 shadedNormal = computeTextureNormal(tangentSpace, vuv0);`:\"vec3 shadedNormal = normal;\"}\n        ${1===P.pbrMode||2===P.pbrMode?1===P.viewingMode?E`vec3 normalGround = normalize(vpos + localOrigin);`:E`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:E``}\n        ${1===P.pbrMode||2===P.pbrMode?E`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${P.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),_.include(m,P),_}var _=Object.freeze({__proto__:null,build:P});export{_ as D,P as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VerticalOffset as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as g}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{EvaluateAmbientOcclusion as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{PhysicallyBasedRendering as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as x,DiscardOrAdjustAlpha as y}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{MixExternalColor as C}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as L}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as M}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function j(j){const E=new M,O=E.vertex.code,_=E.fragment.code;return E.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),E.include(t),E.varyings.add(\"vpos\",\"vec3\"),E.include(w,j),E.include(i,j),E.include(c,j),0!==j.output&&7!==j.output||(E.include(l,j),E.include(a,{linearDepth:!1}),j.offsetBackfaces&&E.include(o),j.instancedColor&&E.attributes.add(\"instanceColor\",\"vec4\"),E.varyings.add(\"vNormalWorld\",\"vec3\"),E.varyings.add(\"localvpos\",\"vec3\"),j.multipassTerrainEnabled&&E.varyings.add(\"depth\",\"float\"),E.include(n,j),E.include(e,j),E.include(d,j),E.include(s,j),E.vertex.uniforms.add(\"externalColor\",\"vec4\"),E.varyings.add(\"vcolorExt\",\"vec4\"),O.add(L`\n        void main(void) {\n          forwardNormalizedVertexColor();\n          vcolorExt = externalColor;\n          ${j.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n          vcolorExt *= vvColor();\n          vcolorExt *= getSymbolColor();\n          forwardColorMixMode();\n\n          if (vcolorExt.a < ${L.float(x)}) {\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          }\n          else {\n            vpos = calculateVPos();\n            localvpos = vpos - view[3].xyz;\n            vpos = subtractOrigin(vpos);\n            vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, vpos);\n            ${j.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n          }\n          ${j.multipassTerrainEnabled?L`depth = (view * vec4(vpos, 1.0)).z;`:\"\"}\n          forwardLinearDepth();\n          forwardTextureCoordinates();\n        }\n      `)),7===j.output&&(E.include(r,j),E.include(y,j),j.multipassTerrainEnabled&&(E.fragment.include(v),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        ${j.attributeColor?L`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===j.output&&(E.include(r,j),E.include(p,j),E.include(m,j),E.include(y,j),j.receiveShadows&&E.include(h,j),j.multipassTerrainEnabled&&(E.fragment.include(v),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.include(f,j),E.include(b,j),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        vec3 viewDirection = normalize(vpos - camPos);\n        ${1===j.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${j.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===j.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${j.attributeColor?L`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${L`\n        vec3 shadedNormal = normalize(vNormalWorld);\n        albedo_ *= 1.2;\n        vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);\n        float alignmentLightView = clamp(dot(viewForward, -lightingMainDirection), 0.0, 1.0);\n        float transmittance = 1.0 - clamp(dot(viewForward, shadedNormal), 0.0, 1.0);\n        float treeRadialFalloff = vColor.r;\n        float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n        additionalLight += backLightFactor * lightingMainIntensity;`}\n        ${1===j.pbrMode||2===j.pbrMode?1===j.viewingMode?L`vec3 normalGround = normalize(vpos + localOrigin);`:L`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:L``}\n        ${1===j.pbrMode||2===j.pbrMode?L`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${j.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),E.include(g,j),E}var E=Object.freeze({__proto__:null,build:j});export{E as R,j as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nvar e,r={exports:{}};void 0!==(e=[\"precision\",\"highp\",\"mediump\",\"lowp\",\"attribute\",\"const\",\"uniform\",\"varying\",\"break\",\"continue\",\"do\",\"for\",\"while\",\"if\",\"else\",\"in\",\"out\",\"inout\",\"float\",\"int\",\"void\",\"bool\",\"true\",\"false\",\"discard\",\"return\",\"mat2\",\"mat3\",\"mat4\",\"vec2\",\"vec3\",\"vec4\",\"ivec2\",\"ivec3\",\"ivec4\",\"bvec2\",\"bvec3\",\"bvec4\",\"sampler1D\",\"sampler2D\",\"sampler3D\",\"samplerCube\",\"sampler1DShadow\",\"sampler2DShadow\",\"struct\",\"asm\",\"class\",\"union\",\"enum\",\"typedef\",\"template\",\"this\",\"packed\",\"goto\",\"switch\",\"default\",\"inline\",\"noinline\",\"volatile\",\"public\",\"static\",\"extern\",\"external\",\"interface\",\"long\",\"short\",\"double\",\"half\",\"fixed\",\"unsigned\",\"input\",\"output\",\"hvec2\",\"hvec3\",\"hvec4\",\"dvec2\",\"dvec3\",\"dvec4\",\"fvec2\",\"fvec3\",\"fvec4\",\"sampler2DRect\",\"sampler3DRect\",\"sampler2DRectShadow\",\"sizeof\",\"cast\",\"namespace\",\"using\"])&&(r.exports=e);var t,o=r.exports,l={exports:{}};t=l,function(e){var r=[\"<<=\",\">>=\",\"++\",\"--\",\"<<\",\">>\",\"<=\",\">=\",\"==\",\"!=\",\"&&\",\"||\",\"+=\",\"-=\",\"*=\",\"/=\",\"%=\",\"&=\",\"^^\",\"^=\",\"|=\",\"(\",\")\",\"[\",\"]\",\".\",\"!\",\"~\",\"*\",\"/\",\"%\",\"+\",\"-\",\"<\",\">\",\"&\",\"^\",\"|\",\"?\",\":\",\"=\",\",\",\";\",\"{\",\"}\"];void 0!==r&&(t.exports=r)}();var a=l.exports,g={exports:{}};!function(e){!function(r){var t=function(){return[\"abs\",\"acos\",\"all\",\"any\",\"asin\",\"atan\",\"ceil\",\"clamp\",\"cos\",\"cross\",\"dFdx\",\"dFdy\",\"degrees\",\"distance\",\"dot\",\"equal\",\"exp\",\"exp2\",\"faceforward\",\"floor\",\"fract\",\"gl_BackColor\",\"gl_BackLightModelProduct\",\"gl_BackLightProduct\",\"gl_BackMaterial\",\"gl_BackSecondaryColor\",\"gl_ClipPlane\",\"gl_ClipVertex\",\"gl_Color\",\"gl_DepthRange\",\"gl_DepthRangeParameters\",\"gl_EyePlaneQ\",\"gl_EyePlaneR\",\"gl_EyePlaneS\",\"gl_EyePlaneT\",\"gl_Fog\",\"gl_FogCoord\",\"gl_FogFragCoord\",\"gl_FogParameters\",\"gl_FragColor\",\"gl_FragCoord\",\"gl_FragData\",\"gl_FragDepth\",\"gl_FragDepthEXT\",\"gl_FrontColor\",\"gl_FrontFacing\",\"gl_FrontLightModelProduct\",\"gl_FrontLightProduct\",\"gl_FrontMaterial\",\"gl_FrontSecondaryColor\",\"gl_LightModel\",\"gl_LightModelParameters\",\"gl_LightModelProducts\",\"gl_LightProducts\",\"gl_LightSource\",\"gl_LightSourceParameters\",\"gl_MaterialParameters\",\"gl_MaxClipPlanes\",\"gl_MaxCombinedTextureImageUnits\",\"gl_MaxDrawBuffers\",\"gl_MaxFragmentUniformComponents\",\"gl_MaxLights\",\"gl_MaxTextureCoords\",\"gl_MaxTextureImageUnits\",\"gl_MaxTextureUnits\",\"gl_MaxVaryingFloats\",\"gl_MaxVertexAttribs\",\"gl_MaxVertexTextureImageUnits\",\"gl_MaxVertexUniformComponents\",\"gl_ModelViewMatrix\",\"gl_ModelViewMatrixInverse\",\"gl_ModelViewMatrixInverseTranspose\",\"gl_ModelViewMatrixTranspose\",\"gl_ModelViewProjectionMatrix\",\"gl_ModelViewProjectionMatrixInverse\",\"gl_ModelViewProjectionMatrixInverseTranspose\",\"gl_ModelViewProjectionMatrixTranspose\",\"gl_MultiTexCoord0\",\"gl_MultiTexCoord1\",\"gl_MultiTexCoord2\",\"gl_MultiTexCoord3\",\"gl_MultiTexCoord4\",\"gl_MultiTexCoord5\",\"gl_MultiTexCoord6\",\"gl_MultiTexCoord7\",\"gl_Normal\",\"gl_NormalMatrix\",\"gl_NormalScale\",\"gl_ObjectPlaneQ\",\"gl_ObjectPlaneR\",\"gl_ObjectPlaneS\",\"gl_ObjectPlaneT\",\"gl_Point\",\"gl_PointCoord\",\"gl_PointParameters\",\"gl_PointSize\",\"gl_Position\",\"gl_ProjectionMatrix\",\"gl_ProjectionMatrixInverse\",\"gl_ProjectionMatrixInverseTranspose\",\"gl_ProjectionMatrixTranspose\",\"gl_SecondaryColor\",\"gl_TexCoord\",\"gl_TextureEnvColor\",\"gl_TextureMatrix\",\"gl_TextureMatrixInverse\",\"gl_TextureMatrixInverseTranspose\",\"gl_TextureMatrixTranspose\",\"gl_Vertex\",\"greaterThan\",\"greaterThanEqual\",\"inversesqrt\",\"length\",\"lessThan\",\"lessThanEqual\",\"log\",\"log2\",\"matrixCompMult\",\"max\",\"min\",\"mix\",\"mod\",\"normalize\",\"not\",\"notEqual\",\"pow\",\"radians\",\"reflect\",\"refract\",\"sign\",\"sin\",\"smoothstep\",\"sqrt\",\"step\",\"tan\",\"texture2D\",\"texture2DLod\",\"texture2DProj\",\"texture2DProjLod\",\"textureCube\",\"textureCubeLod\",\"texture2DLodEXT\",\"texture2DProjLodEXT\",\"textureCubeLodEXT\",\"texture2DGradEXT\",\"texture2DProjGradEXT\",\"textureCubeGradEXT\"]}();void 0!==t&&(e.exports=t)}()}(g);var i=g.exports;export{i as b,o as l,a as o};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as t}from\"./mat3f64.js\";import{a as s}from\"./quatf64.js\";import{c as a,f as n}from\"./vec3f64.js\";import{E as o,R as r}from\"./common.js\";import{d as c,c as e,u,n as i}from\"./vec3.js\";import{c as h,s as M,a as f,b as l,d as m,l as p,e as q,f as d,n as j,g,h as v}from\"./vec4.js\";function x(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function A(t,s,a){a*=.5;const n=Math.sin(a);return t[0]=n*s[0],t[1]=n*s[1],t[2]=n*s[2],t[3]=Math.cos(a),t}function I(t,s){const a=2*Math.acos(s[3]),n=Math.sin(a/2);return n>o?(t[0]=s[0]/n,t[1]=s[1]/n,t[2]=s[2]/n):(t[0]=1,t[1]=0,t[2]=0),a}function P(t,s,a){const n=s[0],o=s[1],r=s[2],c=s[3],e=a[0],u=a[1],i=a[2],h=a[3];return t[0]=n*h+c*e+o*i-r*u,t[1]=o*h+c*u+r*e-n*i,t[2]=r*h+c*i+n*u-o*e,t[3]=c*h-n*e-o*u-r*i,t}function b(t,s,a){a*=.5;const n=s[0],o=s[1],r=s[2],c=s[3],e=Math.sin(a),u=Math.cos(a);return t[0]=n*u+c*e,t[1]=o*u+r*e,t[2]=r*u-o*e,t[3]=c*u-n*e,t}function y(t,s,a){a*=.5;const n=s[0],o=s[1],r=s[2],c=s[3],e=Math.sin(a),u=Math.cos(a);return t[0]=n*u-r*e,t[1]=o*u+c*e,t[2]=r*u+n*e,t[3]=c*u-o*e,t}function E(t,s,a){a*=.5;const n=s[0],o=s[1],r=s[2],c=s[3],e=Math.sin(a),u=Math.cos(a);return t[0]=n*u+o*e,t[1]=o*u-n*e,t[2]=r*u+c*e,t[3]=c*u-r*e,t}function _(t,s){const a=s[0],n=s[1],o=s[2];return t[0]=a,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-a*a-n*n-o*o)),t}function z(t,s,a,n){const r=s[0],c=s[1],e=s[2],u=s[3];let i,h,M,f,l,m=a[0],p=a[1],q=a[2],d=a[3];return h=r*m+c*p+e*q+u*d,h<0&&(h=-h,m=-m,p=-p,q=-q,d=-d),1-h>o?(i=Math.acos(h),M=Math.sin(i),f=Math.sin((1-n)*i)/M,l=Math.sin(n*i)/M):(f=1-n,l=n),t[0]=f*r+l*m,t[1]=f*c+l*p,t[2]=f*e+l*q,t[3]=f*u+l*d,t}function L(t){const s=r(),a=r(),n=r(),o=Math.sqrt(1-s),c=Math.sqrt(s);return t[0]=o*Math.sin(2*Math.PI*a),t[1]=o*Math.cos(2*Math.PI*a),t[2]=c*Math.sin(2*Math.PI*n),t[3]=c*Math.cos(2*Math.PI*n),t}function k(t,s){const a=s[0],n=s[1],o=s[2],r=s[3],c=a*a+n*n+o*o+r*r,e=c?1/c:0;return t[0]=-a*e,t[1]=-n*e,t[2]=-o*e,t[3]=r*e,t}function w(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t}function B(t,s){const a=s[0]+s[4]+s[8];let n;if(a>0)n=Math.sqrt(a+1),t[3]=.5*n,n=.5/n,t[0]=(s[5]-s[7])*n,t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n;else{let a=0;s[4]>s[0]&&(a=1),s[8]>s[3*a+a]&&(a=2);const o=(a+1)%3,r=(a+2)%3;n=Math.sqrt(s[3*a+a]-s[3*o+o]-s[3*r+r]+1),t[a]=.5*n,n=.5/n,t[3]=(s[3*o+r]-s[3*r+o])*n,t[o]=(s[3*o+a]+s[3*a+o])*n,t[r]=(s[3*r+a]+s[3*a+r])*n}return t}function C(t,s,a,n){const o=.5*Math.PI/180;s*=o,a*=o,n*=o;const r=Math.sin(s),c=Math.cos(s),e=Math.sin(a),u=Math.cos(a),i=Math.sin(n),h=Math.cos(n);return t[0]=r*u*h-c*e*i,t[1]=c*e*h+r*u*i,t[2]=c*u*i-r*e*h,t[3]=c*u*h+r*e*i,t}function D(t){return\"quat(\"+t[0]+\", \"+t[1]+\", \"+t[2]+\", \"+t[3]+\")\"}const F=h,G=M,O=f,R=P,T=l,W=m,X=p,Y=q,Z=Y,H=d,J=H,K=j,N=g,Q=v;function S(t,s,a){const n=c(s,a);return n<-.999999?(e(U,V,s),u(U)<1e-6&&e(U,$,s),i(U,U),A(t,U,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(e(U,s,a),t[0]=U[0],t[1]=U[1],t[2]=U[2],t[3]=1+n,K(t,t))}const U=a(),V=n(1,0,0),$=n(0,1,0);function tt(t,s,a,n,o,r){return z(st,s,o,r),z(at,a,n,r),z(t,st,at,2*r*(1-r)),t}const st=s(),at=s();function nt(t,s,a,n){const o=ot;return o[0]=a[0],o[3]=a[1],o[6]=a[2],o[1]=n[0],o[4]=n[1],o[7]=n[2],o[2]=-s[0],o[5]=-s[1],o[8]=-s[2],K(t,B(t,o))}const ot=t();var rt=Object.freeze({__proto__:null,identity:x,setAxisAngle:A,getAxisAngle:I,multiply:P,rotateX:b,rotateY:y,rotateZ:E,calculateW:_,slerp:z,random:L,invert:k,conjugate:w,fromMat3:B,fromEuler:C,str:D,copy:F,set:G,add:O,mul:R,scale:T,dot:W,lerp:X,length:Y,len:Z,squaredLength:H,sqrLen:J,normalize:K,exactEquals:N,equals:Q,rotationTo:S,sqlerp:tt,setAxes:nt});export{X as A,Z as B,J as C,K as D,Q as E,tt as F,nt as G,F as a,b,w as c,y as d,E as e,W as f,I as g,H as h,k as i,N as j,C as k,Y as l,P as m,x as n,_ as o,z as p,rt as q,S as r,A as s,L as t,B as u,D as v,G as w,O as x,R as y,T as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{logger as t}from\"../geometry/support/buffer/math/common.js\";function e(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[4],c=r[5],i=r[6],a=r[8],p=r[9],y=r[10],B=r[12],m=r[13],h=r[14],l=e.typedBuffer,S=e.typedBufferStride,b=f.typedBuffer,v=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*S,f=t*v,r=b[f],o=b[f+1],M=b[f+2];l[e]=n*r+s*o+a*M+B,l[e+1]=u*r+c*o+p*M+m,l[e+2]=d*r+i*o+y*M+h}}function f(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[3],c=r[4],i=r[5],a=r[6],p=r[7],y=r[8],B=e.typedBuffer,m=e.typedBufferStride,h=f.typedBuffer,l=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*m,f=t*l,r=h[f],o=h[f+1],S=h[f+2];B[e]=n*r+s*o+a*S,B[e+1]=u*r+c*o+p*S,B[e+2]=d*r+i*o+y*S}}function r(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=f*u[e],o[t+1]=f*u[e+1],o[t+2]=f*u[e+2]}}function o(t,e){const f=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,n=e.typedBuffer,u=e.typedBufferStride;for(let d=0;d<f;d++){const t=d*o,e=d*u,f=n[e],s=n[e+1],c=n[e+2],i=Math.sqrt(f*f+s*s+c*c);if(i>0){const e=1/i;r[t]=e*f,r[t+1]=e*s,r[t+2]=e*c}}}function n(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=u[e]>>f,o[t+1]=u[e+1]>>f,o[t+2]=u[e+2]>>f}}var u=Object.freeze({__proto__:null,transformMat4:e,transformMat3:f,scale:r,normalize:o,shiftRight:n});export{f as a,n as b,o as n,r as s,e as t,u as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction e(e,t,n){const d=e.typedBuffer,f=e.typedBufferStride,r=t.typedBuffer,u=t.typedBufferStride,l=n?n.count:t.count;let o=(n&&n.dstIndex?n.dstIndex:0)*f,c=(n&&n.srcIndex?n.srcIndex:0)*u;for(let s=0;s<l;++s)d[o]=r[c],d[o+1]=r[c+1],d[o+2]=r[c+2],o+=f,c+=u}function t(e,t,n,d,f){var r,u;const l=e.typedBuffer,o=e.typedBufferStride,c=null!=(r=null==f?void 0:f.count)?r:e.count;let s=(null!=(u=null==f?void 0:f.dstIndex)?u:0)*o;for(let p=0;p<c;++p)l[s]=t,l[s+1]=n,l[s+2]=d,s+=o}var n=Object.freeze({__proto__:null,copy:e,fill:t});export{e as c,t as f,n as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(){return new Float32Array(3)}function r(n){const r=new Float32Array(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function t(n,r,t){const a=new Float32Array(3);return a[0]=n,a[1]=r,a[2]=t,a}function a(n,r){return new Float32Array(n,r,3)}function e(){return n()}function o(){return t(1,1,1)}function u(){return t(1,0,0)}function s(){return t(0,1,0)}function c(){return t(0,0,1)}const i=e(),f=o(),l=u(),_=s(),w=c();var y=Object.freeze({__proto__:null,create:n,clone:r,fromValues:t,createView:a,zeros:e,ones:o,unitX:u,unitY:s,unitZ:c,ZEROS:i,ONES:f,UNIT_X:l,UNIT_Y:_,UNIT_Z:w});export{f as O,l as U,i as Z,r as a,a as b,n as c,s as d,c as e,t as f,_ as g,w as h,o,u,y as v,e as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport r from\"../../../../core/Logger.js\";const e=r.getLogger(\"esri.views.3d.support.buffer.math\");export{e as logger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import{isNone as t}from\"../../core/maybe.js\";function s(){if(t(i)){const t=t=>e(`esri/libs/basisu/${t}`);i=import(\"../../chunks/basis_transcoder.js\").then((function(e){return e.b})).then((({default:e})=>e({locateFile:t}).then((e=>(e.initializeBasis(),delete e.then,e)))))}return i}let i;export{s as getBasisTranscoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,r){const{data:a}=await e(t,{responseType:\"image\",...r});return a}export{t as requestImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{a as o}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{b as a}from\"../../../../chunks/mat4.js\";import{c as u}from\"../../../../chunks/mat4f64.js\";import{m as n,f as l,E as c,l as m,n as d,e as f}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as x,expandWithVec3 as g}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as h,BufferViewVec4f as b,BufferViewVec2f as v,BufferViewVec4u8 as R,BufferViewVec4u16 as y,BufferViewVec3u8 as B,BufferViewVec3u16 as M}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as w,a as j,s as C}from\"../../../../chunks/vec32.js\";import{t as E,s as T}from\"../../../../chunks/vec42.js\";import{createBuffer as S}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as O}from\"../../glTF/DefaultLoadingContext.js\";import{load as F}from\"../../glTF/loader.js\";import{triangleFanToTriangles as A,triangleStripToTriangles as I,trianglesToTriangles as k}from\"../../glTF/internal/indexUtils.js\";import{load as L,processLoadResult as N}from\"./wosrLoader.js\";import{Geometry as P}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as _}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as z}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as D}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{n as V}from\"../../../../chunks/vec22.js\";import{c as W,f as G}from\"../../../../chunks/vec43.js\";import{c as U}from\"../../../../chunks/vec33.js\";async function $(s,o){const i=q(e(s));if(\"wosr\"===i.fileType){const e=await(o.cache?o.cache.loadWOSR(i.url,o):L(i.url,o)),t=N(e,o);return{lods:[t],referenceBoundingBox:t.boundingBox,isEsriSymbolResource:!1,isWosr:!0,remove:e.remove}}const a=await(o.cache?o.cache.loadGLTF(i.url,o,o.usePBR):F(new O(o.streamDataRequester),i.url,o,o.usePBR)),u=t(a.model.meta,\"ESRI_proxyEllipsoid\");a.meta.isEsriSymbolResource&&r(u)&&-1!==a.meta.uri.indexOf(\"/RealisticTrees/\")&&J(a,u);const n=a.meta.isEsriSymbolResource?{usePBR:o.usePBR,isSchematic:!1,treeRendering:a.customMeta.esriTreeRendering,mrrFactors:[0,1,.2]}:{usePBR:o.usePBR,isSchematic:!1,mrrFactors:[0,1,.5]},l={...o.materialParamsMixin,treeRendering:a.customMeta.esriTreeRendering};if(null!=i.specifiedLodIndex){const e=K(a,n,l,i.specifiedLodIndex);let t=e[0].boundingBox;if(0!==i.specifiedLodIndex){t=K(a,n,l,0)[0].boundingBox}return{lods:e,referenceBoundingBox:t,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}const c=K(a,n,l);return{lods:c,referenceBoundingBox:c[0].boundingBox,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}function q(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function K(e,t,s,a){const u=e.model,n=i(),l=new Array,c=new Map,m=new Map;return u.lods.forEach(((e,i)=>{if(void 0!==a&&i!==a)return;const d={name:e.name,stageResources:{textures:new Array,materials:new Array,geometries:new Array},lodThreshold:r(e.lodThreshold)?e.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:x()};l.push(d),e.parts.forEach((e=>{const i=e.material+(e.attributes.normal?\"_normal\":\"\")+(e.attributes.color?\"_color\":\"\")+(e.attributes.texCoord0?\"_texCoord0\":\"\")+(e.attributes.tangent?\"_tangent\":\"\"),a=u.materials.get(e.material),l=r(e.attributes.texCoord0),f=r(e.attributes.normal),p=Q(a.alphaMode);if(!c.has(i)){if(l){if(r(a.textureColor)&&!m.has(a.textureColor)){const e=u.textures.get(a.textureColor),t={...e.parameters,preMultiplyAlpha:1!==p};m.set(a.textureColor,new _(e.data,t))}if(r(a.textureNormal)&&!m.has(a.textureNormal)){const e=u.textures.get(a.textureNormal);m.set(a.textureNormal,new _(e.data,e.parameters))}if(r(a.textureOcclusion)&&!m.has(a.textureOcclusion)){const e=u.textures.get(a.textureOcclusion);m.set(a.textureOcclusion,new _(e.data,e.parameters))}if(r(a.textureEmissive)&&!m.has(a.textureEmissive)){const e=u.textures.get(a.textureEmissive);m.set(a.textureEmissive,new _(e.data,e.parameters))}if(r(a.textureMetallicRoughness)&&!m.has(a.textureMetallicRoughness)){const e=u.textures.get(a.textureMetallicRoughness);m.set(a.textureMetallicRoughness,new _(e.data,e.parameters))}}const o=a.color[0]**(1/D),n=a.color[1]**(1/D),d=a.color[2]**(1/D),x=a.emissiveFactor[0]**(1/D),g=a.emissiveFactor[1]**(1/D),h=a.emissiveFactor[2]**(1/D),b=r(a.textureColor)&&l?m.get(a.textureColor):null;c.set(i,new z({...t,transparent:0===p,textureAlphaMode:p,textureAlphaCutoff:a.alphaCutoff,diffuse:[o,n,d],ambient:[o,n,d],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:\"winding-order\",cullFace:a.doubleSided?0:2,vertexColors:!!e.attributes.color,vertexTangents:!!e.attributes.tangent,normals:f?\"default\":\"screenDerivative\",castShadows:!0,receiveSSAO:!0,textureId:r(b)?b.id:void 0,colorMixMode:a.colorMixMode,normalTextureId:r(a.textureNormal)&&l?m.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:r(b)&&!!b.params.preMultiplyAlpha,occlusionTextureId:r(a.textureOcclusion)&&l?m.get(a.textureOcclusion).id:void 0,emissiveTextureId:r(a.textureEmissive)&&l?m.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:r(a.textureMetallicRoughness)&&l?m.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[x,g,h],mrrFactors:[a.metallicFactor,a.roughnessFactor,t.mrrFactors[2]],isSchematic:!1,...s}))}const x=H(e.indices||e.attributes.position.count,e.primitiveType),O=e.attributes.position.count,F=S(h,O);w(F,e.attributes.position,e.transform);const A=[[\"position\",{data:F.typedBuffer,size:F.elementCount,exclusive:!0}]],I=[[\"position\",x]];if(r(e.attributes.normal)){const t=S(h,O);o(n,e.transform),j(t,e.attributes.normal,n),A.push([\"normal\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"normal\",x])}if(r(e.attributes.tangent)){const t=S(b,O);o(n,e.transform),E(t,e.attributes.tangent,n),A.push([\"tangent\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"tangent\",x])}if(r(e.attributes.texCoord0)){const t=S(v,O);V(t,e.attributes.texCoord0),A.push([\"uv0\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"uv0\",x])}if(r(e.attributes.color)){const t=S(R,O);if(4===e.attributes.color.elementCount)e.attributes.color instanceof b?T(t,e.attributes.color,255):e.attributes.color instanceof R?W(t,e.attributes.color):e.attributes.color instanceof y&&T(t,e.attributes.color,1/256);else{G(t,255,255,255,255);const r=new B(t.buffer,0,4);e.attributes.color instanceof h?C(r,e.attributes.color,255):e.attributes.color instanceof B?U(r,e.attributes.color):e.attributes.color instanceof M&&C(r,e.attributes.color,1/256)}A.push([\"color\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"color\",x])}const k=new P(A,I);d.stageResources.geometries.push(k),d.stageResources.materials.push(c.get(i)),l&&(r(a.textureColor)&&d.stageResources.textures.push(m.get(a.textureColor)),r(a.textureNormal)&&d.stageResources.textures.push(m.get(a.textureNormal)),r(a.textureOcclusion)&&d.stageResources.textures.push(m.get(a.textureOcclusion)),r(a.textureEmissive)&&d.stageResources.textures.push(m.get(a.textureEmissive)),r(a.textureMetallicRoughness)&&d.stageResources.textures.push(m.get(a.textureMetallicRoughness))),d.numberOfVertices+=O;const L=k.boundingInfo;r(L)&&(g(d.boundingBox,L.getBBMin()),g(d.boundingBox,L.getBBMax()))}))})),l}function Q(e){switch(e){case\"BLEND\":return 0;case\"MASK\":return 2;case\"OPAQUE\":case null:case void 0:return 1}}function H(e,t){switch(t){case 4:return k(e);case 5:return I(e);case 6:return A(e)}}function J(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];e.customMeta.esriTreeRendering=!0;for(const i of o.parts){const o=i.attributes.normal;if(s(o))return;const x=i.attributes.position,g=x.count,b=p(),v=p(),y=p(),B=S(R,g),M=S(h,g),w=a(u(),i.transform);for(let s=0;s<g;s++){x.getVec(s,v),o.getVec(s,b),n(v,v,i.transform),l(y,v,t.center),c(y,y,t.radius);const a=y[2],u=m(y),p=Math.min(.45+.55*u*u,1);c(y,y,t.radius),n(y,y,w),d(y,y),r+1!==e.model.lods.length&&e.model.lods.length>1&&f(y,y,b,a>-1?.2:Math.min(-4*a-3.8,1)),M.setVec(s,y),B.set(s,0,255*p),B.set(s,1,255*p),B.set(s,2,255*p),B.set(s,3,255)}i.attributes.normal=M,i.attributes.color=B}}}export{$ as fetch,K as gltfToEngineResources,q as parseUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/Error.js\";import n from\"../../../../core/Logger.js\";import{isSome as a,unwrap as s}from\"../../../../core/maybe.js\";import{throwIfAbortError as o}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{d as u}from\"../../../../chunks/vec3f64.js\";import{empty as l,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Geometry as m}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as f}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as d}from\"../../webgl-engine/materials/DefaultMaterial.js\";const y=n.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");async function x(e,t){const r=await g(e,t);return{resource:r,textures:await A(r.textureDefinitions,t)}}async function g(r,n){const i=a(n)&&n.streamDataRequester;if(i)return h(r,i,n);const u=await t(e(r,s(n)));if(!0===u.ok)return u.value.data;o(u.error),w(u.error)}async function h(e,r,n){const a=await t(r.request(e,\"json\",n));if(!0===a.ok)return a.value;o(a.error),w(a.error.details.url)}function w(e){throw new r(\"\",`Request for object resource failed: ${e}`)}function v(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(y.warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t&&t.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(y.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(y.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(y.warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else y.warn(\"Indexed geometries must specify faces\"),n=!1;break}default:y.warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(y.warn(\"Geometry requires material\"),n=!1);const a=e.params.vertexAttributes;for(const s in a){a[s].values||(y.warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function b(e,t){const r=[],n=[],s=[],o=[],l=e.resource,c=i.parse(l.version||\"1.0\",\"wosr\");I.validate(c);const p=l.model.name,y=l.model.geometries,x=l.materialDefinitions,g=e.textures;let h=0;const w=new Map;for(let i=0;i<y.length;i++){const e=y[i];if(!v(e))continue;const l=M(e),c=e.params.vertexAttributes,p=[];for(const t in c){const e=c[t],r=e.values;p.push([t,{data:r,size:e.valuesPerElement,exclusive:!0}])}const b=[];if(\"PerAttributeArray\"!==e.params.topology){const t=e.params.faces;for(const e in t)b.push([e,new Uint32Array(t[e].values)])}const j=g&&g[l.texture];if(j&&!w.has(l.texture)){const{image:e,params:t}=j,r=new f(e,t);o.push(r),w.set(l.texture,r)}const A=w.get(l.texture),I=A?A.id:void 0;let P=s[l.material]?s[l.material][l.texture]:null;if(!P){const e=x[l.material.substring(l.material.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=j&&j.alphaChannelUsage,n=e.transparency>0||\"transparency\"===r||\"maskAndTransparency\"===r,o=j?U(j.alphaChannelUsage):void 0,i={ambient:u(e.diffuse),diffuse:u(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:o,textureAlphaCutoff:.33,textureId:I,initTextureTransparent:!0,doubleSided:!0,cullFace:0,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:!!j&&!!j.params.preMultiplyAlpha};a(t)&&t.materialParamsMixin&&Object.assign(i,t.materialParamsMixin),P=new d(i),s[l.material]||(s[l.material]={}),s[l.material][l.texture]=P}n.push(P);const T=new m(p,b);h+=b.position?b.position.length:0,r.push(T)}return{name:p,stageResources:{textures:o,materials:n,geometries:r},pivotOffset:l.model.pivotOffset,boundingBox:j(r),numberOfVertices:h,lodThreshold:null}}function j(e){const t=l();return e.forEach((e=>{const r=e.boundingInfo;a(r)&&(c(t,r.getBBMin()),c(t,r.getBBMax()))})),t}async function A(e,t){const r=[];for(const o in e){const n=e[o],s=n.images[0].data;if(!s){y.warn(\"Externally referenced texture data is not yet supported\");continue}const i=n.encoding+\";base64,\"+s,u=\"/textureDefinitions/\"+o,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",c={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:1!==U(l)},m=a(t)&&t.disableTextures?Promise.resolve(null):p(i,t);r.push(m.then((e=>({refId:u,image:e,params:c,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function U(e){switch(e){case\"mask\":return 2;case\"maskAndTransparency\":return 3;case\"none\":return 1;default:return 0}}function M(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const I=new i(1,2,\"wosr\");export{A as createTextureResources,x as load,b as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{BufferViewVec2f as e,BufferViewVec2f64 as t,BufferViewVec3f as i,BufferViewVec3f64 as s,BufferViewVec4f as r,BufferViewVec4f64 as n,BufferViewMat3f as h,BufferViewMat3f64 as d,BufferViewMat4f as u,BufferViewMat4f64 as f,BufferViewVec4u8 as p,BufferViewFloat as l,BufferViewFloat64 as a,BufferViewUint8 as o,BufferViewUint16 as c,BufferViewInt8 as F,BufferViewVec2i8 as m,BufferViewVec2i16 as y,BufferViewVec2u8 as b,BufferViewVec4u16 as w,BufferViewUint32 as g}from\"../../../../geometry/support/buffer/BufferView.js\";import{elementTypeSize as v}from\"../../../../geometry/support/buffer/types.js\";class N{constructor(e,t){this.layout=e,this.buffer=\"number\"==typeof t?new ArrayBuffer(t*e.stride):t;for(const i of e.fieldNames){const t=e.fields.get(i);this[i]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const i=this[e];return i&&i.elementCount===t.ElementCount&&i.elementType===t.ElementType?i:null}slice(e,t){return new N(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,i,s){const r=this.stride;if(r%4==0){const n=new Uint32Array(e.buffer,t*r,s*r/4);new Uint32Array(this.buffer,i*r,s*r/4).set(n)}else{const n=new Uint8Array(e.buffer,t*r,s*r);new Uint8Array(this.buffer,i*r,s*r).set(n)}}}class T{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(t,i){return this.appendField(t,e,i),this}vec2f64(e,i){return this.appendField(e,t,i),this}vec3f(e,t){return this.appendField(e,i,t),this}vec3f64(e,t){return this.appendField(e,s,t),this}vec4f(e,t){return this.appendField(e,r,t),this}vec4f64(e,t){return this.appendField(e,n,t),this}mat3f(e,t){return this.appendField(e,h,t),this}mat3f64(e,t){return this.appendField(e,d,t),this}mat4f(e,t){return this.appendField(e,u,t),this}mat4f64(e,t){return this.appendField(e,f,t),this}vec4u8(e,t){return this.appendField(e,p,t),this}f32(e,t){return this.appendField(e,l,t),this}f64(e,t){return this.appendField(e,a,t),this}u8(e,t){return this.appendField(e,o,t),this}u16(e,t){return this.appendField(e,c,t),this}i8(e,t){return this.appendField(e,F,t),this}vec2i8(e,t){return this.appendField(e,m,t),this}vec2i16(e,t){return this.appendField(e,y,t),this}vec2u8(e,t){return this.appendField(e,b,t),this}vec4u16(e,t){return this.appendField(e,w,t),this}u32(e,t){return this.appendField(e,g,t),this}appendField(e,t,i){const s=t.ElementCount*v(t.ElementType),r=this.stride;this.fields.set(e,{size:s,constructor:t,offset:r,optional:i}),this.stride+=s,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new N(this,e)}createView(e){return new N(this,e)}clone(){const e=new T;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,i)=>e.fields.set(i,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function A(){return new T}export{N as InterleavedBuffer,T as InterleavedLayout,A as newLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../../../core/shaderModules/interfaces.js\";function l(l){l.vertex.code.add(o`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${o.int(3)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${o.int(4)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{l as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function a(a,r){0===r.output&&r.receiveShadows?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.code.add(e`void forwardLinearDepth() { linearDepth = gl_Position.w; }`)):1===r.output||3===r.output?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),a.vertex.code.add(e`void forwardLinearDepth() {\nlinearDepth = (-position_view().z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n}`)):a.vertex.code.add(e`void forwardLinearDepth() {}`)}export{a as ForwardLinearDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../../core/maybe.js\";import{f as s}from\"../../../../../chunks/vec3.js\";import{Z as i,c as a}from\"../../../../../chunks/vec3f64.js\";import{glsl as o}from\"../shaderModules/interfaces.js\";function c(e,s){if(s.slicePlaneEnabled){e.extensions.add(\"GL_OES_standard_derivatives\"),s.sliceEnabledForVertexPrograms&&(e.vertex.uniforms.add(\"slicePlaneOrigin\",\"vec3\"),e.vertex.uniforms.add(\"slicePlaneBasis1\",\"vec3\"),e.vertex.uniforms.add(\"slicePlaneBasis2\",\"vec3\")),e.fragment.uniforms.add(\"slicePlaneOrigin\",\"vec3\"),e.fragment.uniforms.add(\"slicePlaneBasis1\",\"vec3\"),e.fragment.uniforms.add(\"slicePlaneBasis2\",\"vec3\");const i=o`struct SliceFactors {\nfloat front;\nfloat side0;\nfloat side1;\nfloat side2;\nfloat side3;\n};\nSliceFactors calculateSliceFactors(vec3 pos) {\nvec3 rel = pos - slicePlaneOrigin;\nvec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);\nfloat slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);\nfloat basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);\nfloat basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);\nfloat basis1Dot = dot(slicePlaneBasis1, rel);\nfloat basis2Dot = dot(slicePlaneBasis2, rel);\nreturn SliceFactors(\ndot(slicePlaneNormal, pos) + slicePlaneW,\n-basis1Dot - basis1Len2,\nbasis1Dot - basis1Len2,\n-basis2Dot - basis2Len2,\nbasis2Dot - basis2Len2\n);\n}\nbool sliceByFactors(SliceFactors factors) {\nreturn factors.front < 0.0\n&& factors.side0 < 0.0\n&& factors.side1 < 0.0\n&& factors.side2 < 0.0\n&& factors.side3 < 0.0;\n}\nbool sliceEnabled() {\nreturn dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;\n}\nbool sliceByPlane(vec3 pos) {\nreturn sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));\n}\n#define rejectBySlice(_pos_) sliceByPlane(_pos_)\n#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,a=o`vec4 applySliceHighlight(vec4 color, vec3 pos) {\nSliceFactors factors = calculateSliceFactors(pos);\nif (sliceByFactors(factors)) {\nreturn color;\n}\nconst float HIGHLIGHT_WIDTH = 1.0;\nconst vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);\nfactors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\nfactors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\nfactors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\nfactors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\nfactors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\nfloat highlightFactor = (1.0 - step(0.5, factors.front))\n* (1.0 - step(0.5, factors.side0))\n* (1.0 - step(0.5, factors.side1))\n* (1.0 - step(0.5, factors.side2))\n* (1.0 - step(0.5, factors.side3));\nreturn mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n}`,c=s.sliceHighlightDisabled?o`#define highlightSlice(_color_, _pos_) (_color_)`:o`\n        ${a}\n        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))\n      `;s.sliceEnabledForVertexPrograms&&e.vertex.code.add(i),e.fragment.code.add(i),e.fragment.code.add(c)}else{const i=o`#define rejectBySlice(_pos_) false\n#define discardBySlice(_pos_) {}\n#define highlightSlice(_color_, _pos_) (_color_)`;s.sliceEnabledForVertexPrograms&&e.vertex.code.add(i),e.fragment.code.add(i)}}function l(e,s,i){r(e,s,i.slicePlane,i.origin)}function r(a,o,c,l){o.slicePlaneEnabled&&(e(c)?(l?(s(t,c.origin,l),a.setUniform3fv(\"slicePlaneOrigin\",t)):a.setUniform3fv(\"slicePlaneOrigin\",c.origin),a.setUniform3fv(\"slicePlaneBasis1\",c.basis1),a.setUniform3fv(\"slicePlaneBasis2\",c.basis2)):(a.setUniform3fv(\"slicePlaneBasis1\",i),a.setUniform3fv(\"slicePlaneBasis2\",i),a.setUniform3fv(\"slicePlaneOrigin\",i)))}const t=a();export{c as Slice,r as bindSliceUniforms,l as bindSliceUniformsWithOrigin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function r(r,o){o.linearDepth?r.vertex.code.add(e`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\nvec4 eye = view * vec4(pos, 1.0);\ndepth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\nreturn proj * eye;\n}`):r.vertex.code.add(e`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\nreturn proj * (view * vec4(pos, 1.0));\n}`)}export{r as Transform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../../chunks/vec3f64.js\";import{DoublePrecision as i}from\"../util/DoublePrecision.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{encodeDoubleArraySplit as n}from\"../../../lib/doublePrecisionUtils.js\";function o(e,n){n.instanced&&n.instancedDoublePrecision&&(e.attributes.add(\"modelOriginHi\",\"vec3\"),e.attributes.add(\"modelOriginLo\",\"vec3\"),e.attributes.add(\"model\",\"mat3\"),e.attributes.add(\"modelNormal\",\"mat3\")),n.instancedDoublePrecision&&(e.vertex.include(i,n),e.vertex.uniforms.add(\"viewOriginHi\",\"vec3\"),e.vertex.uniforms.add(\"viewOriginLo\",\"vec3\"));const o=[r`\n    vec3 calculateVPos() {\n      ${n.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `,r`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${n.instancedDoublePrecision?r`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `,r`\n    vec3 dpNormal(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `,r`\n    vec3 dpNormalView(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `,n.vertexTangents?r`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${n.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `:r``];e.vertex.code.add(o[0]),e.vertex.code.add(o[1]),e.vertex.code.add(o[2]),2===n.output&&e.vertex.code.add(o[3]),e.vertex.code.add(o[4])}!function(e){class i{}function r(e,i){n(i,t,a,3),e.setUniform3fv(\"viewOriginHi\",t),e.setUniform3fv(\"viewOriginLo\",a)}e.Uniforms=i,e.bindCustomOrigin=r}(o||(o={}));const t=e(),a=e();export{o as InstancedDoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{DecodeNormal as e}from\"../util/DecodeNormal.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o,d){0===d.normalType&&(o.attributes.add(\"normal\",\"vec3\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`)),1===d.normalType&&(o.include(e),o.attributes.add(\"normalCompressed\",\"vec2\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn decodeNormal(normalCompressed);\n}`)),3===d.normalType&&(o.extensions.add(\"GL_OES_standard_derivatives\"),o.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`))}export{o as NormalAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){o.attributes.add(\"position\",\"vec3\"),o.vertex.code.add(e`vec3 positionModel() { return position; }`)}export{o as PositionAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function r(r,l){l.symbolColor?(r.include(o),r.attributes.add(\"symbolColor\",\"vec4\"),r.varyings.add(\"colorMixMode\",\"mediump float\")):r.fragment.uniforms.add(\"colorMixMode\",\"int\"),l.symbolColor?r.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`):r.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`)}export{r as SymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,d){1===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\n}`)),2===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.attributes.add(\"uvRegion\",\"vec4\"),t.varyings.add(\"vuvRegion\",\"vec4\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}`)),0===d.attributeTextureCoordinates&&t.vertex.code.add(e`void forwardTextureCoordinates() {}`)}export{t as TextureCoordinateAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function r(r,e){e.attributeColor?(r.attributes.add(\"color\",\"vec4\"),r.varyings.add(\"vColor\",\"vec4\"),r.vertex.code.add(o`void forwardVertexColor() { vColor = color; }`),r.vertex.code.add(o`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):r.vertex.code.add(o`void forwardVertexColor() {}\nvoid forwardNormalizedVertexColor() {}`)}export{r as VertexColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{NormalAttribute as o}from\"./NormalAttribute.glsl.js\";import{VertexPosition as r}from\"./VertexPosition.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function l(l,e){0===e.normalType||1===e.normalType?(l.include(o,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.varyings.add(\"vNormalView\",\"vec3\"),l.vertex.uniforms.add(\"uTransformNormal_GlobalFromModel\",\"mat3\"),l.vertex.uniforms.add(\"uTransformNormal_ViewFromGlobal\",\"mat3\"),l.vertex.code.add(a`void forwardNormal() {\nvNormalWorld = uTransformNormal_GlobalFromModel * normalModel();\nvNormalView = uTransformNormal_ViewFromGlobal * vNormalWorld;\n}`)):2===e.normalType?(l.include(r,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.vertex.code.add(a`\n    void forwardNormal() {\n      vNormalWorld = ${1===e.viewingMode?a`normalize(vPositionWorldCameraRelative);`:a`vec3(0.0, 0.0, 1.0);`}\n    }\n    `)):l.vertex.code.add(a`void forwardNormal() {}`)}!function(o){function r(o,r){o.setUniformMatrix4fv(\"viewNormal\",r)}o.bindUniforms=r}(l||(l={}));export{l as VertexNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as o}from\"../../../../../../chunks/mat3f64.js\";import{c as r}from\"../../../../../../chunks/mat4f64.js\";import{c as e}from\"../../../../../../chunks/vec3f64.js\";import{PositionAttribute as i}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as m}from\"../util/DoublePrecision.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function d(o,r){o.include(i),o.vertex.include(m,r),o.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),o.varyings.add(\"vPosition_view\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_ViewFromCameraRelative_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_ProjFromView\",\"mat4\"),o.vertex.code.add(a`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = uTransform_WorldFromModel_RS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\nuTransform_WorldFromModel_TL,\nuTransform_WorldFromModel_TH,\n-uTransform_WorldFromView_TL,\n-uTransform_WorldFromView_TH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}\nvec3 position_view() {\nreturn uTransform_ViewFromCameraRelative_RS * positionWorldCameraRelative();\n}\nvoid forwardPosition() {\nvPositionWorldCameraRelative = positionWorldCameraRelative();\nvPosition_view = position_view();\ngl_Position = uTransform_ProjFromView * vec4(vPosition_view, 1.0);\n}\nvec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`),o.fragment.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.fragment.code.add(a`vec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`)}!function(i){class m{constructor(){this.worldFromModel_RS=o(),this.worldFromModel_TH=e(),this.worldFromModel_TL=e()}}i.ModelTransform=m;class a{constructor(){this.worldFromView_TH=e(),this.worldFromView_TL=e(),this.viewFromCameraRelative_RS=o(),this.projFromView=r()}}function d(o,r){o.setUniformMatrix3fv(\"uTransform_WorldFromModel_RS\",r.worldFromModel_RS),o.setUniform3fv(\"uTransform_WorldFromModel_TH\",r.worldFromModel_TH),o.setUniform3fv(\"uTransform_WorldFromModel_TL\",r.worldFromModel_TL)}function s(o,r){o.setUniform3fv(\"uTransform_WorldFromView_TH\",r.worldFromView_TH),o.setUniform3fv(\"uTransform_WorldFromView_TL\",r.worldFromView_TL),o.setUniformMatrix4fv(\"uTransform_ProjFromView\",r.projFromView),o.setUniformMatrix3fv(\"uTransform_ViewFromCameraRelative_RS\",r.viewFromCameraRelative_RS)}i.ViewProjectionTransform=a,i.bindModelTransform=d,i.bindViewProjTransform=s}(d||(d={}));export{d as VertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{TextureCoordinateAttribute as e}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as t}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function u(u,a){u.include(e,a),u.fragment.code.add(r`\n  struct TextureLookupParameter {\n    vec2 uv;\n    ${a.supportsTextureAtlas?\"vec2 size;\":\"\"}\n  } vtc;\n  `),1===a.attributeTextureCoordinates&&u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn texture2D(tex, params.uv);\n}`),2===a.attributeTextureCoordinates&&(u.include(t),u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn textureAtlasLookup(tex, params.size, params.uv, vuvRegion);\n}`))}export{u as VertexTextureCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ScreenSizePerspective as e}from\"../util/ScreenSizePerspective.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function t(t,l){const c=t.vertex.code;l.verticalOffsetEnabled?(t.vertex.uniforms.add(\"verticalOffset\",\"vec4\"),l.screenSizePerspectiveEnabled&&(t.include(e),t.vertex.uniforms.add(\"screenSizePerspectiveAlignment\",\"vec4\")),c.add(r`\n    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n      ${1===l.viewingMode?r`vec3 worldNormal = normalize(worldPos + localOrigin);`:r`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}\n      ${l.screenSizePerspectiveEnabled?r`\n          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));\n          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:r`\n          float verticalOffsetScreenHeight = verticalOffset.x;`}\n      // Screen sized offset in world space, used for example for line callouts\n      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n      return worldNormal * worldOffset;\n    }\n\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n    }\n    `)):c.add(r`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}function l(e,r,t){if(!r.verticalOffset)return;const l=c(r.verticalOffset,t.camera.fovY,t.camera.fullViewport[3]),i=t.camera.pixelRatio||1;e.setUniform4f(\"verticalOffset\",l.screenLength*i,l.perDistance,l.minWorldLength,l.maxWorldLength)}function c(e,r,t,l=i){return l.screenLength=e.screenLength,l.perDistance=Math.tan(.5*r)/(.5*t),l.minWorldLength=e.minWorldLength,l.maxWorldLength=e.maxWorldLength,l}const i={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0};export{t as VerticalOffset,l as bindVerticalOffsetUniforms,c as calculateVerticalOffsetFactors};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Slice as o}from\"../Slice.glsl.js\";import{Transform as r}from\"../Transform.glsl.js\";import{NormalAttribute as e}from\"../attributes/NormalAttribute.glsl.js\";import{TextureCoordinateAttribute as t}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as i}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as a}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as l}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as s}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlpha as d}from\"../util/AlphaDiscard.glsl.js\";import{glsl as n}from\"../../shaderModules/interfaces.js\";function u(u,c){const p=u.vertex.code,v=u.fragment.code;1!==c.output&&3!==c.output||(u.include(r,{linearDepth:!0}),u.include(t,c),u.include(s,c),u.include(a,c),u.include(o,c),u.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),u.varyings.add(\"depth\",\"float\"),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, cameraNearFar, depth);\nforwardTextureCoordinates();\n}`),u.include(d,c),v.add(n`\n      void main(void) {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputDepth(depth);\n      }\n    `)),2===c.output&&(u.include(r,{linearDepth:!1}),u.include(e,c),u.include(i,c),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),u.vertex.uniforms.add(\"viewNormal\",\"mat4\"),u.varyings.add(\"vPositionView\",\"vec3\"),p.add(n`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        ${0===c.normalType?n`\n        vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:\"\"}\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();\n      }\n    `),u.include(o,c),u.include(d,c),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n\n        ${3===c.normalType?n`\n            vec3 normal = screenDerivativeNormal(vPositionView);`:n`\n            vec3 normal = normalize(vNormalWorld);\n            if (gl_FrontFacing == false) normal = -normal;`}\n        gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n      }\n    `)),4===c.output&&(u.include(r,{linearDepth:!1}),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();\n}`),u.include(o,c),u.include(d,c),u.include(l),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputHighlight();\n      }\n    `))}export{u as DefaultMaterialAuxiliaryPasses};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{RgbaFloatEncoding as t}from\"../util/RgbaFloatEncoding.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function e(e,o){e.fragment.include(t),3===o.output?(e.extensions.add(\"GL_OES_standard_derivatives\"),e.fragment.code.add(a`float _calculateFragDepth(const in float depth) {\nconst float SLOPE_SCALE = 2.0;\nconst float BIAS = 2.0 * .000015259;\nfloat m = max(abs(dFdx(depth)), abs(dFdy(depth)));\nfloat result = depth + SLOPE_SCALE * m + BIAS;\nreturn clamp(result, .0, .999999);\n}\nvoid outputDepth(float _linearDepth) {\ngl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));\n}`)):1===o.output&&e.fragment.code.add(a`void outputDepth(float _linearDepth) {\ngl_FragColor = float2rgba(_linearDepth);\n}`)}export{e as OutputDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec4f64.js\";import{glsl as i}from\"../../shaderModules/interfaces.js\";const t=e(1,1,0,1),o=e(1,0,1,1);function r(e){e.fragment.uniforms.add(\"depthTex\",\"sampler2D\"),e.fragment.uniforms.add(\"highlightViewportPixelSz\",\"vec4\"),e.fragment.constants.add(\"occludedHighlightFlag\",\"vec4\",t).add(\"unoccludedHighlightFlag\",\"vec4\",o),e.fragment.code.add(i`void outputHighlight() {\nvec4 fragCoord = gl_FragCoord;\nfloat sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;\nif (fragCoord.z > sceneDepth + 5e-7) {\ngl_FragColor = occludedHighlightFlag;\n}\nelse {\ngl_FragColor = unoccludedHighlightFlag;\n}\n}`)}function g(e,i){e.bindTexture(i.highlightDepthTexture,\"depthTex\"),e.setUniform4f(\"highlightViewportPixelSz\",0,0,i.inverseViewport[0],i.inverseViewport[1])}export{r as OutputHighlight,g as bindOutputHighlight,t as occludedHighlightFlag,o as unoccludedHighlightFlag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{RgbaFloatEncoding as e}from\"../util/RgbaFloatEncoding.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function a(a){a.include(e),a.code.add(r`float linearDepthFromFloat(float depth, vec2 nearFar) {\nreturn -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n}\nfloat linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {\nreturn linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);\n}`)}export{a as ReadLinearDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n{\nreturn ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n}`),a.add(e`float integratedRadiance(float cosTheta2, float roughness)\n{\nreturn (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n}`),a.add(e`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n{\nfloat cosTheta2 = 1.0 - RdotNG * RdotNG;\nfloat intRadTheta = integratedRadiance(cosTheta2, roughness);\nfloat ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\nfloat sky = 2.0 - ground;\nreturn (ground * ambientGround + sky * ambientSky) * 0.5;\n}`)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{VertexTextureCoordinates as e}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function n(n,a){const r=n.fragment;a.vertexTangents?(n.attributes.add(\"tangent\",\"vec4\"),n.varyings.add(\"vTangent\",\"vec4\"),2===a.doubleSidedMode?r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):(n.extensions.add(\"GL_OES_standard_derivatives\"),r.code.add(t`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`)),0!==a.attributeTextureCoordinates&&(n.include(e,a),r.uniforms.add(\"normalTexture\",\"sampler2D\"),r.uniforms.add(\"normalTextureSize\",\"vec2\"),r.code.add(t`\n    vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\n      vtc.uv = uv;\n      ${a.supportsTextureAtlas?\"vtc.size = normalTextureSize;\":\"\"}\n      vec3 rawNormal = textureLookup(normalTexture, vtc).rgb * 2.0 - 1.0;\n      return tangentSpace * rawNormal;\n    }\n  `))}export{n as ComputeNormalTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n,t){const e=n.fragment,a=void 0!==t.lightingSphericalHarmonicsOrder?t.lightingSphericalHarmonicsOrder:2;0===a?(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===a?(e.uniforms.add(\"lightingAmbientSH_R\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===a&&(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.uniforms.add(\"lightingAmbientSH_R1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_R2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B2\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),1!==t.pbrMode&&2!==t.pbrMode||e.code.add(i`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}export{n as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o,t){const r=o.fragment;t.receiveAmbientOcclusion?(r.uniforms.add(\"ssaoTex\",\"sampler2D\"),r.uniforms.add(\"viewportPixelSz\",\"vec4\"),r.code.add(e`float evaluateAmbientOcclusion() {\nreturn 1.0 - texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n}\nfloat evaluateAmbientOcclusionInverse() {\nfloat ssao = texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\nreturn viewportPixelSz.z < 0.0 ? 1.0 : ssao;\n}`)):r.code.add(e`float evaluateAmbientOcclusion() { return 0.0; }\nfloat evaluateAmbientOcclusionInverse() { return 1.0; }`)}export{o as EvaluateAmbientOcclusion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n){const t=n.fragment;t.uniforms.add(\"lightingMainDirection\",\"vec3\"),t.uniforms.add(\"lightingMainIntensity\",\"vec3\"),t.uniforms.add(\"lightingFixedFactor\",\"float\"),t.code.add(i`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {\nfloat dotVal = clamp(dot(normal_global, lightingMainDirection), 0.0, 1.0);\ndotVal = mix(dotVal, 1.0, lightingFixedFactor);\nreturn lightingMainIntensity * ((1.0 - shadowing) * dotVal);\n}`)}export{n as EvaluateMainLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{EvaluateAmbientLighting as i}from\"./EvaluateAmbientLighting.glsl.js\";import{EvaluateAmbientOcclusion as n}from\"./EvaluateAmbientOcclusion.glsl.js\";import{EvaluateMainLighting as o}from\"./EvaluateMainLighting.glsl.js\";import{PhysicallyBasedRendering as e}from\"./PhysicallyBasedRendering.glsl.js\";import{PiUtils as t}from\"./PiUtils.glsl.js\";import{ReadShadowMap as a}from\"./ReadShadowMap.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function l(l,d){const c=l.fragment;l.include(o),l.include(n,d),0!==d.pbrMode&&l.include(e,d),l.include(i,d),d.receiveShadows&&l.include(a,d),c.uniforms.add(\"lightingGlobalFactor\",\"float\"),c.uniforms.add(\"ambientBoostFactor\",\"float\"),l.include(t),c.code.add(r`\n    const float GAMMA_SRGB = 2.1;\n    const float INV_GAMMA_SRGB = 0.4761904;\n    ${0===d.pbrMode?\"\":\"const vec3 GROUND_REFLECTANCE = vec3(0.2);\"}\n  `),c.code.add(r`\n    float additionalDirectedAmbientLight(vec3 vPosWorld) {\n      float vndl = dot(${1===d.viewingMode?r`normalize(vPosWorld)`:r`vec3(0.0, 0.0, 1.0)`}, lightingMainDirection);\n      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n    }\n  `),c.code.add(r`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {\nfloat additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);\nreturn (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * lightingMainIntensity;\n}`),0===d.pbrMode||4===d.pbrMode?c.code.add(r`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight)\n{\nvec3 mainLighting = evaluateMainLighting(normalWorld, shadow);\nvec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);\nvec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\nvec3 totalLight = mainLighting + ambientLighting + additionalLight;\ntotalLight = min(totalLight, vec3(PI));\nvec3 outColor = vec3((albedoLinear / PI) * totalLight);\nreturn pow(outColor, vec3(INV_GAMMA_SRGB));\n}`):1!==d.pbrMode&&2!==d.pbrMode||(c.code.add(r`const float fillLightIntensity = 0.25;\nconst float horizonLightDiffusion = 0.4;\nconst float additionalAmbientIrradianceFactor = 0.02;\nvec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec3 _emission, float additionalAmbientIrradiance)\n{\nvec3 viewDirection = -viewDir;\nvec3 mainLightDirection = lightingMainDirection;\nvec3 h = normalize(viewDirection + mainLightDirection);\nPBRShadingInfo inputs;\ninputs.NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);\ninputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\ninputs.NdotH = clamp(dot(normal, h), 0.0, 1.0);\ninputs.VdotH = clamp(dot(viewDirection, h), 0.0, 1.0);\ninputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);\nvec3 reflectedView = normalize(reflect(viewDirection, normal));\ninputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);\ninputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\ninputs.ssao = ssao;\ninputs.metalness = mrr[0];\ninputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),c.code.add(r`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\ninputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\ninputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),c.code.add(r`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);\nambientDir = ambientDir != vec3(0.0)? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));\ninputs.NdotAmbDir = abs(dot(normal, ambientDir));\nvec3 mainLightIrradianceComponent = inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;\nvec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;\ninputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;\ninputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),c.code.add(r`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;\nvec3 horizonRingH = normalize(viewDirection + horizonRingDir);\ninputs.NdotH_Horizon = dot(normal, horizonRingH);\nvec3 mainLightRadianceComponent = normalDistribution(inputs.NdotH, inputs.roughness) * lightingMainIntensity * (1.0 - shadow);\nvec3 horizonLightRadianceComponent = normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightRadianceComponent = calculateAmbientRadiance(ssao) + additionalLight;\ninputs.skyRadianceToSurface = ambientLightRadianceComponent + mainLightRadianceComponent + horizonLightRadianceComponent;\ninputs.groundRadianceToSurface = GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) + mainLightRadianceComponent;\ninputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),c.code.add(r`\n        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);\n        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;\n        vec3 emissionComponent = pow(_emission, vec3(GAMMA_SRGB));\n        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;\n        ${2===d.pbrMode?r`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`:r`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`}\n        return outColor;\n      }\n    `))}export{l as EvaluateSceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function r(r,t){r.fragment.uniforms.add(\"terrainDepthTexture\",\"sampler2D\"),r.fragment.uniforms.add(\"cameraNearFar\",\"vec2\"),r.fragment.uniforms.add(\"inverseViewport\",\"vec2\"),r.fragment.code.add(e`\n    // Compare the linearized depths of fragment and terrain. Discard fragments on the wrong side of the terrain.\n    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){\n\n      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);\n      if(fragmentDepth ${t.cullAboveGround?\">\":\"<=\"} terrainDepth){\n        discard;\n      }\n    }\n  `)}function t(e,r){r.multipassTerrainEnabled&&r.terrainLinearDepthTexture&&e.bindTexture(r.terrainLinearDepthTexture,\"terrainDepthTexture\")}export{t as bindMultipassTerrainTexture,r as multipassTerrainTest};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";function r(r,e){const m=r.fragment;m.code.add(a`struct ShadingNormalParameters {\nvec3 normalView;\nvec3 viewDirection;\n} shadingParams;`),1===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);\n}`):2===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);\n}`):m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn normalize(params.normalView);\n}`)}export{r as Normals};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{AnalyticalSkyModel as e}from\"./AnalyticalSkyModel.glsl.js\";import{PiUtils as o}from\"./PiUtils.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function a(a,n){const r=a.fragment.code;a.include(o),3===n.pbrMode||4===n.pbrMode?(r.add(t`\n    struct PBRShadingWater\n    {\n        float NdotL;   // cos angle between normal and light direction\n        float NdotV;   // cos angle between normal and view direction\n        float NdotH;   // cos angle between normal and half vector\n        float VdotH;   // cos angle between view direction and half vector\n        float LdotH;   // cos angle between light direction and half vector\n        float VdotN;   // cos angle between view direction and normal vector\n    };\n\n    float dtrExponent = ${n.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n    `),r.add(t`vec3 fresnelReflection(float angle, vec3 f0, float f90) {\nreturn f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n}`),r.add(t`float normalDistributionWater(float NdotH, float roughness)\n{\nfloat r2 = roughness * roughness;\nfloat NdotH2 = NdotH * NdotH;\nfloat denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\nreturn r2 / denom;\n}`),r.add(t`float geometricOcclusionKelemen(float LoH)\n{\nreturn 0.25 / (LoH * LoH);\n}`),r.add(t`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n{\nvec3  F = fresnelReflection(props.VdotH, F0, F0Max);\nfloat dSun = normalDistributionWater(props.NdotH, roughness);\nfloat V = geometricOcclusionKelemen(props.LdotH);\nfloat diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\nfloat strengthSunHaze  = 1.2;\nfloat dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\nreturn ((dSun + dSunHaze) * V) * F;\n}\nvec3 tonemapACES(const vec3 x) {\nreturn (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n}`)):1!==n.pbrMode&&2!==n.pbrMode||(a.include(e),r.add(t`struct PBRShadingInfo\n{\nfloat NdotL;\nfloat NdotV;\nfloat NdotH;\nfloat VdotH;\nfloat LdotH;\nfloat NdotNG;\nfloat RdotNG;\nfloat NdotAmbDir;\nfloat NdotH_Horizon;\nvec3 skyRadianceToSurface;\nvec3 groundRadianceToSurface;\nvec3 skyIrradianceToSurface;\nvec3 groundIrradianceToSurface;\nfloat averageAmbientRadiance;\nfloat ssao;\nvec3 albedoLinear;\nvec3 f0;\nvec3 f90;\nvec3 diffuseColor;\nfloat metalness;\nfloat roughness;\n};`),r.add(t`float normalDistribution(float NdotH, float roughness)\n{\nfloat a = NdotH * roughness;\nfloat b = roughness / (1.0 - NdotH * NdotH + a * a);\nreturn b * b * INV_PI;\n}`),r.add(t`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\nconst vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\nconst vec2 c2 = vec2(-1.04, 1.04);\nvec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\nreturn c2 * a004 + r.zw;\n}`),r.add(t`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\nvec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\nvec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\nvec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\nvec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\nvec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\nvec3 specularComponent = specularColor * indirectSpecular;\nreturn (diffuseComponent + specularComponent);\n}`),r.add(t`float gamutMapChanel(float x, vec2 p){\nreturn (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n}`),r.add(t`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\nvec3 outColor;\nvec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\noutColor.x = gamutMapChanel(inColor.x, p) ;\noutColor.y = gamutMapChanel(inColor.y, p) ;\noutColor.z = gamutMapChanel(inColor.z, p) ;\nreturn outColor;\n}`))}export{a as PhysicallyBasedRendering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";const t=e(0,.6,.2);function r(e,t){const r=e.fragment,a=t.hasMetalnessAndRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture;1===t.pbrMode&&a&&e.include(s,t),2!==t.pbrMode?(0===t.pbrMode&&r.code.add(o`float getBakedOcclusion() { return 1.0; }`),1===t.pbrMode&&(r.uniforms.add(\"emissionFactor\",\"vec3\"),r.uniforms.add(\"mrrFactors\",\"vec3\"),r.code.add(o`vec3 mrr;\nvec3 emission;\nfloat occlusion;`),t.hasMetalnessAndRoughnessTexture&&(r.uniforms.add(\"texMetallicRoughness\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texMetallicRoughnessSize\",\"vec2\"),r.code.add(o`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),t.hasEmissionTexture&&(r.uniforms.add(\"texEmission\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texEmissionSize\",\"vec2\"),r.code.add(o`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),t.hasOcclusionTexture?(r.uniforms.add(\"texOcclusion\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texOcclusionSize\",\"vec2\"),r.code.add(o`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):r.code.add(o`float getBakedOcclusion() { return 1.0; }`),r.code.add(o`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${a?\"vtc.uv = vuv0;\":\"\"}\n      ${t.hasMetalnessAndRoughnessTexture?t.supportsTextureAtlas?\"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);\":\"applyMetallnessAndRoughness(vtc);\":\"\"}\n      ${t.hasEmissionTexture?t.supportsTextureAtlas?\"vtc.size = texEmissionSize; applyEmission(vtc);\":\"applyEmission(vtc);\":\"\"}\n      ${t.hasOcclusionTexture?t.supportsTextureAtlas?\"vtc.size = texOcclusionSize; applyOcclusion(vtc);\":\"applyOcclusion(vtc);\":\"\"}\n    }\n  `))):r.code.add(o`const vec3 mrr = vec3(0.0, 0.6, 0.2);\nconst vec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}function a(e,s,o=!1){o||(e.setUniform3fv(\"mrrFactors\",s.mrrFactors),e.setUniform3fv(\"emissionFactor\",s.emissiveFactor))}export{t as PBRSchematicMRRValues,r as PhysicallyBasedRenderingParameters,a as bindPBRUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function t(t){t.vertex.code.add(o`const float PI = 3.141592653589793;`),t.fragment.code.add(o`const float PI = 3.141592653589793;\nconst float LIGHT_NORMALIZATION = 1.0 / PI;\nconst float INV_PI = 0.3183098861837907;\nconst float HALF_PI = 1.570796326794897;`)}export{t as PiUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{RgbaFloatEncoding as a}from\"../util/RgbaFloatEncoding.glsl.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.fragment.include(a),t.fragment.uniforms.add(\"uShadowMapTex\",\"sampler2D\"),t.fragment.uniforms.add(\"uShadowMapNum\",\"int\"),t.fragment.uniforms.add(\"uShadowMapDistance\",\"vec4\"),t.fragment.uniforms.add(\"uShadowMapMatrix\",\"mat4\",4),t.fragment.uniforms.add(\"uDepthHalfPixelSz\",\"float\"),t.fragment.code.add(e`int chooseCascade(float _linearDepth, out mat4 mat) {\nvec4 distance = uShadowMapDistance;\nfloat depth = _linearDepth;\nint i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\nmat = i == 0 ? uShadowMapMatrix[0] : i == 1 ? uShadowMapMatrix[1] : i == 2 ? uShadowMapMatrix[2] : uShadowMapMatrix[3];\nreturn i;\n}\nvec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\nvec4 lv = mat * vec4(_vpos, 1.0);\nlv.xy /= lv.w;\nreturn 0.5 * lv.xyz + vec3(0.5);\n}\nvec2 cascadeCoordinates(int i, vec3 lvpos) {\nreturn vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;\n}\nfloat readShadowMapDepth(vec2 uv, sampler2D _depthTex) {\nreturn rgba2float(texture2D(_depthTex, uv));\n}\nfloat posIsInShadow(vec2 uv, vec3 lvpos, sampler2D _depthTex) {\nreturn readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;\n}\nfloat filterShadow(vec2 uv, vec3 lvpos, float halfPixelSize, sampler2D _depthTex) {\nfloat texSize = 0.5 / halfPixelSize;\nvec2 st = fract((vec2(halfPixelSize) + uv) * texSize);\nfloat s00 = posIsInShadow(uv + vec2(-halfPixelSize, -halfPixelSize), lvpos, _depthTex);\nfloat s10 = posIsInShadow(uv + vec2(halfPixelSize, -halfPixelSize), lvpos, _depthTex);\nfloat s11 = posIsInShadow(uv + vec2(halfPixelSize, halfPixelSize), lvpos, _depthTex);\nfloat s01 = posIsInShadow(uv + vec2(-halfPixelSize, halfPixelSize), lvpos, _depthTex);\nreturn mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}\nfloat readShadowMap(const in vec3 _vpos, float _linearDepth) {\nmat4 mat;\nint i = chooseCascade(_linearDepth, mat);\nif (i >= uShadowMapNum) { return 0.0; }\nvec3 lvpos = lightSpacePosition(_vpos, mat);\nif (lvpos.z >= 1.0) { return 0.0; }\nif (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\nvec2 uv = cascadeCoordinates(i, lvpos);\nreturn filterShadow(uv, lvpos, uDepthHalfPixelSz, uShadowMapTex);\n}`)}function o(a,e){e.shadowMappingEnabled&&(e.shadowMap.bind(a),e.shadowMap.bindView(a,e.origin))}function i(a,e,t){e.shadowMappingEnabled&&e.shadowMap.bindView(a,t)}function l(a,e){e.shadowMappingEnabled&&e.shadowMap.bindView(a,e.origin)}export{t as ReadShadowMap,o as bindReadShadowMapUniforms,l as bindReadShadowMapView,i as bindReadShadowMapViewCustomOrigin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as v}from\"../../shaderModules/interfaces.js\";function e(e,o){o.vvInstancingEnabled&&(o.vvSize||o.vvColor)&&e.attributes.add(\"instanceFeatureAttribute\",\"vec4\"),o.vvSize?(e.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),e.vertex.uniforms.add(\"vvSymbolRotationMatrix\",\"mat3\"),e.vertex.uniforms.add(\"vvSymbolAnchor\",\"vec3\"),e.vertex.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`),e.vertex.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),o.vvColor?(e.vertex.constants.add(\"vvColorNumber\",\"int\",8),e.vertex.code.add(v`\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`vec4 vvColor() { return vec4(1.0); }`)}function o(v,e){e.vvSizeEnabled&&(v.setUniform3fv(\"vvSizeMinSize\",e.vvSizeMinSize),v.setUniform3fv(\"vvSizeMaxSize\",e.vvSizeMaxSize),v.setUniform3fv(\"vvSizeOffset\",e.vvSizeOffset),v.setUniform3fv(\"vvSizeFactor\",e.vvSizeFactor)),e.vvColorEnabled&&(v.setUniform1fv(\"vvColorValues\",e.vvColorValues),v.setUniform4fv(\"vvColorColors\",e.vvColorColors))}function r(v,e){o(v,e),e.vvOpacityEnabled&&(v.setUniform1fv(\"vvOpacityValues\",e.vvOpacityValues),v.setUniform1fv(\"vvOpacityOpacities\",e.vvOpacityOpacities))}function t(v,e){o(v,e),e.vvSizeEnabled&&(v.setUniform3fv(\"vvSymbolAnchor\",e.vvSymbolAnchor),v.setUniformMatrix3fv(\"vvSymbolRotationMatrix\",e.vvSymbolRotationMatrix))}export{e as VisualVariables,o as bindVisualVariablesUniforms,t as bindVisualVariablesUniformsForSymbols,r as bindVisualVariablesUniformsWithOpacity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";const d=.1,o=.001;function r(d,r){const e=d.fragment;switch(r.alphaDiscardMode){case 0:e.code.add(a`\n        #define discardOrAdjustAlpha(color) { if (color.a < ${a.float(o)}) { discard; } }\n      `);break;case 1:e.code.add(a`void discardOrAdjustAlpha(inout vec4 color) {\ncolor.a = 1.0;\n}`);break;case 2:e.uniforms.add(\"textureAlphaCutoff\",\"float\"),e.code.add(a`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case 3:d.fragment.uniforms.add(\"textureAlphaCutoff\",\"float\"),d.fragment.code.add(a`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}export{r as DiscardOrAdjustAlpha,d as defaultMaskAlphaCutoff,o as symbolAlphaCutoff};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as c}from\"../../shaderModules/interfaces.js\";function e(e){e.code.add(c`vec4 premultiplyAlpha(vec4 v) {\nreturn vec4(v.rgb * v.a, v.a);\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nfloat rgb2v(vec3 c) {\nreturn max(c.x, max(c.y, c.z));\n}`)}export{e as ColorConversion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){const d=e`vec3 decodeNormal(vec2 f) {\nfloat z = 1.0 - abs(f.x) - abs(f.y);\nreturn vec3(f + sign(f) * min(z, 0.0), z);\n}`;o.fragment.code.add(d),o.vertex.code.add(d)}export{o as DecodeNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/has.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";import{testWebGLDriver as i}from\"../../../lib/WebGLDriverTest.js\";function r({code:e},i){i.doublePrecisionRequiresObfuscation?e.add(c`vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}`):e.add(c`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}`)}function o(c){return!!e(\"force-double-precision-obfuscation\")||i(c).doublePrecisionRequiresObfuscation}export{r as DoublePrecision,o as doublePrecisionRequiresObfuscation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";import{webglValidateShadersEnabled as e}from\"../../../../../webgl/checkWebGLError.js\";function u(u,o){const r=t`\n  /*\n  *  ${o.name}\n  *  ${0===o.output?\"RenderOutput: Color\":1===o.output?\"RenderOutput: Depth\":3===o.output?\"RenderOutput: Shadow\":2===o.output?\"RenderOutput: Normal\":4===o.output?\"RenderOutput: Highlight\":\"\"}\n  */\n  `;e()&&(u.fragment.code.add(r),u.vertex.code.add(r))}export{u as HeaderComment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ColorConversion as e}from\"./ColorConversion.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function i(i){i.include(e),i.code.add(t`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${t.int(1)}) {\n        return allMixed;\n      }\n      else if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalColor;\n      }\n      else {\n        // tint (or something invalid)\n        float vIn = rgb2v(internalMixed);\n        vec3 hsvTint = rgb2hsv(externalColor);\n        vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n        return hsv2rgb(hsvOut);\n      }\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalOpacity;\n      }\n      else {\n        // multiply or tint (or something invalid)\n        return allMixed;\n      }\n    }\n  `)}export{i as MixExternalColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function a(a){a.code.add(o`const float MAX_RGBA_FLOAT =\n255.0 / 256.0 +\n255.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\nvec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\nconst float toU8AsFloat = 1.0 / 255.0;\nreturn fixedPointU8 * toU8AsFloat;\n}\nconst vec4 RGBA_2_FLOAT_FACTORS = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, RGBA_2_FLOAT_FACTORS);\n}`)}export{a as RgbaFloatEncoding};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{bindScreenSizePerspective as a}from\"../../../materials/internal/MaterialUtil.js\";function r(a){a.vertex.code.add(e`float screenSizePerspectiveMinSize(float size, vec4 factor) {\nfloat nonZeroSize = 1.0 - step(size, 0.0);\nreturn (\nfactor.z * (\n1.0 +\nnonZeroSize *\n2.0 * factor.w / (\nsize + (1.0 - nonZeroSize)\n)\n)\n);\n}`),a.vertex.code.add(e`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\nreturn absCosAngle * absCosAngle * absCosAngle;\n}`),a.vertex.code.add(e`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\nreturn vec4(\nmin(params.x / (distanceToCamera - params.y), 1.0),\nscreenSizePerspectiveViewAngleDependentFactor(absCosAngle),\nparams.z,\nparams.w\n);\n}`),a.vertex.code.add(e`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\nreturn max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}`),a.vertex.code.add(e`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorFloat(\nsize,\nscreenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n);\n}`),a.vertex.code.add(e`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\nreturn mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n}`),a.vertex.code.add(e`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}`)}function c(e,r){if(r.screenSizePerspective){a(r.screenSizePerspective,e,\"screenSizePerspective\");const c=r.screenSizePerspectiveAlignment||r.screenSizePerspective;a(c,e,\"screenSizePerspectiveAlignment\")}}export{r as ScreenSizePerspective,c as bindScreenSizePerspectiveUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.extensions.add(\"GL_EXT_shader_texture_lod\"),t.extensions.add(\"GL_OES_standard_derivatives\"),t.fragment.code.add(e`#ifndef GL_EXT_shader_texture_lod\nfloat calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\nfloat deltaMaxSqr = max(dot(ddx, ddx), dot(ddy, ddy));\nreturn max(0.0, 0.5 * log2(deltaMaxSqr));\n}\n#endif\nvec4 textureAtlasLookup(sampler2D texture, vec2 textureSize, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DGradEXT(texture, uvAtlas, dUVdx, dUVdy);\n#else\nvec2 dUVdxAuto = dFdx(uvAtlas);\nvec2 dUVdyAuto = dFdy(uvAtlas);\nfloat mipMapLevel = calcMipMapLevel(dUVdx * textureSize, dUVdy * textureSize);\nfloat autoMipMapLevel = calcMipMapLevel(dUVdxAuto * textureSize, dUVdyAuto * textureSize);\nreturn texture2D(texture, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}`)}export{t as TextureAtlasLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{t as i}from\"../../../../../../chunks/mat4.js\";import{c as n}from\"../../../../../../chunks/mat4f32.js\";function o(i,n,o){i.setUniform3f(\"camPos\",o[3]-n[0],o[7]-n[1],o[11]-n[2])}function t(i,n){i.setUniformMatrix4fv(\"proj\",n)}function r(i,n){i.setUniform2fv(\"nearFar\",n)}function f(n,o,t){i(c,t,o),n.setUniform3fv(\"localOrigin\",o),n.setUniformMatrix4fv(\"view\",c)}function a(i,n){f(i,n.origin,n.camera.viewMatrix)}function m(i,n){i.setUniform4fv(\"viewport\",n.camera.fullViewport)}const c=n();export{o as bindCameraPosition,r as bindNearFar,t as bindProjectionMatrix,a as bindView,f as bindViewCustomOrigin,m as bindViewport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";const t=e.getLogger(\"esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder\");class r{constructor(){this.includedModules=new Map}include(e,r){this.includedModules.has(e)?this.includedModules.get(e)!==r&&t.error(\"Trying to include shader module multiple times with different sets of options.\"):(this.includedModules.set(e,r),e(this.builder,r))}}class n extends r{constructor(){super(...arguments),this.vertex=new o,this.fragment=new o,this.attributes=new a,this.varyings=new c,this.extensions=new u,this.constants=new h}get fragmentUniforms(){return this.fragment.uniforms}get builder(){return this}generateSource(e){const t=this.extensions.generateSource(e),r=this.attributes.generateSource(e),n=this.varyings.generateSource(),s=\"vertex\"===e?this.vertex:this.fragment,i=s.uniforms.generateSource(),o=s.code.generateSource(),a=\"vertex\"===e?l:m,c=this.constants.generateSource().concat(s.constants.generateSource());return`\\n${t.join(\"\\n\")}\\n\\n${a}\\n\\n${c.join(\"\\n\")}\\n\\n${i.join(\"\\n\")}\\n\\n${r.join(\"\\n\")}\\n\\n${n.join(\"\\n\")}\\n\\n${o.join(\"\\n\")}`}}class s{constructor(){this._entries=new Map}add(e,t,r){const n=`${e}_${t}_${r}`;return this._entries.set(n,{name:e,type:t,arraySize:r}),this}generateSource(){const e=e=>e?`[${e}]`:\"\";return Array.from(this._entries.values()).map((t=>`uniform ${t.type} ${t.name}${e(t.arraySize)};`))}get entries(){return Array.from(this._entries.values())}}class i{constructor(){this._entries=new Array}add(e){this._entries.push(e)}generateSource(){return this._entries}}class o extends r{constructor(){super(...arguments),this.uniforms=new s,this.code=new i,this.constants=new h}get builder(){return this}}class a{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return\"fragment\"===e?[]:this._entries.map((e=>`attribute ${e[1]} ${e[0]};`))}}class c{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(){return this._entries.map((e=>`varying ${e[1]} ${e[0]};`))}}class u{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t=\"vertex\"===e?u.ALLOWLIST_VERTEX:u.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}u.ALLOWLIST_FRAGMENT=[\"GL_EXT_shader_texture_lod\",\"GL_OES_standard_derivatives\"],u.ALLOWLIST_VERTEX=[];class h{constructor(){this._entries=[]}add(e,t,r){let n=\"ERROR_CONSTRUCTOR_STRING\";switch(t){case\"float\":n=h.numberToFloatStr(r);break;case\"int\":n=h.numberToIntStr(r);break;case\"bool\":n=r.toString();break;case\"vec2\":n=`vec2(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])})`;break;case\"vec3\":n=`vec3(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])},                            ${h.numberToFloatStr(r[2])})`;break;case\"vec4\":n=`vec4(${h.numberToFloatStr(r[0])},                            ${h.numberToFloatStr(r[1])},                            ${h.numberToFloatStr(r[2])},                            ${h.numberToFloatStr(r[3])})`;break;case\"ivec2\":n=`ivec2(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])})`;break;case\"ivec3\":n=`ivec3(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])},                             ${h.numberToIntStr(r[2])})`;break;case\"ivec4\":n=`ivec4(${h.numberToIntStr(r[0])},                             ${h.numberToIntStr(r[1])},                             ${h.numberToIntStr(r[2])},                             ${h.numberToIntStr(r[3])})`;break;case\"mat2\":case\"mat3\":case\"mat4\":n=`${t}(${Array.prototype.map.call(r,(e=>h.numberToFloatStr(e))).join(\", \")})`}return this._entries.push(`const ${t} ${e} = ${n};`),this}static numberToIntStr(e){return e.toFixed(0)}static numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const m=\"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n  precision highp sampler2D;\\n#else\\n  precision mediump float;\\n  precision mediump sampler2D;\\n#endif\",l=\"precision highp float;\\nprecision highp sampler2D;\";export{i as Code,r as Includes,n as ShaderBuilder,o as Stage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,...n){let o=\"\";for(let r=0;r<n.length;r++)o+=t[r]+n[r];return o+=t[t.length-1],o}!function(t){function n(t){return Math.round(t).toString()}function o(t){return t.toPrecision(8)}t.int=n,t.float=o}(t||(t={}));export{t as glsl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass t{constructor(t,o){this._module=t,this._loadModule=o}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}export{t as ReloadableShaderModule};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as i}from\"../../../../../core/maybe.js\";class t{constructor(i,t,e=(()=>this.dispose())){this.release=e,t&&(this._config=t.snapshot()),this._program=this.initializeProgram(i),this._pipeline=this.initializePipeline(i)}dispose(){this._program=i(this._program),this._pipeline=this._config=null}reload(t){i(this._program),this._program=this.initializeProgram(t)}get program(){return this._program}get pipeline(){return this._pipeline}get key(){return this._config.key}get configuration(){return this._config}bindPass(i,t){}bindMaterial(i,t){}bindDraw(i,t,e){}bindPipelineState(i){i.setPipelineState(this.pipeline)}ensureAttributeLocations(i){this.program.assertCompatibleVertexAttributeLocations(i)}get primitiveType(){return 4}}export{t as ShaderTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{log2 as t}from\"../../../../../core/mathUtils.js\";class e{constructor(){this._key=\"\",this._keyDirty=!1,this._parameterBits=this._parameterBits.map((()=>0))}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const t=this._parameterNames,e={key:this.key};for(const r of t)e[r]=this[r];return e}}function r(e={}){return(r,s)=>{var a,i;r._parameterNames=null!=(a=r._parameterNames)?a:[],r._parameterNames.push(s);const o=r._parameterNames.length-1,h=e.count||2,n=Math.ceil(t(h)),m=null!=(i=r._parameterBits)?i:[0];let p=0;for(;m[p]+n>16;)p++,p>=m.length&&m.push(0);r._parameterBits=m;const y=m[p],_=(1<<n)-1<<y;m[p]+=n,Object.defineProperty(r,s,{get(){return this[o]},set(t){if(this[o]!==t&&(this[o]=t,this._keyDirty=!0,this._parameterBits[p]=this._parameterBits[p]&~_|+t<<y&_,\"number\"!=typeof t&&\"boolean\"!=typeof t))throw\"Configuration value for \"+s+\" must be boolean or number, got \"+typeof t}})}}export{e as ShaderTechniqueConfiguration,r as parameter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst s=s=>{class e extends s{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(const e of null!=(s=this._managedDisposables)?s:[]){var s;const i=this[e];this[e]=null,i&&\"function\"==typeof i.dispose&&i.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}}return e};class e extends(s(class{})){}function i(){return(s,e)=>{var i,o;s.hasOwnProperty(\"_managedDisposables\")||(s._managedDisposables=null!=(i=null==(o=s._managedDisposables)?void 0:o.slice())?i:[]);s._managedDisposables.unshift(e)}}export{e as AutoDisposable,s as AutoDisposableMixin,i as autoDispose};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{getBasisTranscoder as t}from\"../../../../libs/basisu/BasisU.js\";import n from\"../../../webgl/Texture.js\";import{getBytesPerElementFormat as r}from\"../../../webgl/Util.js\";let s=null,i=null;async function a(){return e(i)&&(i=t(),s=await i),i}function o(t,n){if(e(s))return t.byteLength;const r=new s.BasisFile(new Uint8Array(t)),i=c(r)?l(r.getNumLevels(0),r.getHasAlpha(),r.getImageWidth(0,0),r.getImageHeight(0,0),n):0;return r.close(),r.delete(),i}function g(t,n){if(e(s))return t.byteLength;const r=new s.KTX2File(new Uint8Array(t)),i=u(r)?l(r.getLevels(),r.getHasAlpha(),r.getWidth(),r.getHeight(),n):0;return r.close(),r.delete(),i}function l(e,t,n,s,i){const a=r(t?37496:37492),o=i&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(n*s*a*o)}function c(e){return e.getNumImages()>=1&&!e.isUASTC()}function u(e){return e.getFaces()>=1&&e.isETC1S()}async function m(t,n,r){e(s)&&(s=await a());const i=new s.BasisFile(new Uint8Array(r));if(!c(i))return null;i.startTranscoding();const o=d(t,n,i.getNumLevels(0),i.getHasAlpha(),i.getImageWidth(0,0),i.getImageHeight(0,0),((e,t)=>i.getImageTranscodedSizeInBytes(0,e,t)),((e,t,n)=>i.transcodeImage(n,0,e,t,0,0)));return i.close(),i.delete(),o}async function h(t,n,r){e(s)&&(s=await a());const i=new s.KTX2File(new Uint8Array(r));if(!u(i))return null;i.startTranscoding();const o=d(t,n,i.getLevels(),i.getHasAlpha(),i.getWidth(),i.getHeight(),((e,t)=>i.getImageTranscodedSizeInBytes(e,0,0,t)),((e,t,n)=>i.transcodeImage(n,e,0,0,t,0,-1,-1)));return i.close(),i.delete(),o}function d(e,t,r,s,i,a,o,g){const{compressedTextureETC:l,compressedTextureS3TC:c}=e.capabilities,[u,m]=l?s?[1,37496]:[0,37492]:c?s?[3,33779]:[2,33776]:[13,6408],h=t.hasMipmap?r:Math.min(1,r),d=[];for(let n=0;n<h;n++)d.push(new Uint8Array(o(n,u))),g(n,u,d[n]);const p=d.length>1,f=p?9987:9729,w={...t,samplingMode:f,hasMipmap:p,internalFormat:m,width:i,height:a};return new n(e,w,{type:\"compressed\",levels:d})}export{m as createTextureBasis,h as createTextureKTX2,o as estimateMemoryBasis,g as estimateMemoryKTX2,a as loadBasis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport i from\"../../../../core/PooledArray.js\";import{e as t,h as s}from\"../../../../chunks/vec3.js\";import{c as e,f as n,a as r}from\"../../../../chunks/vec3f64.js\";import{assert as h}from\"./Util.js\";class a{constructor(i,s,a,c){this.primitiveIndices=i,this._numIndexPerPrimitive=s,this.indices=a,this.position=c,this.center=e(),h(i.length>=1),h(a.length%this._numIndexPerPrimitive==0),h(a.length>=i.length*this._numIndexPerPrimitive),h(3===c.size||4===c.size);const{data:o,size:M}=c,d=i.length;let l=M*a[this._numIndexPerPrimitive*i[0]];b.clear(),b.push(l),this.bbMin=n(o[l],o[l+1],o[l+2]),this.bbMax=r(this.bbMin);for(let t=0;t<d;++t){const s=this._numIndexPerPrimitive*i[t];for(let i=0;i<this._numIndexPerPrimitive;++i){l=M*a[s+i],b.push(l);let t=o[l];this.bbMin[0]=Math.min(t,this.bbMin[0]),this.bbMax[0]=Math.max(t,this.bbMax[0]),t=o[l+1],this.bbMin[1]=Math.min(t,this.bbMin[1]),this.bbMax[1]=Math.max(t,this.bbMax[1]),t=o[l+2],this.bbMin[2]=Math.min(t,this.bbMin[2]),this.bbMax[2]=Math.max(t,this.bbMax[2])}}t(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let m=this.radius*this.radius;for(let t=0;t<b.length;++t){l=b.getItemAt(t);const i=o[l]-this.center[0],s=o[l+1]-this.center[1],e=o[l+2]-this.center[2],n=i*i+s*s+e*e;if(n<=m)continue;const r=Math.sqrt(n),h=.5*(r-this.radius);this.radius=this.radius+h,m=this.radius*this.radius;const a=h/r;this.center[0]+=i*a,this.center[1]+=s*a,this.center[2]+=e*a}b.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if(s(this.bbMin,this.bbMax)>1){const i=t(e(),this.bbMin,this.bbMax,.5),s=this.primitiveIndices.length,n=new Uint8Array(s),r=new Array(8);for(let t=0;t<8;++t)r[t]=0;const{data:h,size:b}=this.position;for(let t=0;t<s;++t){let s=0;const e=this._numIndexPerPrimitive*this.primitiveIndices[t];let a=b*this.indices[e],c=h[a],o=h[a+1],M=h[a+2];for(let i=1;i<this._numIndexPerPrimitive;++i){a=b*this.indices[e+i];const t=h[a],s=h[a+1],n=h[a+2];t<c&&(c=t),s<o&&(o=s),n<M&&(M=n)}c<i[0]&&(s|=1),o<i[1]&&(s|=2),M<i[2]&&(s|=4),n[t]=s,++r[s]}let c=0;for(let t=0;t<8;++t)r[t]>0&&++c;if(c<2)return;const o=new Array(8);for(let t=0;t<8;++t)o[t]=r[t]>0?new Uint32Array(r[t]):void 0;for(let t=0;t<8;++t)r[t]=0;for(let t=0;t<s;++t){const i=n[t];o[i][r[i]++]=this.primitiveIndices[t]}this._children=new Array(8);for(let t=0;t<8;++t)void 0!==o[t]&&(this._children[t]=new a(o[t],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){b.prune()}}const b=new i({deallocator:null});export{a as BoundingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{generateUID as o}from\"../../../../core/uid.js\";class r{constructor(){this.id=o()}unload(){}}export{r as ContentObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isPowerOfTwo as t}from\"../../../../core/mathUtils.js\";import r from\"../../../webgl/Texture.js\";const n=e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),o=542327876,a=131072,i=4;function s(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function l(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const u=s(\"DXT1\"),c=s(\"DXT3\"),m=s(\"DXT5\"),h=31,p=0,d=1,g=2,f=3,w=4,C=7,x=20,D=21;function b(e,t,n){const{textureData:o,internalFormat:a,width:i,height:s}=A(n,t.hasMipmap);return t.samplingMode=o.levels.length>1?9987:9729,t.hasMipmap=o.levels.length>1,t.internalFormat=a,t.width=i,t.height=s,new r(e,t,o)}function A(e,r){const s=new Int32Array(e,0,h);if(s[p]!==o)return n.error(\"Invalid magic number in DDS header\"),null;if(!(s[x]&i))return n.error(\"Unsupported format, must contain a FourCC code\"),null;const b=s[D];let A,M;switch(b){case u:A=8,M=33776;break;case c:A=16,M=33778;break;case m:A=16,M=33779;break;default:return n.error(\"Unsupported FourCC code:\",l(b)),null}let v=1,F=s[w],U=s[f];0==(3&F)&&0==(3&U)||(n.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),F=F+3&-4,U=U+3&-4);const T=F,j=U;let k,y;s[g]&a&&!1!==r&&(v=Math.max(1,s[C])),1===v||t(F)&&t(U)||(n.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"),v=1);let I=s[d]+4;const S=[];for(let t=0;t<v;++t)y=(F+3>>2)*(U+3>>2)*A,k=new Uint8Array(e,I,y),S.push(k),I+=y,F=Math.max(1,F>>1),U=Math.max(1,U>>1);return{textureData:{type:\"compressed\",levels:S},internalFormat:M,width:T,height:j}}export{b as createDDSTexture,A as createDDSTextureData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst o=new Map([[\"position\",0],[\"normal\",1],[\"uv0\",2],[\"color\",3],[\"size\",4],[\"tangent\",4],[\"auxpos1\",5],[\"symbolColor\",5],[\"auxpos2\",6],[\"featureAttribute\",6],[\"instanceFeatureAttribute\",6],[\"instanceColor\",7],[\"model\",8],[\"modelNormal\",12],[\"modelOriginHi\",11],[\"modelOriginLo\",15]]);export{o as Default3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst e=[{name:\"position\",count:3,type:5126,offset:0,stride:12,normalized:!1}],t=[{name:\"position\",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:\"uv0\",count:2,type:5126,offset:12,stride:20,normalized:!1}],o=[{name:\"position\",count:3,type:5126,offset:0,stride:32,normalized:!1},{name:\"normal\",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:\"uv0\",count:2,type:5126,offset:24,stride:32,normalized:!1}],n=[{name:\"position\",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:\"color\",count:4,type:5121,offset:12,stride:16,normalized:!1}],i=[{name:\"position\",count:2,type:5126,offset:0,stride:8,normalized:!1}],s=[{name:\"position\",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:\"uv0\",count:2,type:5126,offset:8,stride:16,normalized:!1}];export{i as Pos2,s as Pos2Tex,e as Pos3,n as Pos3Col,o as Pos3NormalTex,t as Pos3Tex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{AutoDisposable as e}from\"./AutoDisposable.js\";class t extends e{constructor(e){super(),this._material=e.material,this._techniqueRep=e.techniqueRep,this._output=e.output}get technique(){return this._technique}getPipelineState(e,t){return this.technique.pipeline}ensureResources(e){return 2}ensureParameters(e){}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import r from\"./GLMaterial.js\";class i extends r{constructor(e){super(e),this._textureIDs=new Set,this._textureRepository=e.textureRep,this._textureId=e.textureId,this._initTransparent=!!e.initTextureTransparent,this._texture=this._acquire(this._textureId),this._textureNormal=this._acquire(e.normalTextureId),this._textureEmissive=this._acquire(e.emissiveTextureId),this._textureOcclusion=this._acquire(e.occlusionTextureId),this._textureMetallicRoughness=this._acquire(e.metallicRoughnessTextureId)}dispose(){this._textureIDs.forEach((e=>this._textureRepository.release(e))),this._textureIDs.clear()}updateTexture(e){e!==this._textureId&&(this._release(this._textureId),this._textureId=e,this._texture=this._acquire(this._textureId))}bindTextures(t){e(this._texture)&&t.bindTexture(this._texture.glTexture,\"tex\"),e(this._textureNormal)&&t.bindTexture(this._textureNormal.glTexture,\"normalTexture\"),e(this._textureEmissive)&&t.bindTexture(this._textureEmissive.glTexture,\"texEmission\"),e(this._textureOcclusion)&&t.bindTexture(this._textureOcclusion.glTexture,\"texOcclusion\"),e(this._textureMetallicRoughness)&&t.bindTexture(this._textureMetallicRoughness.glTexture,\"texMetallicRoughness\")}bindTextureScale(t){const r=e(this._texture)&&this._texture.glTexture;r&&r.descriptor.textureCoordinateScaleFactor?t.setUniform2fv(\"textureCoordinateScaleFactor\",r.descriptor.textureCoordinateScaleFactor):t.setUniform2f(\"textureCoordinateScaleFactor\",1,1)}_acquire(e){if(!t(e))return this._textureIDs.add(e),this._textureRepository.acquire(e,this._initTransparent)}_release(e){t(e)||(this._textureIDs.delete(e),this._textureRepository.release(e))}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../core/maybe.js\";import{BoundingInfo as e}from\"./BoundingInfo.js\";import{ContentObject as i}from\"./ContentObject.js\";import{generateDefaultIndexArray as n,computeAttachmentOriginTriangles as s,computeAttachmentOriginPoints as r}from\"./geometryDataUtils.js\";import{assert as o}from\"./Util.js\";class u extends i{constructor(t,e=[],i=0,s=-1){super(),this._primitiveType=i,this.edgeIndicesLength=s,this.type=2,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[n,r]of t)r&&this._vertexAttributes.set(n,{...r});if(null==e||0===e.length){const t=h(this._vertexAttributes),e=n(t);this.edgeIndicesLength=this.edgeIndicesLength<0?t:this.edgeIndicesLength;for(const i of this._vertexAttributes.keys())this._indices.set(i,e)}else for(const[n,r]of e)r&&(this._indices.set(n,g(r)),\"position\"===n&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(n).length:this.edgeIndicesLength))}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return t(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(t):this.computeAttachmentOriginPoints(t)}computeAttachmentOriginTriangles(t){const e=this.indices.get(\"position\"),i=this.vertexAttributes.get(\"position\");return s(i,e,t)}computeAttachmentOriginPoints(t){const e=this.indices.get(\"position\"),i=this.vertexAttributes.get(\"position\");return r(i,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get(\"position\");if(0===t.length)return null;const i=0===this.primitiveType?3:1;o(t.length%i==0,\"Indexing error: \"+t.length+\" not divisible by \"+i);const s=n(t.length/i),r=this.vertexAttributes.get(\"position\");return new e(s,i,t,r)}}function h(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}function g(t){if(t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return t;for(const e of t)if(e>=65536)return t;return new Uint16Array(t)}export{u as Geometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{ContentObject as r}from\"./ContentObject.js\";import{Default3D as t}from\"./DefaultVertexAttributeLocations.js\";import{copyParameters as i,updateParameters as s}from\"../materials/internal/MaterialUtil.js\";class a extends r{constructor(e,r){super(),this.type=3,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=t,this._params=i(e,r),this.validateParameterValues(this._params)}dispose(){}get params(){return this._params}update(e){return!1}setParameterValues(e){s(this._params,e)&&(this.validateParameterValues(this._params),this.parametersChanged())}validateParameterValues(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.parametersChanged())}isVisibleInPass(e){return!0}get renderOccluded(){return this.params.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(e){e!==this._renderPriority&&(this._renderPriority=e,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(e){e!==this._insertOrder&&(this._insertOrder=e,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){e(this.materialRepository)&&this.materialRepository.materialChanged(this)}}function n(e,r){return e.isVisible()&&e.isVisibleInPass(r.pass)&&0!=(e.renderOccluded&r.renderOccludedMask)}const d={renderOccluded:1};export{a as Material,d as materialParametersDefaults,n as materialPredicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{separateBlendingParams as n,simpleBlendingParams as t,defaultDepthWriteParams as r}from\"../../../webgl/renderState.js\";const u=n(770,1,771,771),e=t(1,1),o=t(0,771);function c(n){return 2===n?null:1===n?o:e}function l(n){return 2===n?r:null}const f=5e5,i={factor:-1,units:-2};function s(n){return n?i:null}function a(n){return 3===n||2===n?513:515}export{c as OITBlending,a as OITDepthTest,l as OITDepthWrite,i as OITPolygonOffset,f as OITPolygonOffsetLimit,o as blendingAlpha,e as blendingColor,u as blendingDefault,s as getOITPolygonOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../core/maybe.js\";import r from\"../../../../core/PooledArray.js\";import{webglDebugEnabled as s}from\"../../../webgl/checkWebGLError.js\";import{Program as i}from\"../../../webgl/Program.js\";class n extends i{constructor(e,t,i){super(e,t.generateSource(\"vertex\"),t.generateSource(\"fragment\"),i),this._textures=new Map,this._freeTextureUnits=new r({deallocator:null}),this._fragmentUniforms=s()?t.fragmentUniforms.entries:null}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(t,r){if(e(t)||null==t.glName){const e=this._textures.get(r);return e&&(this._context.bindTexture(null,e.unit),this._freeTextureUnit(e),this._textures.delete(r)),null}let s=this._textures.get(r);return null==s?(s=this._allocTextureUnit(t),this._textures.set(r,s)):s.texture=t,this._context.useProgram(this),this.setUniform1i(r,s.unit),this._context.bindTexture(t,s.unit),s.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach(((e,t)=>{this._context.bindTexture(e.texture,e.unit),this.setUniform1i(t,e.unit)})),t(this._fragmentUniforms)&&this._fragmentUniforms.forEach((e=>{if((\"sampler2D\"===e.type||\"samplerCube\"===e.type)&&!this._textures.has(e.name))throw new Error(`Texture sampler ${e.name} has no bound texture`)}))}_allocTextureUnit(e){return{texture:e,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(e){this._freeTextureUnits.push(e.unit)}}export{n as Program};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst a={func:513},n={func:519},f={mask:255},i={mask:0},s=a=>({function:{func:517,ref:a,mask:a},operation:{fail:7680,zFail:7680,zPass:7680}}),o=a=>({function:{func:519,ref:a,mask:a},operation:{fail:7680,zFail:7680,zPass:7681}}),c={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},t={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},u={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},e={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};export{n as depthCompareAlways,a as depthCompareLess,s as renderWhenBitIsNotSet,o as replaceBitWhenDepthTestPasses,c as stencilBaseAllZerosParams,t as stencilToolMaskBaseParams,u as stencilToolMaskOccluderParams,e as stencilToolTransparentOccluderParams,i as stencilWriteMaskOff,f as stencilWriteMaskOn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../../core/compilerUtils.js\";import e from\"../../../../core/Error.js\";import r from\"../../../../core/Evented.js\";import{isPowerOfTwo as i,nextHighestPowerOfTwo as s}from\"../../../../core/mathUtils.js\";import{isNone as a,isSome as o}from\"../../../../core/maybe.js\";import{createAbortController as n,onAbort as m,createAbortError as h}from\"../../../../core/promiseUtils.js\";import{isArrayBuffer as l,isUint8Array as p}from\"../../../../core/typedArrayUtil.js\";import{isBlobProtocol as d,isDataProtocol as c}from\"../../../../core/urlUtils.js\";import{requestImage as u}from\"../../../../support/requestImageUtils.js\";import{loadImageAsync as g}from\"../../../../support/requestUtils.js\";import{estimateMemoryKTX2 as f,estimateMemoryBasis as w,createTextureKTX2 as T,createTextureBasis as x}from\"./BasisUtil.js\";import{ContentObject as D}from\"./ContentObject.js\";import{createDDSTexture as F}from\"./DDSUtil.js\";import{createQuadVAO as M}from\"./glUtil3D.js\";import{assert as y}from\"./Util.js\";import I from\"../../../webgl/FramebufferObject.js\";import E from\"../../../webgl/Texture.js\";import{vertexCount as O}from\"../../../webgl/Util.js\";import b from\"../../../webgl/capabilities/isWebGL2Context.js\";class S extends D{constructor(t,e){super(),this.data=t,this.type=4,this.glTexture=null,this.powerOfTwoStretchInfo=null,this.loadingPromise=null,this.loadingController=null,this.events=new r,this.params=e||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:10497,t:10497},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||1,this.estimatedTexMemRequired=S.estimateTexMemRequired(this.data,this.params),this.startPreload()}startPreload(){const t=this.data;a(t)||(t instanceof HTMLVideoElement?this.startPreloadVideoElement(t):t instanceof HTMLImageElement&&this.startPreloadImageElement(t))}startPreloadVideoElement(t){d(t.src)||\"auto\"===t.preload&&t.crossOrigin||(t.preload=\"auto\",t.crossOrigin=\"anonymous\",t.src=t.src)}startPreloadImageElement(t){c(t.src)||d(t.src)||t.crossOrigin||(t.crossOrigin=\"anonymous\",t.src=t.src)}static getDataDimensions(t){return t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t}static estimateTexMemRequired(t,e){if(a(t))return 0;if(l(t)||p(t))return e.encoding===S.KTX2_ENCODING?f(t,e.mipmap):e.encoding===S.BASIS_ENCODING?w(t,e.mipmap):t.byteLength;const{width:r,height:i}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?S.getDataDimensions(t):e;return(e.mipmap?4/3:1)*r*i*(e.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}createDescriptor(t){var e;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:null!=(e=this.params.maxAnisotropy)?e:this.params.mipmap?t.parameters.maxMaxAnisotropy:1}}load(t,e){if(o(this.glTexture))return this.glTexture;if(o(this.loadingPromise))return this.loadingPromise;const r=this.data;return a(r)?(this.glTexture=new E(t,this.createDescriptor(t),null),this.glTexture):\"string\"==typeof r?this.loadFromURL(t,e,r):r instanceof Image?this.loadFromImageElement(t,e,r):r instanceof HTMLVideoElement?this.loadFromVideoElement(t,e,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this.loadFromImage(t,r,e):(l(r)||p(r))&&this.params.encoding===S.DDS_ENCODING?this.loadFromDDSData(t,r):(l(r)||p(r))&&this.params.encoding===S.KTX2_ENCODING?this.loadFromKTX2(t,r):(l(r)||p(r))&&this.params.encoding===S.BASIS_ENCODING?this.loadFromBasis(t,r):p(r)?this.loadFromPixelData(t,r):l(r)?this.loadFromPixelData(t,new Uint8Array(r)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(t,e,r){if(!(this.data instanceof HTMLVideoElement)||a(this.glTexture))return r;if(this.data.readyState<2||r===this.data.currentTime)return r;if(o(this.powerOfTwoStretchInfo)){const{framebuffer:r,vao:i,sourceTexture:s}=this.powerOfTwoStretchInfo;s.setData(this.data),this.drawStretchedTexture(t,e,r,i,s,this.glTexture)}else{const{width:t,height:e}=this.data,{width:r,height:i}=this.glTexture.descriptor;t!==r||e!==i?this.glTexture.updateData(0,0,0,Math.min(t,r),Math.min(e,i),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}loadFromDDSData(t,e){return this.glTexture=F(t,this.createDescriptor(t),e),this.glTexture}loadFromKTX2(t,e){return this.loadAsync((()=>T(t,this.createDescriptor(t),e).then((t=>(this.glTexture=t,t)))))}loadFromBasis(t,e){return this.loadAsync((()=>x(t,this.createDescriptor(t),e).then((t=>(this.glTexture=t,t)))))}loadFromPixelData(t,e){y(this.params.width>0&&this.params.height>0);const r=this.createDescriptor(t);return r.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,r.width=this.params.width,r.height=this.params.height,this.glTexture=new E(t,r,e),this.glTexture}loadAsync(t){const e=n();this.loadingController=e;const r=t(e.signal);this.loadingPromise=r;const i=()=>{this.loadingController===e&&(this.loadingController=null),this.loadingPromise===r&&(this.loadingPromise=null)};return r.then(i,i),r}loadFromURL(t,e,r){return this.loadAsync((async i=>{const s=await u(r,{signal:i});return this.loadFromImage(t,s,e)}))}loadFromImageElement(t,e,r){return r.complete?this.loadFromImage(t,r,e):this.loadAsync((async i=>{const s=await g(r,r.src,!1,i);return this.loadFromImage(t,s,e)}))}loadFromVideoElement(t,e,r){return r.readyState>=2?this.loadFromImage(t,r,e):this.loadFromVideoElementAsync(t,e,r)}loadFromVideoElementAsync(t,r,i){return this.loadAsync((s=>new Promise(((a,n)=>{const l=()=>{i.removeEventListener(\"loadeddata\",p),i.removeEventListener(\"error\",d),o(c)&&c.remove()},p=()=>{i.readyState>=2&&(l(),a(this.loadFromImage(t,i,r)))},d=t=>{l(),n(t||new e(\"Failed to load video\"))};i.addEventListener(\"loadeddata\",p),i.addEventListener(\"error\",d);const c=m(s,(()=>d(h())))}))))}loadFromImage(t,e,r){const s=S.getDataDimensions(e);this.params.width=s.width,this.params.height=s.height;const a=this.createDescriptor(t);return a.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(t,a)||i(s.width)&&i(s.height)?(a.width=s.width,a.height=s.height,this.glTexture=new E(t,a,e),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(t,e,s,a,r),this.glTexture)}requiresPowerOfTwo(t,e){const r=33071,i=\"number\"==typeof e.wrapMode?e.wrapMode===r:e.wrapMode.s===r&&e.wrapMode.t===r;return!b(t.gl)&&(e.hasMipmap||!i)}makePowerOfTwoTexture(e,r,i,a,o){const{width:n,height:m}=i,h=s(n),l=s(m);let p;switch(a.width=h,a.height=l,this.params.powerOfTwoResizeMode){case 2:a.textureCoordinateScaleFactor=[n/h,m/l],p=new E(e,a),p.updateData(0,0,0,n,m,r);break;case 1:case null:case void 0:p=this.stretchToPowerOfTwo(e,r,a,o);break;default:t(this.params.powerOfTwoResizeMode)}return a.hasMipmap&&p.generateMipmap(),p}stretchToPowerOfTwo(t,e,r,i){const s=new E(t,r),a=new I(t,{colorTarget:0,depthStencilTarget:0},s),o=new E(t,{target:3553,pixelFormat:r.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},e),n=M(t);return this.drawStretchedTexture(t,i,a,n,o,s),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:n,sourceTexture:o,framebuffer:a}:(n.dispose(!0),o.dispose(),a.detachColorTexture(),t.bindFramebuffer(null),a.dispose()),s}drawStretchedTexture(t,e,r,i,s,a){t.bindFramebuffer(r);const o=t.getViewport();t.setViewport(0,0,a.descriptor.width,a.descriptor.height);const n=e.program;t.useProgram(n),n.setUniform4f(\"color\",1,1,1,1),n.bindTexture(s,\"tex\"),t.bindVAO(i),t.setPipelineState(e.pipeline),t.drawArrays(5,0,O(i,\"geometry\")),t.bindFramebuffer(null),t.setViewport(o.x,o.y,o.width,o.height)}unload(){if(o(this.powerOfTwoStretchInfo)){const{framebuffer:t,vao:e,sourceTexture:r}=this.powerOfTwoStretchInfo;e.dispose(!0),r.dispose(),t.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(o(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),o(this.loadingController)){const t=this.loadingController;this.loadingController=null,this.loadingPromise=null,t.abort()}this.events.emit(\"unloaded\")}}S.DDS_ENCODING=\"image/vnd-ms.dds\",S.KTX2_ENCODING=\"image/ktx2\",S.BASIS_ENCODING=\"image/x.basis\";export{S as Texture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as n}from\"../../../../core/maybe.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import o from\"../../../webgl/BufferObject.js\";import i from\"../../../webgl/FramebufferObject.js\";import{Program as r}from\"../../../webgl/Program.js\";import\"../../../webgl/enums.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/renderState.js\";import\"../../../webgl/Texture.js\";import s from\"../../../webgl/VertexArrayObject.js\";import{encodeDoubleArray as a}from\"./doublePrecisionUtils.js\";import{unpackFloatRGBA as c}from\"./Util.js\";import{testFloatBufferBlend as l}from\"../../../webgl/testFloatBufferBlend.js\";import{testSVGPremultipliedAlpha as u}from\"../../../webgl/testSVGPremultipliedAlpha.js\";class f{constructor(e){this.context=e,this.svgAlwaysPremultipliesAlpha=!1,this.floatBufferBlendWorking=!1,this._doublePrecisionRequiresObfuscation=null,this.floatBufferBlendWorking=l(e),u(e).then((e=>this.svgAlwaysPremultipliesAlpha=!e))}get doublePrecisionRequiresObfuscation(){if(e(this._doublePrecisionRequiresObfuscation)){const e=v(this.context,!1),n=v(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==e&&(0===n||e/n>5)}return this._doublePrecisionRequiresObfuscation}}let p=null;function h(n){return(e(p)||p.context!==n)&&(p=new f(n)),p}function m(e){n(p)&&p.context===e&&(p=null)}function v(e,n){const l=new i(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1});function u(t,o){const i=new r(e,`\\n\\n  precision highp float;\\n\\n  attribute vec2 position;\\n\\n  uniform vec3 u_highA;\\n  uniform vec3 u_lowA;\\n  uniform vec3 u_highB;\\n  uniform vec3 u_lowB;\\n\\n  varying vec4 v_color;\\n\\n  ${n?\"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION\":\"\"}\\n\\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\\n\\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\\n  }\\n\\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\\n  }\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = dpPlusFrc(hiA, hiB);\\n    vec3 e = dpMinusFrc(t1, hiA);\\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #else\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = hiA + hiB;\\n    vec3 e = t1 - hiA;\\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #endif\\n\\n  const float MAX_RGBA_FLOAT =\\n    255.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\\n\\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\\n\\n  vec4 float2rgba(const float value) {\\n    // Make sure value is in the domain we can represent\\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\\n\\n    // Decompose value in 32bit fixed point parts represented as\\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\\n    // by a power of 256 (this removes the bits that are represented in the previous\\n    // component) and then converts the fractional part to 8bits.\\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\\n\\n    // Convert uint8 values (from 0 to 255) to floating point representation for\\n    // the shader\\n    const float toU8AsFloat = 1.0 / 255.0;\\n\\n    return fixedPointU8 * toU8AsFloat;\\n  }\\n\\n  void main() {\\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\\n\\n    v_color = float2rgba(val.z / 25.0);\\n\\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  `,\"\\n  precision highp float;\\n\\n  varying vec4 v_color;\\n\\n  void main() {\\n    gl_FragColor = v_color;\\n  }\\n  \",new Map([[\"position\",0]])),s=new Float32Array(6);a(t,s,3);const c=new Float32Array(6);return a(o,c,3),e.useProgram(i),i.setUniform3f(\"u_highA\",s[0],s[2],s[4]),i.setUniform3f(\"u_lowA\",s[1],s[3],s[5]),i.setUniform3f(\"u_highB\",c[0],c[2],c[4]),i.setUniform3f(\"u_lowB\",c[1],c[3],c[5]),i}const f=o.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new s(e,new Map([[\"position\",0]]),{geometry:[{name:\"position\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:f}),h=t(5633261.287538229,2626832.878767164,1434988.0495278358),m=t(5633271.46742708,2626873.6381334523,1434963.231608387),v=u(h,m),d=e.getBoundFramebufferObject(),{x:b,y:g,width:A,height:w}=e.getViewport();e.bindFramebuffer(l),e.setViewport(0,0,1,1),e.bindVAO(p),e.drawArrays(5,0,4);const _=new Uint8Array(4);l.readPixels(0,0,1,1,6408,5121,_),v.dispose(),p.dispose(!1),f.dispose(),l.dispose(),e.setViewport(b,g,A,w),e.bindFramebuffer(d);const B=(h[2]-m[2])/25,F=c(_);return Math.abs(B-F)}export{m as clearTestWebGLDriver,h as testWebGLDriver};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(n,o){e[0]=n,e[1]=n-e[0],o[0]=e[0],o[1]=e[1]}function o(n,o,t){for(let r=0;r<t;++r)o[2*r]=n[r],o[2*r+1]=n[r]-o[2*r]}function t(n,o,t){for(let r=0;r<t;++r)o[r]=n[2*r]+n[2*r+1]}function r(n,t,r,c){for(let l=0;l<c;++l)f[0]=n[l],o(f,e,1),t[l]=e[0],r[l]=e[1]}const f=new Float64Array(1),e=new Float32Array(2);export{t as decodeDoubleArray,n as encodeDouble,o as encodeDoubleArray,r as encodeDoubleArraySplit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Default3D as e}from\"./DefaultVertexAttributeLocations.js\";import{Pos2 as t,Pos2Tex as r}from\"./DefaultVertexBufferLayouts.js\";import n from\"../../../webgl/BufferObject.js\";import o from\"../../../webgl/Texture.js\";import a from\"../../../webgl/VertexArrayObject.js\";function i(o,i=t,l=e,m=-1,f=1){let u=null;if(i===r)u=new Float32Array([m,m,0,0,f,m,1,0,m,f,0,1,f,f,1,1]);else u=new Float32Array([m,m,f,m,m,f,f,f]);return new a(o,l,{geometry:i},{geometry:n.createVertex(o,35044,u)})}function l(r,o=t,i=e){const l=new Float32Array([-1,-1,3,-1,-1,3]);return new a(r,i,{geometry:o},{geometry:n.createVertex(r,35044,l)})}const m=4;function f(e,t=m){return new o(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:t,height:t})}function u(e,t,r=m){const n=new Uint8Array(r*r*4);for(let o=0;o<n.length;o+=4)n[o+0]=255*t[0],n[o+1]=255*t[1],n[o+2]=255*t[2],n[o+3]=255*t[3];return new o(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:r,height:r},n)}function g(e){return new o(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}export{u as createColorTexture,g as createEmptyDepthTexture,f as createEmptyTexture,i as createQuadVAO,l as createScreenSizeTriangleVAO};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{lerp as e,deg2rad as t,clamp as a}from\"../../../../core/mathUtils.js\";function i(e,t){return new p(e,h,t)}function r(e,t){const{curvatureDependent:a,scaleStart:i,scaleFallOffRange:r}=h;return new p(e,{curvatureDependent:{min:{curvature:a.min.curvature,tiltAngle:a.min.tiltAngle,scaleFallOffFactor:v.curvatureDependent.min.scaleFallOffFactor},max:{curvature:a.max.curvature,tiltAngle:a.max.tiltAngle,scaleFallOffFactor:v.curvatureDependent.max.scaleFallOffFactor}},scaleStart:i,scaleFallOffRange:r,minPixelSize:v.minPixelSize},t)}function n(e){return Math.abs(e*e*e)}function l(e,t,a){const i=a.parameters,r=a.paddingPixelsOverride;return x.scale=Math.min(i.divisor/(t-i.offset),1),x.factor=n(e),x.minPixelSize=i.minPixelSize,x.paddingPixels=r,x}function s(e,t){return 0===e?t.minPixelSize:t.minPixelSize*(1+2*t.paddingPixels/e)}function c(t,a){return Math.max(e(t*a.scale,t,a.factor),s(t,a))}function o(t,a,i=[0,0]){const r=Math.min(Math.max(a.scale,s(t[1],a)/t[1]),1);return i[0]=e(t[0]*r,t[0],a.factor),i[1]=e(t[1]*r,t[1],a.factor),i}function u(e,t,a){const i=l(e,t,a);return i.minPixelSize=0,i.paddingPixels=0,c(1,i)}function d(e,t,a,i){i.scale=u(e,t,a),i.factor=0,i.minPixelSize=a.parameters.minPixelSize,i.paddingPixels=a.paddingPixelsOverride}function f(e,t,a=[0,0]){const i=Math.min(Math.max(t.scale,s(e[1],t)/e[1]),1);return a[0]=e[0]*i,a[1]=e[1]*i,a}function m(e,t,a,i){return c(e,l(t,a,i))}class p{constructor(e,t,a,i=g(),r){this.viewingMode=e,this.description=t,this.ellipsoidRadius=a,this.parameters=i,this._paddingPixelsOverride=r,2===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}get paddingPixelsOverride(){return this._paddingPixelsOverride||this.parameters.paddingPixels}update(e){return(!this.parameters||this.parameters.camera.fovY!==e.fovY||this.parameters.camera.distance!==e.distance)&&(this.calculateParameters(e,this.ellipsoidRadius,this.parameters),!0)}overridePadding(e){return e!==this.paddingPixelsOverride?new p(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,e):this}calculateParameters(e,t,a){const{scaleStart:i,scaleFallOffRange:r,minPixelSize:n}=this.description,{fovY:l,distance:s}=e,c=this.calculateCurvatureDependentParameters(e,t),o=this.coverageCompensation(e,t,c),{tiltAngle:u,scaleFallOffFactor:d}=c,f=Math.sin(u)*s,m=.5*Math.PI-u-l*(.5-i*o),p=f/Math.cos(m),h=m+l*r*o,v=(p-d*(f/Math.cos(h)))/(1-d);return a.camera.fovY=e.fovY,a.camera.distance=e.distance,a.offset=v,a.divisor=p-v,a.minPixelSize=n,a}calculateCurvatureDependentParametersLocal(e,t,a=P){return a.tiltAngle=this.description.curvatureDependent.min.tiltAngle,a.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor,a}calculateCurvatureDependentParametersGlobal(t,i,r=P){const n=this.description.curvatureDependent,l=1+t.distance/i,s=Math.sqrt(l*l-1),[c,o]=[n.min.curvature,n.max.curvature],u=a((s-c)/(o-c),0,1),[d,f]=[n.min,n.max];return r.tiltAngle=e(d.tiltAngle,f.tiltAngle,u),r.scaleFallOffFactor=e(d.scaleFallOffFactor,f.scaleFallOffFactor,u),r}surfaceCoverageCompensationLocal(e,t,a){return(e.fovY-a.tiltAngle)/e.fovY}surfaceCoverageCompensationGlobal(e,t,a){const i=t*t,r=a.tiltAngle+.5*Math.PI,{fovY:n,distance:l}=e,s=l*l+i-2*Math.cos(r)*l*t,c=Math.sqrt(s),o=Math.sqrt(s-i);return(Math.acos(o/c)-Math.asin(t/(c/Math.sin(r)))+.5*n)/n}}const h={curvatureDependent:{min:{curvature:t(10),tiltAngle:t(12),scaleFallOffFactor:.5},max:{curvature:t(70),tiltAngle:t(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},v={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};function g(){return{camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0}}const x={scale:0,factor:0,minPixelSize:0,paddingPixels:0},P={tiltAngle:0,scaleFallOffFactor:0};export{f as applyPrecomputedScaleFactor,c as applyScaleFactor,o as applyScaleFactorVec2,r as getLabelSettings,i as getSettings,d as precomputeScaleFactor,m as scale};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{n as s}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{b as r,a as e,e as o,m as n}from\"../../../../chunks/mat4.js\";import{c as h}from\"../../../../chunks/mat4f64.js\";import{c as a}from\"../../../../chunks/quat.js\";import{a as f}from\"../../../../chunks/quatf64.js\";import{q as l,b as m,f as c}from\"../../../../chunks/vec3.js\";import{c as b}from\"../../../../chunks/vec3f32.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../chunks/vec4f64.js\";import{c as v}from\"../../../../chunks/sphere.js\";class z{constructor(){this._transform=h(),this._transformInverse=new g({value:this._transform},r,h),this._transformInverseTranspose=new g(this._transformInverse,e,h),this._transformTranspose=new g({value:this._transform},e,h),this._transformInverseRotation=new g({value:this._transform},s,i)}invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){o(this._transform,t)}multiplyTransform(t){n(this._transform,this._transform,t)}set(t){o(this._transform,t),this.invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this.invalidateLazyTransforms()}}class g{constructor(t,s,i){this.original=t,this.update=s,this.dirty=!0,this.transform=i()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}class S{constructor(t=0){this.offset=t,this.tmpVertex=p()}applyToVertex(t,s,i){const r=t+this.localOrigin[0],e=s+this.localOrigin[1],o=i+this.localOrigin[2],n=this.offset/Math.sqrt(r*r+e*e+o*o);return this.tmpVertex[0]=t+r*n,this.tmpVertex[1]=s+e*n,this.tmpVertex[2]=i+o*n,this.tmpVertex}applyToAabb(t){const s=t[0]+this.localOrigin[0],i=t[1]+this.localOrigin[1],r=t[2]+this.localOrigin[2],e=t[3]+this.localOrigin[0],o=t[4]+this.localOrigin[1],n=t[5]+this.localOrigin[2],h=this.offset/Math.sqrt(s*s+i*i+r*r);t[0]+=s*h,t[1]+=i*h,t[2]+=r*h;const a=this.offset/Math.sqrt(e*e+o*o+n*n);return t[3]+=e*a,t[4]+=o*a,t[5]+=n*a,t}}class T{constructor(t=0){this.offset=t,this.componentLocalOriginLength=0,this.tmpVertex=p(),this.mbs=u(),this.obb={center:p(),halfSize:b(),quaternion:null}}set localOrigin(t){this.componentLocalOriginLength=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}applyToVertex(t,s,i){const r=t,e=s,o=i+this.componentLocalOriginLength,n=this.offset/Math.sqrt(r*r+e*e+o*o);return this.tmpVertex[0]=t+r*n,this.tmpVertex[1]=s+e*n,this.tmpVertex[2]=i+o*n,this.tmpVertex}applyToAabb(t){const s=t[0],i=t[1],r=t[2]+this.componentLocalOriginLength,e=t[3],o=t[4],n=t[5]+this.componentLocalOriginLength,h=this.offset/Math.sqrt(s*s+i*i+r*r);t[0]+=s*h,t[1]+=i*h,t[2]+=r*h;const a=this.offset/Math.sqrt(e*e+o*o+n*n);return t[3]+=e*a,t[4]+=o*a,t[5]+=n*a,t}applyToMbs(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/s;return this.mbs[0]=t[0]+t[0]*i,this.mbs[1]=t[1]+t[1]*i,this.mbs[2]=t[2]+t[2]*i,this.mbs[3]=t[3]+t[3]*this.offset/s,this.mbs}applyToObb(t){const s=t.center,i=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);this.obb.center[0]=s[0]+s[0]*i,this.obb.center[1]=s[1]+s[1]*i,this.obb.center[2]=s[2]+s[2]*i,l(this.obb.halfSize,t.halfSize,t.quaternion),m(this.obb.halfSize,this.obb.halfSize,t.center);const r=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);return this.obb.halfSize[0]+=this.obb.halfSize[0]*r,this.obb.halfSize[1]+=this.obb.halfSize[1]*r,this.obb.halfSize[2]+=this.obb.halfSize[2]*r,c(this.obb.halfSize,this.obb.halfSize,t.center),a(j,t.quaternion),l(this.obb.halfSize,this.obb.halfSize,j),this.obb.halfSize[0]*=this.obb.halfSize[0]<0?-1:1,this.obb.halfSize[1]*=this.obb.halfSize[1]<0?-1:1,this.obb.halfSize[2]*=this.obb.halfSize[2]<0?-1:1,this.obb.quaternion=t.quaternion,this.obb}}class q{constructor(t=0){this.offset=t,this.sphere=v(),this.tmpVertex=p()}applyToVertex(t,s,i){const r=this.objectTransform.transform;let e=r[0]*t+r[4]*s+r[8]*i+r[12],o=r[1]*t+r[5]*s+r[9]*i+r[13],n=r[2]*t+r[6]*s+r[10]*i+r[14];const h=this.offset/Math.sqrt(e*e+o*o+n*n);e+=e*h,o+=o*h,n+=n*h;const a=this.objectTransform.inverse;return this.tmpVertex[0]=a[0]*e+a[4]*o+a[8]*n+a[12],this.tmpVertex[1]=a[1]*e+a[5]*o+a[9]*n+a[13],this.tmpVertex[2]=a[2]*e+a[6]*o+a[10]*n+a[14],this.tmpVertex}applyToMinMax(t,s){const i=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*i,t[1]+=t[1]*i,t[2]+=t[2]*i;const r=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]+=s[0]*r,s[1]+=s[1]*r,s[2]+=s[2]*r}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const i=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*i,t[4]+=t[4]*i,t[5]+=t[5]*i,t}applyToBoundingSphere(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/s;return this.sphere[0]=t[0]+t[0]*i,this.sphere[1]=t[1]+t[1]*i,this.sphere[2]=t[2]+t[2]*i,this.sphere[3]=t[3]+t[3]*this.offset/s,this.sphere}}const x=new q;function _(s){return t(s)?(x.offset=s,x):null}const y=new T;function M(s){return t(s)?(y.offset=s,y):null}const V=new S;function d(s){return t(s)?(V.offset=s,V):null}const O=\"terrain\",j=f();export{T as I3SVerticalOffsetGlobalViewingMode,z as IntersectorTransform,q as Object3DVerticalOffsetGlobalViewingMode,O as TERRAIN_ID,S as TerrainVerticalOffsetGlobalViewingMode,M as getVerticalOffsetI3S,_ as getVerticalOffsetObject3D,d as getVerticalOffsetTerrain};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/mat3f64.js\";import{s as t,g as i,n as s,f as a,l as r,a as n,d as o,t as l}from\"../../../../chunks/vec3.js\";import{c as u,f as c}from\"../../../../chunks/vec3f64.js\";import{newLayout as h}from\"../../support/buffer/InterleavedLayout.js\";import{defaultMaskAlphaCutoff as d}from\"../core/shaderLibrary/util/AlphaDiscard.glsl.js\";import p from\"../lib/GLMaterialTexture.js\";import{Material as m,materialParametersDefaults as f}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as v}from\"../lib/OrderIndependentTransparency.js\";import{getVerticalOffsetObject3D as g}from\"../lib/verticalOffsetUtils.js\";import{writeDefaultAttributes as C}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as b,intersectTriangleGeometry as x}from\"./internal/MaterialUtil.js\";import{DefaultMaterialTechniqueConfiguration as q,DefaultMaterialTechnique as S}from\"../shaders/DefaultMaterialTechnique.js\";import{RealisticTreeTechnique as T}from\"../shaders/RealisticTreeTechnique.js\";class y extends m{constructor(e){super(e,O),this.supportsEdges=!0,this.techniqueConfig=new q,this.vertexBufferLayout=y.getVertexBufferLayout(this.params),this.instanceBufferLayout=e.instanced?y.getInstanceBufferLayout(this.params):null}isVisibleInPass(e){return 4!==e&&6!==e&&7!==e||this.params.castShadows}isVisible(){const e=this.params;if(!super.isVisible()||0===e.layerOpacity)return!1;const t=e.instanced,i=e.vertexColors,s=e.symbolColors,a=!!t&&t.indexOf(\"color\")>-1,r=e.vvColorEnabled,n=\"replace\"===e.colorMixMode,o=e.opacity>0,l=e.externalColor&&e.externalColor[3]>0;return i&&(a||r||s)?!!n||o:i?n?l:o:a||r||s?!!n||o:n?l:o}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.hasNormalTexture=!!this.params.normalTextureId,this.techniqueConfig.hasColorTexture=!!this.params.textureId,this.techniqueConfig.vertexTangents=this.params.vertexTangents,this.techniqueConfig.instanced=!!this.params.instanced,this.techniqueConfig.instancedDoublePrecision=this.params.instancedDoublePrecision,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.verticalOffset=null!==this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=null!==this.params.screenSizePerspective,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sliceHighlightDisabled=this.params.sliceHighlightDisabled,this.techniqueConfig.alphaDiscardMode=this.params.textureAlphaMode,this.techniqueConfig.normalsTypeDerivate=\"screenDerivative\"===this.params.normals,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.cullFace=this.params.slicePlaneEnabled?0:this.params.cullFace,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,0!==e&&7!==e||(this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.symbolColors=this.params.symbolColors,this.params.treeRendering?this.techniqueConfig.doubleSidedMode=2:this.techniqueConfig.doubleSidedMode=this.params.doubleSided&&\"normal\"===this.params.doubleSidedType?1:this.params.doubleSided&&\"winding-order\"===this.params.doubleSidedType?2:0,this.techniqueConfig.instancedColor=!!this.params.instanced&&this.params.instanced.indexOf(\"color\")>-1,this.techniqueConfig.receiveShadows=this.params.receiveShadows&&this.params.shadowMappingEnabled,this.techniqueConfig.receiveAmbientOcclusion=!(!t||!t.ssaoEnabled)&&this.params.receiveSSAO,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.textureAlphaPremultiplied=!!this.params.textureAlphaPremultiplied,this.techniqueConfig.usePBR=this.params.usePBR,this.techniqueConfig.hasMetalnessAndRoughnessTexture=!!this.params.metallicRoughnessTextureId,this.techniqueConfig.hasEmissionTexture=!!this.params.emissiveTextureId,this.techniqueConfig.hasOcclusionTexture=!!this.params.occlusionTextureId,this.techniqueConfig.offsetBackfaces=!(!this.params.transparent||!this.params.offsetTransparentBackfaces),this.techniqueConfig.isSchematic=this.params.usePBR&&this.params.isSchematic,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<v),this.techniqueConfig}intersect(e,u,c,h,d,p,m){if(null!==this.params.verticalOffset){const e=h.camera;t(A,c[12],c[13],c[14]);let u=null;switch(h.viewingMode){case 1:u=s(E,A);break;case 2:u=i(E,B)}let m=0;if(null!==this.params.verticalOffset){const t=a(L,A,e.eye),i=r(t),s=n(t,t,1/i);let l=null;this.params.screenSizePerspective&&(l=o(u,s)),m+=b(e,i,this.params.verticalOffset,l,this.params.screenSizePerspective)}n(u,u,m),l(I,u,h.transform.inverseRotation),d=a(w,d,I),p=a(_,p,I)}x(e,u,h,d,p,g(h.verticalOffset),m)}getGLMaterial(e){if(0===e.output||7===e.output||1===e.output||2===e.output||3===e.output||4===e.output)return new P(e)}createBufferWriter(){return new M(this.vertexBufferLayout,this.instanceBufferLayout)}static getVertexBufferLayout(e){const t=e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId,i=h().vec3f(\"position\").vec3f(\"normal\");return e.vertexTangents&&i.vec4f(\"tangent\"),t&&i.vec2f(\"uv0\"),e.vertexColors&&i.vec4u8(\"color\"),e.symbolColors&&i.vec4u8(\"symbolColor\"),i}static getInstanceBufferLayout(e){let t=h();return t=e.instancedDoublePrecision?t.vec3f(\"modelOriginHi\").vec3f(\"modelOriginLo\").mat3f(\"model\").mat3f(\"modelNormal\"):t.mat4f(\"model\").mat4f(\"modelNormal\"),e.instanced&&e.instanced.indexOf(\"color\")>-1&&(t=t.vec4f(\"instanceColor\")),e.instanced&&e.instanced.indexOf(\"featureAttribute\")>-1&&(t=t.vec4f(\"instanceFeatureAttribute\")),t}}class P extends p{constructor(e){const t=e.material;super({...e,...t.params}),this.updateParameters()}updateParameters(e){const t=this._material.params;this.updateTexture(t.textureId),this._technique=this._techniqueRep.releaseAndAcquire(t.treeRendering?T:S,this._material.getTechniqueConfig(this._output,e),this._technique)}selectPipelines(){}_updateShadowState(e){e.shadowMappingEnabled!==this._material.params.shadowMappingEnabled&&this._material.setParameterValues({shadowMappingEnabled:e.shadowMappingEnabled})}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this._output&&7!==this._output||(this._updateShadowState(e),this._updateOccludeeState(e)),this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.params,e),this.bindTextures(this._technique.program)}beginSlot(e){return e===(this._material.params.transparent?this._material.params.writeDepth?5:8:3)||23===e}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const O={textureId:void 0,initTextureTransparent:!1,isSchematic:!1,usePBR:!1,normalTextureId:void 0,vertexTangents:!1,occlusionTextureId:void 0,emissiveTextureId:void 0,metallicRoughnessTextureId:void 0,emissiveFactor:[0,0,0],mrrFactors:[0,1,.5],ambient:[.2,.2,.2],diffuse:[.8,.8,.8],externalColor:[1,1,1,1],colorMixMode:\"multiply\",opacity:1,layerOpacity:1,vertexColors:!1,symbolColors:!1,doubleSided:!1,doubleSidedType:\"normal\",cullFace:2,instanced:void 0,instancedDoublePrecision:!1,normals:\"default\",receiveSSAO:!0,receiveShadows:!0,castShadows:!0,shadowMappingEnabled:!1,verticalOffset:null,screenSizePerspective:null,slicePlaneEnabled:!1,sliceHighlightDisabled:!1,offsetTransparentBackfaces:!1,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvSizeValue:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:e(),transparent:!1,writeDepth:!0,textureAlphaMode:0,textureAlphaCutoff:d,textureAlphaPremultiplied:!1,sceneHasOcludees:!1,...f};class M{constructor(e,t){this.vertexBufferLayout=e,this.instanceBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,i,s){C(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,i,s)}}const w=u(),_=u(),B=c(0,0,1),E=u(),I=u(),A=u(),L=u();export{y as DefaultMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{isNone as n,isSome as e}from\"../../../../../core/maybe.js\";import{s as i,c as o,n as r}from\"../../../../../chunks/vec3.js\";import{c as s}from\"../../../../../chunks/vec3f64.js\";import{create as c,setMin as f,setMax as a}from\"../../../../../geometry/support/aaBoundingBox.js\";import{scale as l}from\"../../lib/screenSizePerspectiveUtils.js\";import{assert as u}from\"../../lib/Util.js\";import{isInstanceHidden as m}from\"../renderers/utils.js\";const p=c();function h(t,n,e,i,o,r,s){if(!m(n))if(t.boundingInfo){u(0===t.primitiveType);const n=e.tolerance;g(t.boundingInfo,i,o,n,r,s)}else{const n=t.indices.get(\"position\"),e=t.vertexAttributes.get(\"position\");M(i,o,0,n.length/3,n,e,void 0,r,s)}}const d=s();function g(t,i,o,r,s,c){if(n(t))return;const l=j(i,o,d);if(f(p,t.getBBMin()),a(p,t.getBBMax()),e(s)&&s.applyToAabb(p),A(p,i,l,r)){const{primitiveIndices:n,indices:e,position:f}=t,a=n?n.length:e.length/3;if(a>U){const n=t.getChildren();if(void 0!==n){for(let t=0;t<8;++t)void 0!==n[t]&&g(n[t],i,o,r,s,c);return}}M(i,o,0,a,e,f,n,s,c)}}const x=s();function M(t,n,i,o,r,s,c,f,a){if(c)return b(t,n,i,o,r,s,c,f,a);const l=s.data,u=s.stride||s.size,m=t[0],p=t[1],h=t[2],d=n[0]-m,g=n[1]-p,M=n[2]-h;for(let b=i,v=3*i;b<o;++b){let t=u*r[v++],n=l[t++],i=l[t++],o=l[t];t=u*r[v++];let s=l[t++],c=l[t++],y=l[t];t=u*r[v++];let j=l[t++],A=l[t++],L=l[t];e(f)&&([n,i,o]=f.applyToVertex(n,i,o,b),[s,c,y]=f.applyToVertex(s,c,y,b),[j,A,L]=f.applyToVertex(j,A,L,b));const V=s-n,B=c-i,z=y-o,E=j-n,I=A-i,N=L-o,P=g*N-I*M,U=M*E-N*d,S=d*I-E*g,W=V*P+B*U+z*S;if(Math.abs(W)<=Number.EPSILON)continue;const O=m-n,k=p-i,R=h-o,C=O*P+k*U+R*S;if(W>0){if(C<0||C>W)continue}else if(C>0||C<W)continue;const H=k*z-B*R,X=R*V-z*O,Y=O*B-V*k,_=d*H+g*X+M*Y;if(W>0){if(_<0||C+_>W)continue}else if(_>0||C+_<W)continue;const q=(E*H+I*X+N*Y)/W;if(q>=0){a(q,T(V,B,z,E,I,N,x),b)}}}function b(t,n,i,o,r,s,c,f,a){const l=s.data,u=s.stride||s.size,m=t[0],p=t[1],h=t[2],d=n[0]-m,g=n[1]-p,M=n[2]-h;for(let b=i;b<o;++b){const t=c[b];let n=3*t,i=u*r[n++],o=l[i++],s=l[i++],v=l[i];i=u*r[n++];let y=l[i++],j=l[i++],A=l[i];i=u*r[n];let L=l[i++],V=l[i++],B=l[i];e(f)&&([o,s,v]=f.applyToVertex(o,s,v,b),[y,j,A]=f.applyToVertex(y,j,A,b),[L,V,B]=f.applyToVertex(L,V,B,b));const z=y-o,E=j-s,I=A-v,N=L-o,P=V-s,U=B-v,S=g*U-P*M,W=M*N-U*d,O=d*P-N*g,k=z*S+E*W+I*O;if(Math.abs(k)<=Number.EPSILON)continue;const R=m-o,C=p-s,H=h-v,X=R*S+C*W+H*O;if(k>0){if(X<0||X>k)continue}else if(X>0||X<k)continue;const Y=C*I-E*H,_=H*z-I*R,q=R*E-z*C,w=d*Y+g*_+M*q;if(k>0){if(w<0||X+w>k)continue}else if(w>0||X+w<k)continue;const D=(N*Y+P*_+U*q)/k;if(D>=0){a(D,T(z,E,I,N,P,U,x),t)}}}const v=s(),y=s();function T(t,n,e,s,c,f,a){return i(v,t,n,e),i(y,s,c,f),o(a,v,y),r(a,a),a}function j(t,n,e){return i(e,1/(n[0]-t[0]),1/(n[1]-t[1]),1/(n[2]-t[2]))}function A(t,n,e,i){return L(t,n,e,i,1/0)}function L(t,n,e,i,o){const r=(t[0]-i-n[0])*e[0],s=(t[3]+i-n[0])*e[0];let c=Math.min(r,s),f=Math.max(r,s);const a=(t[1]-i-n[1])*e[1],l=(t[4]+i-n[1])*e[1];if(f=Math.min(f,Math.max(a,l)),f<0)return!1;if(c=Math.max(c,Math.min(a,l)),c>f)return!1;const u=(t[2]-i-n[2])*e[2],m=(t[5]+i-n[2])*e[2];return f=Math.min(f,Math.max(u,m)),!(f<0)&&(c=Math.max(c,Math.min(u,m)),!(c>f)&&c<o)}function V(n,e,i,o,r){let s=(i.screenLength||0)*n.pixelRatio;r&&(s=l(s,o,e,r));const c=s*Math.tan(.5*n.fovY)/(.5*n.fullHeight);return t(c*e,i.minWorldLength||0,null!=i.maxWorldLength?i.maxWorldLength:1/0)}function B(t,n,e){if(!t)return;const i=t.parameters,o=t.paddingPixelsOverride;n.setUniform4f(e,i.divisor,i.offset,i.minPixelSize,o)}function z(t,n){const e=n?z(n):{};for(const i in t){let n=t[i];n&&n.forEach&&(n=N(n)),null==n&&i in e||(e[i]=n)}return e}function E(t,n){let e=!1;for(const i in n){const o=n[i];void 0!==o&&(e=!0,Array.isArray(o)?t[i]=o.slice():t[i]=o)}return e}function I(n,e,i,o,r){if(!e.options.selectionMode)return;const s=n.vertexAttributes.get(\"position\").data,c=n.vertexAttributes.get(\"size\"),f=c&&c.data[0],a=i[0],l=i[1],u=((f+o)/2+4)*n.screenToWorldRatio;let m=Number.MAX_VALUE;for(let p=0;p<s.length-5;p+=3){const n=s[p],e=s[p+1],i=a-n,o=l-e,r=s[p+3]-n,c=s[p+4]-e,f=t((r*i+c*o)/(r*r+c*c),0,1),u=r*f-i,h=c*f-o,d=u*u+h*h;d<m&&(m=d)}m<u*u&&r()}function N(t){const n=[];return t.forEach((t=>n.push(t))),n}const P={multiply:1,ignore:2,replace:3,tint:4},U=1e3;export{B as bindScreenSizePerspective,P as colorMixModes,j as computeInvDir,T as computeNormal,z as copyParameters,A as intersectAabbInvDir,L as intersectAabbInvDirBefore,I as intersectDrapedRenderLineGeometry,h as intersectTriangleGeometry,M as intersectTriangles,E as updateParameters,V as verticalOffsetAtDistance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{q as t}from\"../../../../../chunks/mat4.js\";import{BufferViewVec4f as e,BufferViewVec4u8 as f,BufferViewVec2f as o,BufferViewVec3f as r}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as s}from\"../../lib/Util.js\";function n(t,e,f,o){const r=f.typedBuffer,s=f.typedBufferStride,n=t.length;o*=s;for(let i=0;i<n;++i){const f=2*t[i];r[o]=e[f],r[o+1]=e[f+1],o+=s}}function i(t,e,f,o,r){const s=f.typedBuffer,n=f.typedBufferStride,i=t.length;if(o*=n,null==r||1===r)for(let c=0;c<i;++c){const f=3*t[c];s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],o+=n}else for(let c=0;c<i;++c){const f=3*t[c];for(let t=0;t<r;++t)s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],o+=n}}function c(t,e,f,o,r=1){const s=f.typedBuffer,n=f.typedBufferStride,i=t.length;if(o*=n,1===r)for(let c=0;c<i;++c){const f=4*t[c];s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],s[o+3]=e[f+3],o+=n}else for(let c=0;c<i;++c){const f=4*t[c];for(let t=0;t<r;++t)s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],s[o+3]=e[f+3],o+=n}}function l(t,e,f,o){const r=f.typedBuffer,s=f.typedBufferStride,n=t.length;o*=s;for(let i=0;i<n;++i){const f=9*t[i];for(let t=0;t<9;++t)r[o+t]=e[f+t];o+=s}}function d(t,e,f,o){const r=f.typedBuffer,s=f.typedBufferStride,n=t.length;o*=s;for(let i=0;i<n;++i){const f=16*t[i];for(let t=0;t<16;++t)r[o+t]=e[f+t];o+=s}}function u(t,e,f,o,r,s=1){if(!f)return void i(t,e,o,r,s);const n=o.typedBuffer,c=o.typedBufferStride,l=t.length,d=f[0],u=f[1],a=f[2],p=f[4],y=f[5],g=f[6],B=f[8],h=f[9],m=f[10],b=f[12],z=f[13],S=f[14];if(r*=c,1===s)for(let i=0;i<l;++i){const f=3*t[i],o=e[f],s=e[f+1],l=e[f+2];n[r]=d*o+p*s+B*l+b,n[r+1]=u*o+y*s+h*l+z,n[r+2]=a*o+g*s+m*l+S,r+=c}else for(let i=0;i<l;++i){const f=3*t[i],o=e[f],l=e[f+1],k=e[f+2],F=d*o+p*l+B*k+b,q=u*o+y*l+h*k+z,v=a*o+g*l+m*k+S;for(let t=0;t<s;++t)n[r]=F,n[r+1]=q,n[r+2]=v,r+=c}}function a(e,f,o,r,s,n=1){if(!o)return void i(e,f,r,s,n);const c=o,l=r.typedBuffer,d=r.typedBufferStride,u=e.length,a=c[0],p=c[1],y=c[2],g=c[4],B=c[5],h=c[6],m=c[8],b=c[9],z=c[10],S=!t(c),k=1e-6,F=1-k;if(s*=d,1===n)for(let t=0;t<u;++t){const o=3*e[t],r=f[o],n=f[o+1],i=f[o+2];let c=a*r+g*n+m*i,u=p*r+B*n+b*i,q=y*r+h*n+z*i;if(S){const t=c*c+u*u+q*q;if(t<F&&t>k){const e=1/Math.sqrt(t);c*=e,u*=e,q*=e}}l[s+0]=c,l[s+1]=u,l[s+2]=q,s+=d}else for(let t=0;t<u;++t){const o=3*e[t],r=f[o],i=f[o+1],c=f[o+2];let u=a*r+g*i+m*c,q=p*r+B*i+b*c,v=y*r+h*i+z*c;if(S){const t=u*u+q*q+v*v;if(t<F&&t>k){const e=1/Math.sqrt(t);u*=e,q*=e,v*=e}}for(let t=0;t<n;++t)l[s+0]=u,l[s+1]=q,l[s+2]=v,s+=d}}function p(e,f,o,r,s,n=1){if(!o)return void c(e,f,r,s,n);const i=o,l=r.typedBuffer,d=r.typedBufferStride,u=e.length,a=i[0],p=i[1],y=i[2],g=i[4],B=i[5],h=i[6],m=i[8],b=i[9],z=i[10],S=!t(i),k=1e-6,F=1-k;if(s*=d,1===n)for(let t=0;t<u;++t){const o=4*e[t],r=f[o],n=f[o+1],i=f[o+2],c=f[o+3];let u=a*r+g*n+m*i,q=p*r+B*n+b*i,v=y*r+h*n+z*i;if(S){const t=u*u+q*q+v*v;if(t<F&&t>k){const e=1/Math.sqrt(t);u*=e,q*=e,v*=e}}l[s+0]=u,l[s+1]=q,l[s+2]=v,l[s+3]=c,s+=d}else for(let t=0;t<u;++t){const o=4*e[t],r=f[o],i=f[o+1],c=f[o+2],u=f[o+3];let q=a*r+g*i+m*c,v=p*r+B*i+b*c,M=y*r+h*i+z*c;if(S){const t=q*q+v*v+M*M;if(t<F&&t>k){const e=1/Math.sqrt(t);q*=e,v*=e,M*=e}}for(let t=0;t<n;++t)l[s+0]=q,l[s+1]=v,l[s+2]=M,l[s+3]=u,s+=d}}function y(t,e,f,o,r,s=1){const n=o.typedBuffer,i=o.typedBufferStride,c=t.length;if(r*=i,1===s){if(4===f)for(let l=0;l<c;++l){const f=4*t[l];n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=e[f+3],r+=i}else if(3===f)for(let l=0;l<c;++l){const f=3*t[l];n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=255,r+=i}}else if(4===f)for(let l=0;l<c;++l){const f=4*t[l];for(let t=0;t<s;++t)n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=e[f+3],r+=i}else if(3===f)for(let l=0;l<c;++l){const f=3*t[l];for(let t=0;t<s;++t)n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=255,r+=i}}function g(t,i,c,l,d,g){for(const B of i.fieldNames){const i=t.vertexAttributes.get(B),h=t.indices.get(B);if(i&&h)switch(B){case\"position\":{s(3===i.size);const t=d.getField(B,r);t&&u(h,i.data,c,t,g);break}case\"normal\":{s(3===i.size);const t=d.getField(B,r);t&&a(h,i.data,l,t,g);break}case\"uv0\":{s(2===i.size);const t=d.getField(B,o);t&&n(h,i.data,t,g);break}case\"color\":{s(3===i.size||4===i.size);const t=d.getField(B,f);t&&y(h,i.data,i.size,t,g);break}case\"symbolColor\":{s(3===i.size||4===i.size);const t=d.getField(B,f);t&&y(h,i.data,i.size,t,g);break}case\"tangent\":{s(4===i.size);const t=d.getField(B,e);t&&p(h,i.data,l,t,g);break}}}}export{l as writeBufferMat3f,d as writeBufferMat4f,n as writeBufferVec2,i as writeBufferVec3,c as writeBufferVec4,y as writeColor,g as writeDefaultAttributes,a as writeNormal,u as writePosition,p as writeTangent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../../core/maybe.js\";import{m as r,e as s,b as n,a as i}from\"../../../../../chunks/mat4.js\";import{c as a}from\"../../../../../chunks/mat4f64.js\";import{encodeDoubleArray as o}from\"../../lib/doublePrecisionUtils.js\";import{setMatrixTranslation3 as c}from\"../../lib/Util.js\";function u(t,r){return e(t)&&(t=[]),t.push(r),t}function l(t,r){if(e(t))return t;const s=t.filter((e=>e!==r));return 0===s.length?null:s}function f(e){return!!t(e)&&!e.visible}function m(e,t){const r=new Map;return r.set(0,t.acquire(e,0)),r.set(1,t.acquire(e,7)),r.set(4,t.acquire(e,3)),r.set(3,t.acquire(e,2)),r.set(2,t.acquire(e,1)),r.set(5,t.acquire(e,4)),r.set(7,t.acquire(e,3)),r.set(6,t.acquire(e,3)),r}function p(e,t){t.release(e,0),t.release(e,7),t.release(e,3),t.release(e,2),t.release(e,1),t.release(e,4)}function q(e,a,o){const u=e.origin.vec3;c(h,-u[0],-u[1],-u[2]),t(e.transformation)?r(a,h,e.transformation):s(a,h),o&&(n(o,a),i(o,o))}function b(e,t,r,s,n){g[0]=e.get(t,0),g[1]=e.get(t,1),g[2]=e.get(t,2),o(g,j,3),r.set(n,0,j[0]),s.set(n,0,j[1]),r.set(n,1,j[2]),s.set(n,1,j[3]),r.set(n,2,j[4]),s.set(n,2,j[5])}const g=new Float64Array(3),j=new Float32Array(6),h=a();export{m as acquireMaterials,u as addObject3DStateID,q as calculateTransformRelativeToOrigin,b as encodeDoubleVec3,f as isInstanceHidden,p as releaseMaterials,l as removeObject3DStateID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import{bindSliceUniforms as i}from\"../core/shaderLibrary/Slice.glsl.js\";import{InstancedDoublePrecision as r}from\"../core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{bindVerticalOffsetUniforms as o}from\"../core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{bindOutputHighlight as s}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{bindMultipassTerrainTexture as a}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindPBRUniforms as n}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{bindReadShadowMapViewCustomOrigin as l}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{bindVisualVariablesUniformsForSymbols as p}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{doublePrecisionRequiresObfuscation as c}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{bindProjectionMatrix as u,bindViewCustomOrigin as h,bindCameraPosition as d}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as m}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as f}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as v,ShaderTechniqueConfiguration as g}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as b}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as y,OITBlending as x,OITDepthTest as T,getOITPolygonOffset as P}from\"../lib/OrderIndependentTransparency.js\";import{Program as M}from\"../lib/Program.js\";import{stencilWriteMaskOn as S,stencilToolMaskBaseParams as C,stencilBaseAllZerosParams as O}from\"../lib/StencilUtils.js\";import{colorMixModes as D,bindScreenSizePerspective as w}from\"../materials/internal/MaterialUtil.js\";import{D as j}from\"../../../../chunks/DefaultMaterial.glsl.js\";import{makePipelineState as A,cullingParams as E,defaultDepthWriteParams as U,defaultColorWriteParams as z}from\"../../../webgl/renderState.js\";class R extends f{initializeProgram(e){const t=R.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,viewingMode:e.viewingMode,receiveShadows:i.receiveShadows,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:i.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:i.symbolColors,vvSize:i.vvSize,vvColor:i.vvColor,vvInstancingEnabled:!0,instanced:i.instanced,instancedColor:i.instancedColor,instancedDoublePrecision:i.instancedDoublePrecision,pbrMode:i.usePBR?i.isSchematic?2:1:0,hasMetalnessAndRoughnessTexture:i.hasMetalnessAndRoughnessTexture,hasEmissionTexture:i.hasEmissionTexture,hasOcclusionTexture:i.hasOcclusionTexture,hasNormalTexture:i.hasNormalTexture,hasColorTexture:i.hasColorTexture,receiveAmbientOcclusion:i.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:i.normalsTypeDerivate?3:0,doubleSidedMode:i.doubleSidedMode,vertexTangents:i.vertexTangents,attributeTextureCoordinates:i.hasMetalnessAndRoughnessTexture||i.hasEmissionTexture||i.hasOcclusionTexture||i.hasNormalTexture||i.hasColorTexture?1:0,textureAlphaPremultiplied:i.textureAlphaPremultiplied,attributeColor:i.vertexColors,screenSizePerspectiveEnabled:i.screenSizePerspective,verticalOffsetEnabled:i.verticalOffset,offsetBackfaces:i.offsetBackfaces,doublePrecisionRequiresObfuscation:c(e.rctx),alphaDiscardMode:i.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new M(e.rctx,r,b)}bindPass(e,t){var i,r;u(this.program,t.camera.projectionMatrix);const l=this.configuration.output;(1===this.configuration.output||t.multipassTerrainEnabled||3===l)&&this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),a(this.program,t)),7===l&&(this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode])),0===l?(t.lighting.setUniforms(this.program,!1),this.program.setUniform3fv(\"ambient\",e.ambient),this.program.setUniform3fv(\"diffuse\",e.diffuse),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode]),this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.configuration.usePBR&&n(this.program,e,this.configuration.isSchematic)):4===l&&s(this.program,t),p(this.program,e),o(this.program,e,t),w(e.screenSizePerspective,this.program,\"screenSizePerspectiveAlignment\"),2!==e.textureAlphaMode&&3!==e.textureAlphaMode||this.program.setUniform1f(\"textureAlphaCutoff\",e.textureAlphaCutoff),null==(i=t.shadowMap)||i.bind(this.program),null==(r=t.ssaoHelper)||r.bind(this.program,t.camera)}bindDraw(e){const o=this.configuration.instancedDoublePrecision?t(e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]):e.origin;h(this.program,o,e.camera.viewMatrix),this.program.rebindTextures(),(0===this.configuration.output||7===this.configuration.output||1===this.configuration.output&&this.configuration.screenSizePerspective||2===this.configuration.output&&this.configuration.screenSizePerspective||4===this.configuration.output&&this.configuration.screenSizePerspective)&&d(this.program,o,e.camera.viewInverseTransposeMatrix),2===this.configuration.output&&this.program.setUniformMatrix4fv(\"viewNormal\",e.camera.viewInverseTransposeMatrix),this.configuration.instancedDoublePrecision&&r.bindCustomOrigin(this.program,o),i(this.program,this.configuration,e.slicePlane,o),0===this.configuration.output&&l(this.program,e,o)}setPipeline(e,t){const i=this.configuration,r=3===e,o=2===e;return A({blending:0!==i.output&&7!==i.output||!i.transparent?null:r?y:x(e),culling:L(i)&&E(i.cullFace),depthTest:{func:T(e)},depthWrite:r||o?i.writeDepth&&U:null,colorWrite:z,stencilWrite:i.sceneHasOcludees?S:null,stencilTest:i.sceneHasOcludees?t?C:O:null,polygonOffset:r||o?null:P(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipeline(this.configuration.transparencyPassType,!0),this.setPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}function L(e){return e.cullFace?0!==e.cullFace:!e.slicePlaneEnabled&&(!e.transparent&&!e.doubleSidedMode)}R.shader=new m(j,(()=>import(\"./DefaultMaterial.glsl.js\")));class H extends g{constructor(){super(...arguments),this.output=0,this.alphaDiscardMode=1,this.doubleSidedMode=0,this.isSchematic=!1,this.vertexColors=!1,this.offsetBackfaces=!1,this.symbolColors=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.sliceHighlightDisabled=!1,this.receiveAmbientOcclusion=!1,this.screenSizePerspective=!1,this.textureAlphaPremultiplied=!1,this.hasColorTexture=!1,this.usePBR=!1,this.hasMetalnessAndRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.instanced=!1,this.instancedColor=!1,this.instancedDoublePrecision=!1,this.vertexTangents=!1,this.normalsTypeDerivate=!1,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparent=!1,this.enableOffset=!0,this.cullFace=0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([v({count:8})],H.prototype,\"output\",void 0),e([v({count:4})],H.prototype,\"alphaDiscardMode\",void 0),e([v({count:3})],H.prototype,\"doubleSidedMode\",void 0),e([v()],H.prototype,\"isSchematic\",void 0),e([v()],H.prototype,\"vertexColors\",void 0),e([v()],H.prototype,\"offsetBackfaces\",void 0),e([v()],H.prototype,\"symbolColors\",void 0),e([v()],H.prototype,\"vvSize\",void 0),e([v()],H.prototype,\"vvColor\",void 0),e([v()],H.prototype,\"verticalOffset\",void 0),e([v()],H.prototype,\"receiveShadows\",void 0),e([v()],H.prototype,\"slicePlaneEnabled\",void 0),e([v()],H.prototype,\"sliceHighlightDisabled\",void 0),e([v()],H.prototype,\"receiveAmbientOcclusion\",void 0),e([v()],H.prototype,\"screenSizePerspective\",void 0),e([v()],H.prototype,\"textureAlphaPremultiplied\",void 0),e([v()],H.prototype,\"hasColorTexture\",void 0),e([v()],H.prototype,\"usePBR\",void 0),e([v()],H.prototype,\"hasMetalnessAndRoughnessTexture\",void 0),e([v()],H.prototype,\"hasEmissionTexture\",void 0),e([v()],H.prototype,\"hasOcclusionTexture\",void 0),e([v()],H.prototype,\"hasNormalTexture\",void 0),e([v()],H.prototype,\"instanced\",void 0),e([v()],H.prototype,\"instancedColor\",void 0),e([v()],H.prototype,\"instancedDoublePrecision\",void 0),e([v()],H.prototype,\"vertexTangents\",void 0),e([v()],H.prototype,\"normalsTypeDerivate\",void 0),e([v()],H.prototype,\"writeDepth\",void 0),e([v()],H.prototype,\"sceneHasOcludees\",void 0),e([v()],H.prototype,\"transparent\",void 0),e([v()],H.prototype,\"enableOffset\",void 0),e([v({count:3})],H.prototype,\"cullFace\",void 0),e([v({count:4})],H.prototype,\"transparencyPassType\",void 0),e([v()],H.prototype,\"multipassTerrainEnabled\",void 0),e([v()],H.prototype,\"cullAboveGround\",void 0);export{R as DefaultMaterialTechnique,H as DefaultMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{R as e}from\"../../../../chunks/RealisticTree.glsl.js\";import{doublePrecisionRequiresObfuscation as r}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{ReloadableShaderModule as s}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{Default3D as i}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as o}from\"../lib/Program.js\";import{DefaultMaterialTechnique as t}from\"./DefaultMaterialTechnique.js\";class a extends t{initializeProgram(e){const s=a.shader.get(),t=this.configuration,l=s.build({OITEnabled:0===t.transparencyPassType,output:t.output,viewingMode:e.viewingMode,receiveShadows:t.receiveShadows,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:t.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:t.symbolColors,vvSize:t.vvSize,vvColor:t.vvColor,vvInstancingEnabled:!0,instanced:t.instanced,instancedColor:t.instancedColor,instancedDoublePrecision:t.instancedDoublePrecision,pbrMode:t.usePBR?1:0,hasMetalnessAndRoughnessTexture:!1,hasEmissionTexture:!1,hasOcclusionTexture:!1,hasNormalTexture:!1,hasColorTexture:t.hasColorTexture,receiveAmbientOcclusion:t.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:0,doubleSidedMode:2,vertexTangents:!1,attributeTextureCoordinates:t.hasColorTexture?1:0,textureAlphaPremultiplied:t.textureAlphaPremultiplied,attributeColor:t.vertexColors,screenSizePerspectiveEnabled:t.screenSizePerspective,verticalOffsetEnabled:t.verticalOffset,offsetBackfaces:t.offsetBackfaces,doublePrecisionRequiresObfuscation:r(e.rctx),alphaDiscardMode:t.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new o(e.rctx,l,i)}}a.shader=new s(e,(()=>import(\"../core/shaderLibrary/default/RealisticTree.glsl.js\")));export{a as RealisticTreeTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Logger.js\";import{isUint16Array as t,isUint32Array as i}from\"../../core/typedArrayUtil.js\";import{checkWebGLError as s}from\"./checkWebGLError.js\";import{ResourceType as r}from\"./enums.js\";const n=e.getLogger(\"esri.views.webgl.BufferObject\");class h{constructor(e,t,i,n,h){this._context=e,this.bufferType=t,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(r.Buffer,this),this._glName=this._context.gl.createBuffer(),s(this._context.gl),n&&this.setData(n,h)}static createIndex(e,t,i,s){return new h(e,34963,t,i,s)}static createVertex(e,t,i){return new h(e,34962,t,i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){var e;if(null!=(e=this._context)&&e.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(r.Buffer,this),this._context=null}else this._glName&&n.warn(\"Leaked WebGL buffer object\")}setData(e,r){if(!e)return;if(\"number\"==typeof e){if(e<0&&n.error(\"Buffer size cannot be negative!\"),34963===this.bufferType&&r)switch(this._indexType=r,this._size=e,r){case 5123:e*=2;break;case 5125:e*=4}}else{let s=e.byteLength;t(e)&&(s/=2,this._indexType=5123),i(e)&&(s/=4,this._indexType=5125),this._size=s}const h=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const o=this._context.gl;o.bufferData(this.bufferType,e,this.usage),s(o),this._context.bindVAO(h)}setSubData(e,r=0,h=0,o=e.byteLength){if(!e)return;(r<0||r>=this._size)&&n.error(\"offset is out of range!\");let f=r,u=h,c=o,a=e.byteLength;t(e)&&(a/=2,f*=2,u*=2,c*=2),i(e)&&(a/=4,f*=4,u*=4,c*=4),void 0===o&&(o=a-1),h>=o&&n.error(\"end must be bigger than start!\"),r+h-o>this._size&&n.error(\"An attempt to write beyond the end of the buffer!\");const _=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const g=this._context.gl,l=ArrayBuffer.isView(e)?e.buffer:e,b=0===u&&c===e.byteLength?l:l.slice(u,c);g.bufferSubData(this.bufferType,f,b),s(g),this._context.bindVAO(_)}}export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Logger.js\";import{webglValidateShadersEnabled as e}from\"./checkWebGLError.js\";import{ResourceType as i,DepthStencilAttachment as r}from\"./enums.js\";import s from\"./Renderbuffer.js\";import h from\"./Texture.js\";import{getGpuMemoryUsage as n}from\"./Util.js\";const o=t.getLogger(\"esri.views.webgl.FrameBufferObject\");class c{constructor(t,e,r,n){if(this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc={...e},t.instanceCounter.increment(i.Framebuffer,this),r){Array.isArray(r)||(r=[r]);for(let e=0;e<r.length;++e){var o,c;const i=r[e];let s;a(i)?(s=i.descriptor,this._colorAttachments.set(36064+e,i)):(s=i,this._colorAttachments.set(36064+e,new h(t,i))),0!==(null==(o=this._desc)?void 0:o.colorTarget)&&2!==(null==(c=this._desc)?void 0:c.colorTarget)&&console.error(\"Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!\"),this._validateColorAttachmentPoint(36064+e),this._validateTextureDimensions(s,this._desc)}}if(n instanceof s){var l;const t=null!=(l=this._desc.depthStencilTarget)?l:3;2===t?this._stencilAttachment=n:1===t||3===t?this._depthAttachment=n:console.error('If a Renderbuffer is provided, \"depthStencilTarget\" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),d(n.descriptor,this._desc)}else if(n){let t;this._context.capabilities.depthTexture||console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!\"),a(n)?(this._depthStencilTexture=n,t=n.descriptor):this._depthStencilTexture=new h(this._context,n),this._validateTextureDimensions(t,this._desc)}}dispose(){if(!this._desc)return;const t=this._context.getBoundFramebufferObject();if(this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName){this._context.gl.deleteFramebuffer(this._glName),this._glName=null}this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(i.Framebuffer,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const t=this._colorAttachments.get(36064);return t&&a(t)?t:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}get gpuMemoryUsage(){return n(this.colorAttachment)+n(this.depthStencilAttachment)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&a(e)?e:null}framebufferTexture2D(t,e,i=36064,r=3553,s=0){e.framebufferTexture2D(e.FRAMEBUFFER,i,r,t,s)}attachColorTexture(t,e=36064){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;this._validateTextureDimensions(i,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(t.glName,this._context.gl,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=36064){const e=this._colorAttachments.get(t);if(a(e)){const i=e;return this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,t)),this._colorAttachments.delete(t),i}}attachDepthStencilTexture(t){if(!t)return;const e=t.descriptor;34041!==e.pixelFormat&&console.error(\"Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!\"),34042!==e.dataType&&console.error(\"Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!\"),this._context.capabilities.depthTexture||console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!\"),this._validateTextureDimensions(e,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(t.glName,this._context.gl,r)),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,r)),this._depthStencilTexture=null,t}attachDepthStencilBuffer(t){if(!t)return;const e=t.descriptor;if(34041!==e.internalFormat&&33189!==e.internalFormat&&console.error(\"Depth/Stencil buffer must have correct internalFormat\"),d(e,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===e.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,i=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,t.glName)}this._depthAttachment=t}detachDepthStencilBuffer(){const t=this._context.gl,e=this._depthAttachment;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}return this._depthAttachment=null,e}detachAll(){this.detachColorTexture(),this.detachDepthStencilBuffer(),this.detachDepthStencilTexture()}copyToTexture(t,e,i,r,s,n,o){(t<0||e<0||s<0||n<0)&&console.error(\"Offsets cannot be negative!\"),(i<=0||r<=0)&&console.error(\"Copy width and height must be greater than zero!\");const c=this._desc,a=o.descriptor;3553!==o.descriptor.target&&console.error(\"Texture target must be TEXTURE_2D!\"),(t+i>c.width||e+r>c.height||s+i>a.width||n+r>a.height)&&console.error(\"Bad dimensions, the current input values will attempt to read or copy out of bounds!\");const l=this._context,d=l.bindTexture(o,h.TEXTURE_UNIT_FOR_UPDATES);l.bindFramebuffer(this),l.gl.copyTexSubImage2D(3553,0,s,n,t,e,i,r),l.bindTexture(d,h.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,s,h,n){(i<=0||r<=0)&&console.error(\"Copy width and height must be greater than zero!\"),n||console.error(\"Target memory is not initialized!\"),this._context.bindFramebuffer(this);this._context.gl.readPixels(t,e,i,r,s,h,n)}resize(t,e){const i=this._desc;if(i.width!==t||i.height!==e){if(!this._initialized)return i.width=t,i.height=e,this._colorAttachments.forEach((i=>{i&&i.resize(t,e)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,e));i.width=t,i.height=e,this._colorAttachments.forEach((i=>{i&&i.resize(t,e)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(t,e):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(t,e),this._stencilAttachment&&this._stencilAttachment.resize(t,e)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(t=3553){var i,r,n,o;const c=this._context.gl;if(this._initialized)return void c.bindFramebuffer(c.FRAMEBUFFER,this.glName);this._glName&&c.deleteFramebuffer(this._glName);const d=this._context,_=c.createFramebuffer(),u=this._desc,f=null!=(i=u.colorTarget)?i:1,m=null!=(r=u.width)?r:1,T=null!=(n=u.height)?n:1;if(c.bindFramebuffer(c.FRAMEBUFFER,_),0===this._colorAttachments.size)if(0===f)this._colorAttachments.set(36064,l(d,u,2===this.descriptor.colorTarget?34067:3553));else{const t=new s(d,{internalFormat:32854,width:m,height:T});this._colorAttachments.set(36064,t)}this._colorAttachments.forEach(((e,i)=>{e&&(a(e)?this.framebufferTexture2D(e.glName,c,i,t):c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,e.glName))}));const p=null!=(o=u.depthStencilTarget)?o:0;switch(p){case 1:case 3:{this._depthAttachment||(this._depthAttachment=new s(d,{internalFormat:1===u.depthStencilTarget?33189:34041,width:m,height:T}));const t=1===p?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT;c.framebufferRenderbuffer(c.FRAMEBUFFER,t,c.RENDERBUFFER,this._depthAttachment.glName);break}case 2:this._stencilAttachment||(this._stencilAttachment=new s(d,{internalFormat:36168,width:m,height:T})),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.STENCIL_ATTACHMENT,c.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){d.capabilities.depthTexture||console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!\");const t={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:m,height:T};this._depthStencilTexture=new h(d,t)}this.framebufferTexture2D(this._depthStencilTexture.glName,c,c.DEPTH_STENCIL_ATTACHMENT,t)}if(e()){c.checkFramebufferStatus(c.FRAMEBUFFER)!==c.FRAMEBUFFER_COMPLETE&&console.error(\"Framebuffer is incomplete!\")}this._glName=_,this._initialized=!0}_disposeColorAttachments(){this._colorAttachments.forEach(((t,e)=>{if(a(t))this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,e)),t.dispose();else if(t instanceof WebGLRenderbuffer){const i=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),i.framebufferRenderbuffer(i.FRAMEBUFFER,e,i.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}})),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const e=1===this._desc.depthStencilTarget?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(t.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,t,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}_validateTextureDimensions(t,e){3553!==t.target&&34067!==t.target&&console.error(\"Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!\"),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error(\"Color attachment texture must match the framebuffer's!\"):(e.width=t.width,e.height=t.height)}_validateColorAttachmentPoint(t){if(-1===c._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;c._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else c._MAX_COLOR_ATTACHMENTS=1}const e=t-36064;e+1>c._MAX_COLOR_ATTACHMENTS&&o.error(\"esri.FrameBufferObject\",`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${c._MAX_COLOR_ATTACHMENTS} color attachments`)}}function a(t){return\"type\"in t&&\"texture\"===t.type}function l(t,e,i){return new h(t,{target:i,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})}function d(t,e){void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error(\"Renderbuffer dimensions must match the framebuffer's!\"):(e.width=t.width,e.height=t.height)}c._MAX_COLOR_ATTACHMENTS=-1;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as t}from\"../../core/maybe.js\";import{webglValidateShadersEnabled as o}from\"./checkWebGLError.js\";import{ResourceType as i}from\"./enums.js\";import{transpileShader as r}from\"./ShaderTranspiler.js\";class n{constructor(t,r,n,e){this._context=t,this._locations=e,this._vShader=null,this._fShader=null,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error(\"RenderingContext isn't initialized!\"),0===r.length&&console.error(\"Shaders source should not be empty!\"),this._vShader=s(this._context,35633,r),this._fShader=s(this._context,35632,n),this._vShader&&this._fShader||console.error(\"Error loading shaders!\");const m=this._context.gl,a=m.createProgram();m.attachShader(a,this._vShader),m.attachShader(a,this._fShader),e.forEach(((t,o)=>m.bindAttribLocation(a,t,o))),m.linkProgram(a),o()&&!m.getProgramParameter(a,m.LINK_STATUS)&&console.error(\"Could not initialize shader\\nVALIDATE_STATUS: \"+m.getProgramParameter(a,m.VALIDATE_STATUS)+\", gl error [\"+m.getError()+\"]infoLog: \"+m.getProgramInfoLog(a)),this._glName=a,this._context.instanceCounter.increment(i.Program,this)}get glName(){return this._glName}dispose(){const t=this._context.gl;if(this._vShader){const o=this._vShader;t.deleteShader(o),this._vShader=null}if(this._fShader){const o=this._fShader;t.deleteShader(o),this._fShader=null}this._glName&&(t.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(i.Program,this))}_getUniformLocation(t){return void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this._glName,t)),this._nameToUniformLocation[t]}hasUniform(t){return null!==this._getUniformLocation(t)}setUniform1i(t,o){const i=this._nameToUniform1[t];if(void 0===i||o!==i){this._context.useProgram(this);this._context.gl.uniform1i(this._getUniformLocation(t),o),this._nameToUniform1[t]=o}}setUniform1iv(t,o){const i=this._nameToUniform1v[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform1iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform1v[t]=Array.from(o):h(o,i)}}setUniform2iv(t,o){const i=this._nameToUniform2[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform2iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform2[t]=Array.from(o):h(o,i)}}setUniform3iv(t,o){const i=this._nameToUniform3[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform3iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform3[t]=Array.from(o):h(o,i)}}setUniform4iv(t,o){const i=this._nameToUniform4[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform4iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform4[t]=Array.from(o):h(o,i)}}setUniform1f(t,o){const i=this._nameToUniform1[t];if(void 0===i||o!==i){this._context.useProgram(this);this._context.gl.uniform1f(this._getUniformLocation(t),o),this._nameToUniform1[t]=o}}setUniform1fv(t,o){const i=this._nameToUniform1v[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform1fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform1v[t]=Array.from(o):h(o,i)}}setUniform2f(t,o,i){const r=this._nameToUniform2[t];if(void 0===r||o!==r[0]||i!==r[1]){this._context.useProgram(this);this._context.gl.uniform2f(this._getUniformLocation(t),o,i),void 0===r?this._nameToUniform2[t]=[o,i]:(r[0]=o,r[1]=i)}}setUniform2fv(t,o){const i=this._nameToUniform2[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform2fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform2[t]=Array.from(o):h(o,i)}}setUniform3f(t,o,i,r){const n=this._nameToUniform3[t];if(void 0===n||o!==n[0]||i!==n[1]||r!==n[2]){this._context.useProgram(this);this._context.gl.uniform3f(this._getUniformLocation(t),o,i,r),void 0===n?this._nameToUniform3[t]=[o,i,r]:(n[0]=o,n[1]=i,n[2]=r)}}setUniform3fv(t,o){const i=this._nameToUniform3[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform3fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform3[t]=Array.from(o):h(o,i)}}setUniform4f(t,o,i,r,n){const e=this._nameToUniform4[t];if(void 0===e||o!==e[0]||i!==e[1]||r!==e[2]||n!==e[3]){this._context.useProgram(this);this._context.gl.uniform4f(this._getUniformLocation(t),o,i,r,n),void 0===e?this._nameToUniform4[t]=[o,i,r,n]:(e[0]=o,e[1]=i,e[2]=r,e[3]=n)}}setUniform4fv(t,o){const i=this._nameToUniform4[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform4fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform4[t]=Array.from(o):h(o,i)}}setUniformMatrix3fv(t,o,i=!1,r=!1){const n=this._nameToUniformMatrix3[t];if(r?n!==o:f(n,o)){this._context.useProgram(this);this._context.gl.uniformMatrix3fv(this._getUniformLocation(t),i,o),void 0===n?this._nameToUniformMatrix3[t]=Array.from(o):h(o,n)}}setUniformMatrix4fv(t,o,i=!1){const r=this._nameToUniformMatrix4[t];if(c(r,o)){this._context.useProgram(this);this._context.gl.uniformMatrix4fv(this._getUniformLocation(t),i,o),void 0===r?this._nameToUniformMatrix4[t]=Array.from(o):h(o,r)}}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error(\"VertexAttributeLocations are incompatible\")}stop(){}}function e(o,i){if(t(o)||o.length!==i.length)return!0;for(let t=0;t<o.length;++t)if(o[t]!==i[t])return!0;return!1}function s(t,i,n){const e=\"webgl2\"===t.webglVersion?r(n,i):n,s=t.gl,a=s.createShader(i);return s.shaderSource(a,e),s.compileShader(a),o()&&!s.getShaderParameter(a,s.COMPILE_STATUS)&&(console.error(\"Compile error in \".concat(35633===i?\"vertex\":\"fragment\",\" shader\")),console.error(s.getShaderInfoLog(a)),console.error(m(e)),\"webgl2\"===t.webglVersion&&(console.log(\"Shader source before transpilation:\"),console.log(n))),a}function m(t){let o=2;return t.replace(/\\n/g,(()=>\"\\n\"+a(o++)+\":\"))}function a(t){return t>=1e3?t.toString():(\"  \"+t).slice(-3)}function h(t,o){for(let i=0;i<t.length;++i)o[i]=t[i]}function f(o,i){return!!t(o)||(9!==o.length?e(o,i):9!==o.length||o[0]!==i[0]||o[1]!==i[1]||o[2]!==i[2]||o[3]!==i[3]||o[4]!==i[4]||o[5]!==i[5]||o[6]!==i[6]||o[7]!==i[7]||o[8]!==i[8])}function c(o,i){return!!t(o)||(16!==o.length?e(o,i):16!==o.length||o[0]!==i[0]||o[1]!==i[1]||o[2]!==i[2]||o[3]!==i[3]||o[4]!==i[4]||o[5]!==i[5]||o[6]!==i[6]||o[7]!==i[7]||o[8]!==i[8]||o[9]!==i[9]||o[10]!==i[10]||o[11]!==i[11]||o[12]!==i[12]||o[13]!==i[13]||o[14]!==i[14]||o[15]!==i[15])}export{n as Program};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ResourceType as t}from\"./enums.js\";class e{constructor(e,n){this._context=e,this._desc=n,this._context.instanceCounter.increment(t.Renderbuffer,this);const r=this._context.gl;this.glName=r.createRenderbuffer(),this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,n.internalFormat,n.width,n.height)}get descriptor(){return this._desc}resize(t,e){const n=this._desc;if(n.width===t&&n.height===e)return;n.width=t,n.height=e;const r=this._context.gl;this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,n.internalFormat,n.width,n.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(t.Renderbuffer,this),this._context=null)}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"./reservedWordsGLSL3.js\";import{o as e,l as a,b as r}from\"../../chunks/builtins.js\";var n=999,o=9999,i=0,s=1,c=2,d=3,p=4,f=5,u=6,l=7,h=8,y=9,w=10,g=11,k=[\"block-comment\",\"line-comment\",\"preprocessor\",\"operator\",\"integer\",\"float\",\"ident\",\"builtin\",\"keyword\",\"whitespace\",\"eof\",\"integer\"];function m(){var t,m,b,_=0,v=0,x=n,j=[],E=[],O=1,L=0,D=0,G=!1,T=!1,X=\"\";return function(t){return E=[],null!==t?P(t.replace?t.replace(/\\r\\n/g,\"\\n\"):t):C()};function F(t){t.length&&E.push({type:k[x],data:t,position:D,line:O,column:L})}function P(e){var a;for(_=0,b=(X+=e).length;t=X[_],_<b;){switch(a=_,x){case i:_=$();break;case s:_=V();break;case c:_=M();break;case d:_=z();break;case p:_=Z();break;case g:_=W();break;case f:_=q();break;case o:_=B();break;case y:_=A();break;case n:_=S()}if(a!==_)if(\"\\n\"===X[a])L=0,++O;else++L}return v+=_,X=X.slice(_),E}function C(t){return j.length&&F(j.join(\"\")),x=w,F(\"(eof)\"),E}function S(){return j=j.length?[]:j,\"/\"===m&&\"*\"===t?(D=v+_-1,x=i,m=t,_+1):\"/\"===m&&\"/\"===t?(D=v+_-1,x=s,m=t,_+1):\"#\"===t?(x=c,D=v+_,_):/\\s/.test(t)?(x=y,D=v+_,_):(G=/\\d/.test(t),T=/[^\\w_]/.test(t),D=v+_,x=G?p:T?d:o,_)}function A(){return/[^\\s]/g.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function M(){return\"\\r\"!==t&&\"\\n\"!==t||\"\\\\\"===m?(j.push(t),m=t,_+1):(F(j.join(\"\")),x=n,_)}function V(){return M()}function $(){return\"/\"===t&&\"*\"===m?(j.push(t),F(j.join(\"\")),x=n,_+1):(j.push(t),m=t,_+1)}function z(){if(\".\"===m&&/\\d/.test(t))return x=f,_;if(\"/\"===m&&\"*\"===t)return x=i,_;if(\"/\"===m&&\"/\"===t)return x=s,_;if(\".\"===t&&j.length){for(;I(j););return x=f,_}if(\";\"===t||\")\"===t||\"(\"===t){if(j.length)for(;I(j););return F(t),x=n,_+1}var e=2===j.length&&\"=\"!==t;if(/[\\w_\\d\\s]/.test(t)||e){for(;I(j););return x=n,_}return j.push(t),m=t,_+1}function I(t){for(var a,r,n=0;;){if(a=e.indexOf(t.slice(0,t.length+n).join(\"\")),r=e[a],-1===a){if(n--+t.length>0)continue;r=t.slice(0,1).join(\"\")}return F(r),D+=r.length,(j=j.slice(r.length)).length}}function W(){return/[^a-fA-F0-9]/.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function Z(){return\".\"===t||/[eE]/.test(t)?(j.push(t),x=f,m=t,_+1):\"x\"===t&&1===j.length&&\"0\"===j[0]?(x=g,j.push(t),m=t,_+1):/[^\\d]/.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function q(){return\"f\"===t&&(j.push(t),m=t,_+=1),/[eE]/.test(t)||\"-\"===t&&/[eE]/.test(m)?(j.push(t),m=t,_+1):/[^\\d]/.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function B(){if(/[^\\d\\w_]/.test(t)){var e=j.join(\"\");return x=a.indexOf(e)>-1?h:r.indexOf(e)>-1?l:u,F(j.join(\"\")),x=n,_}return j.push(t),m=t,_+1}}function b(t){var e=m(),a=[];return a=(a=a.concat(e(t))).concat(e(null))}function _(t){return b(t)}function v(t){return t.map((t=>\"eof\"!==t.type?t.data:\"\")).join(\"\")}const x=[\"GL_OES_standard_derivatives\",\"GL_EXT_frag_depth\",\"GL_EXT_draw_buffers\",\"GL_EXT_shader_texture_lod\"];function j(t,e=\"100\",a=\"300 es\"){const r=/^\\s*\\#version\\s+([0-9]+(\\s+[a-zA-Z]+)?)\\s*/;for(const n of t)if(\"preprocessor\"===n.type){const t=r.exec(n.data);if(t){const r=t[1].replace(/\\s\\s+/g,\" \");if(r===a)return r;if(r===e)return n.data=\"#version \"+a,e;throw new Error(\"unknown glsl version: \"+r)}}return t.splice(0,0,{type:\"preprocessor\",data:\"#version \"+a},{type:\"whitespace\",data:\"\\n\"}),null}function E(t,e){for(let a=e-1;a>=0;a--){const e=t[a];if(\"whitespace\"!==e.type&&\"block-comment\"!==e.type){if(\"keyword\"!==e.type)break;if(\"attribute\"===e.data||\"in\"===e.data)return!0}}return!1}function O(t,e,a,r){r=r||a;for(const n of t)if(\"ident\"===n.type&&n.data===a){r in e?e[r]++:e[r]=0;return O(t,e,r+\"_\"+e[r],r)}return a}function L(t,e,a=\"afterVersion\"){function r(t,e){for(let a=e;a<t.length;a++){const e=t[a];if(\"operator\"===e.type&&\";\"===e.data)return a}return null}function n(t){let e=-1,n=0,o=-1;for(let i=0;i<t.length;i++){const s=t[i];if(\"preprocessor\"===s.type&&(s.data.match(/\\#(if|ifdef|ifndef)\\s+.+/)?++n:s.data.match(/\\#endif\\s*.*/)&&--n),\"afterVersion\"!==a&&\"afterPrecision\"!==a||\"preprocessor\"===s.type&&/^#version/.test(s.data)&&(o=Math.max(o,i)),\"afterPrecision\"===a&&\"keyword\"===s.type&&\"precision\"===s.data){const e=r(t,i);if(null===e)throw new Error(\"precision statement not followed by any semicolons!\");o=Math.max(o,e)}e<o&&0===n&&(e=i)}return e+1}const o={data:\"\\n\",type:\"whitespace\"},i=e=>e<t.length&&/[^\\r\\n]$/.test(t[e].data);let s=n(t);i(s-1)&&t.splice(s++,0,o);for(const c of e)t.splice(s++,0,c);i(s-1)&&i(s)&&t.splice(s,0,o)}function D(t,e,a,r=\"lowp\"){L(t,[{type:\"keyword\",data:\"out\"},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:r},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:a},{type:\"whitespace\",data:\" \"},{type:\"ident\",data:e},{type:\"operator\",data:\";\"}],\"afterPrecision\")}function G(t,e,a,r,n=\"lowp\"){L(t,[{type:\"keyword\",data:\"layout\"},{type:\"operator\",data:\"(\"},{type:\"keyword\",data:\"location\"},{type:\"whitespace\",data:\" \"},{type:\"operator\",data:\"=\"},{type:\"whitespace\",data:\" \"},{type:\"integer\",data:r.toString()},{type:\"operator\",data:\")\"},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:\"out\"},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:n},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:a},{type:\"whitespace\",data:\" \"},{type:\"ident\",data:e},{type:\"operator\",data:\";\"}],\"afterPrecision\")}function T(t,e){let a,r,n=-1;for(let o=e;o<t.length;o++){const e=t[o];if(\"operator\"===e.type&&(\"[\"===e.data&&(a=o),\"]\"===e.data)){r=o;break}\"integer\"===e.type&&(n=parseInt(e.data,10))}return a&&r&&t.splice(a,r-a+1),n}function X(e,a){const r=_(e);if(\"300 es\"===j(r,\"100\",\"300 es\"))throw new Error(\"shader is already glsl 300 es\");let n=null,o=null;const i={},s={};for(let c=0;c<r.length;++c){const e=r[c];switch(e.type){case\"keyword\":35633===a&&\"attribute\"===e.data?e.data=\"in\":\"varying\"===e.data&&(e.data=35633===a?\"out\":\"in\");break;case\"builtin\":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(e.data.trim())&&(e.data=e.data.replace(/(2D|Cube|EXT)/g,\"\")),35632===a&&\"gl_FragColor\"===e.data&&(n||(n=O(r,i,\"fragColor\"),D(r,n,\"vec4\")),e.data=n),35632===a&&\"gl_FragData\"===e.data){const t=T(r,c+1),a=O(r,i,\"fragData\");G(r,a,\"vec4\",t,\"mediump\"),e.data=a}else 35632===a&&\"gl_FragDepthEXT\"===e.data&&(o||(o=O(r,i,\"gl_FragDepth\")),e.data=o);break;case\"ident\":if(t.indexOf(e.data)>=0){if(35633===a&&E(r,c))throw new Error(\"attribute in vertex shader uses a name that is a reserved word in glsl 300 es\");e.data in s||(s[e.data]=O(r,i,e.data)),e.data=s[e.data]}}}for(let t=r.length-1;t>=0;--t){const e=r[t];if(\"preprocessor\"===e.type){const a=e.data.match(/\\#extension\\s+(.*)\\:/);if(a&&a[1]&&x.indexOf(a[1].trim())>=0){const e=r[t+1];r.splice(t,e&&\"whitespace\"===e.type?2:1)}const n=e.data.match(/\\#ifdef\\s+(.*)/);n&&n[1]&&x.indexOf(n[1].trim())>=0&&(e.data=\"#if 1\");const o=e.data.match(/\\#ifndef\\s+(.*)/);o&&o[1]&&x.indexOf(o[1].trim())>=0&&(e.data=\"#if 0\")}}return v(r)}export{X as transpileShader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isPowerOfTwo as t}from\"../../core/mathUtils.js\";import{isSome as e}from\"../../core/maybe.js\";import{checkWebGLError as i}from\"./checkWebGLError.js\";import{ResourceType as a}from\"./enums.js\";import r from\"./capabilities/isWebGL2Context.js\";const s=4;class o{constructor(t,e,i=null){this._context=t,this.type=\"texture\",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(a.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...e},34067===this._descriptor.target?this.setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(a.Texture,this))}release(){this.dispose()}resize(t,e){const i=this._descriptor;i.width===t&&i.height===e||(i.width=t,i.height=e,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null))}setDataCubeMap(t=null){for(let e=34069;e<=34074;e++)this.setData(t,e)}setData(t,a=3553){if(!this._context||!this._context.gl)return;const r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||s,this._descriptor.height=this._descriptor.height||s);const p=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES),h=this._descriptor;o._validateTexture(this._context,h),r.pixelStorei(r.UNPACK_ALIGNMENT,h.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha?1:0);const l=h.pixelFormat;let d=h.internalFormat?h.internalFormat:this._deriveInternalFormat(l,h.dataType);if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){let e=t.width,s=t.height;t instanceof HTMLVideoElement&&(e=t.videoWidth,s=t.videoHeight),h.width&&h.height,r.texImage2D(a,0,d,l,h.dataType,t),i(r),h.hasMipmap&&this.generateMipmap(),void 0===h.width&&(h.width=e),void 0===h.height&&(h.height=s)}else{null!=h.width&&null!=h.height||console.error(\"Width and height must be specified!\"),r.DEPTH24_STENCIL8&&d===r.DEPTH_STENCIL&&(d=r.DEPTH24_STENCIL8);let s=h.width,o=h.height;if(n(t)){const e=Math.round(Math.log(Math.max(s,o))/Math.LN2)+1;h.hasMipmap=h.hasMipmap&&e===t.levels.length;for(let i=0;;++i){const e=t.levels[Math.min(i,t.levels.length-1)];if(r.compressedTexImage2D(a,i,d,s,o,0,e),1===s&&1===o||!h.hasMipmap)break;s=Math.max(1,s>>1),o=Math.max(1,o>>1)}}else if(e(t))r.texImage2D(a,0,d,s,o,0,l,h.dataType,t),i(r),h.hasMipmap&&this.generateMipmap();else for(let t=0;r.texImage2D(a,t,d,s,o,0,l,h.dataType,null),i(r),(1!==s||1!==o)&&h.hasMipmap;++t)s=Math.max(1,s>>1),o=Math.max(1,o>>1)}o._applySamplingMode(r,this._descriptor),o._applyWrapMode(r,this._descriptor),o._applyAnisotropicFilteringParameters(this._context,this._descriptor),i(r),this._context.bindTexture(p,o.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,e,i,a,r,s,n=3553){s||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const p=this._context.gl,h=this._descriptor,l=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES);(e<0||i<0||a>h.width||r>h.height||e+a>h.width||i+r>h.height)&&console.error(\"An attempt to update out of bounds of the texture!\"),p.pixelStorei(p.UNPACK_ALIGNMENT,h.unpackAlignment),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.preMultiplyAlpha?1:0),s instanceof ImageData||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement?p.texSubImage2D(n,t,e,i,h.pixelFormat,h.dataType,s):p.texSubImage2D(n,t,e,i,a,r,h.pixelFormat,h.dataType,s),this._context.bindTexture(l,o.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,o._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);const e=this._context.bindTexture(this,o.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(t.target),this._context.bindTexture(e,o.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,o._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._context.gl,e=this._descriptor;this._samplingModeDirty&&(o._applySamplingMode(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(o._applyWrapMode(t,e),this._wrapModeDirty=!1)}_deriveInternalFormat(t,e){if(\"webgl\"===this._context.webglVersion)return t;if(5126===e)switch(t){case 6408:return 34836;case 6407:return 34837;default:throw new Error(\"Unable to derive format\")}return t}static _validateTexture(e,i){(i.width<0||i.height<0)&&console.error(\"Negative dimension parameters are not allowed!\");const a=t(i.width)&&t(i.height);r(e.gl)||a||(\"number\"==typeof i.wrapMode?33071!==i.wrapMode&&console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"):33071===i.wrapMode.s&&33071===i.wrapMode.t||console.error(\"Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!\"),i.hasMipmap&&console.error(\"Mipmapping requires power-of-two textures!\"))}static _applySamplingMode(t,e){let i=e.samplingMode,a=e.samplingMode;9985===i||9987===i?(i=9729,e.hasMipmap||(a=9729)):9984!==i&&9986!==i||(i=9728,e.hasMipmap||(a=9728)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,a)}static _applyWrapMode(t,e){\"number\"==typeof e.wrapMode?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}static _applyAnisotropicFilteringParameters(t,e){var i;const a=t.capabilities.textureFilterAnisotropic;if(!a)return;t.gl.texParameterf(e.target,a.TEXTURE_MAX_ANISOTROPY,null!=(i=e.maxAnisotropy)?i:1)}}function n(t){return e(t)&&\"type\"in t&&\"compressed\"===t.type}o.TEXTURE_UNIT_FOR_UPDATES=0;export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as e}from\"../../core/maybe.js\";function r(e,r){return e.vertexBuffers[r].size/t(e.layout[r])}function t(e){return e[0].stride}function i(e,r,t,i,s){const n=e.gl,o=e.capabilities.instancing;e.bindBuffer(t);for(const a of i){const e=r.get(a.name);void 0===e&&console.error(`There is no location for vertex attribute '${a.name}' defined.`),a.baseInstance&&!a.divisor&&console.error(`Vertex attribute '${a.name}' uses baseInstanceOffset without divisor.`);const t=(s||(0+a.baseInstance?a.baseInstance:0))*a.stride;if(a.count<=4)n.vertexAttribPointer(e,a.count,a.type,a.normalized,a.stride,a.offset+t),n.enableVertexAttribArray(e),a.divisor>0&&o&&o.vertexAttribDivisor(e,a.divisor);else if(9===a.count)for(let r=0;r<3;r++)n.vertexAttribPointer(e+r,3,a.type,a.normalized,a.stride,a.offset+12*r+t),n.enableVertexAttribArray(e+r),a.divisor>0&&o&&o.vertexAttribDivisor(e+r,a.divisor);else if(16===a.count)for(let r=0;r<4;r++)n.vertexAttribPointer(e+r,4,a.type,a.normalized,a.stride,a.offset+16*r+t),n.enableVertexAttribArray(e+r),a.divisor>0&&o&&o.vertexAttribDivisor(e+r,a.divisor);else console.error(\"Unsupported vertex attribute element count: \"+a.count)}}function s(e,r,t,i){const s=e.gl,n=e.capabilities.instancing;e.bindBuffer(t);for(const o of i){const e=r.get(o.name);if(o.count<=4)s.disableVertexAttribArray(e),o.divisor&&o.divisor>0&&n&&n.vertexAttribDivisor(e,0);else if(9===o.count)for(let r=0;r<3;r++)s.disableVertexAttribArray(e+r),o.divisor&&o.divisor>0&&n&&n.vertexAttribDivisor(e+r,0);else if(16===o.count)for(let r=0;r<4;r++)s.disableVertexAttribArray(e+r),o.divisor&&o.divisor>0&&n&&n.vertexAttribDivisor(e+r,0);else console.error(\"Unsupported vertex attribute element count: \"+o.count)}e.unbindBuffer(34962)}function n(e){switch(e){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34837:return 12;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function o(r){if(e(r))return 0;if(\"descriptor\"in r)return r.glName?o(r.descriptor):0;const t=r.internalFormat||\"pixelFormat\"in r&&r.pixelFormat;if(!t)return 0;const i=\"hasMipmap\"in r&&r.hasMipmap?1.3:1,s=r.width*r.height;return n(t)*s*i}export{i as bindVertexBufferLayout,n as getBytesPerElementFormat,o as getGpuMemoryUsage,t as getStride,s as unbindVertexBufferLayout,r as vertexCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Logger.js\";import{isSome as e,disposeMaybe as i}from\"../../core/maybe.js\";import{ResourceType as s}from\"./enums.js\";import{bindVertexBufferLayout as r,unbindVertexBufferLayout as n}from\"./Util.js\";const o=t.getLogger(\"esri.views.webgl.VertexArrayObject\");class f{constructor(t,e,i,r,n=null){this._context=t,this._locations=e,this._layout=i,this._buffers=r,this._indexBuffer=n,this._glName=null,this._initialized=!1,t.instanceCounter.increment(s.VAO,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((t,e)=>t+this._buffers[e].size),e(this._indexBuffer)?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(t=!0){if(!this._context)return void((this._glName||t&&Object.getOwnPropertyNames(this._buffers).length>0)&&o.warn(\"Leaked WebGL VAO\"));if(this._glName){var e,r;const t=null==(e=this._context)||null==(r=e.capabilities)?void 0:r.vao;t?(t.deleteVertexArray(this._glName),this._glName=null):o.warn(\"Leaked WebGL VAO\")}if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),t){for(const t in this._buffers)this._buffers[t].dispose(),delete this._buffers[t];this._indexBuffer=i(this._indexBuffer)}this._context.instanceCounter.decrement(s.VAO,this),this._context=null}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:t,_layout:i,_indexBuffer:s}=this;t||o.error(\"Vertex buffer dictionary is empty!\");const n=this._context.gl;for(const e in t){const s=t[e];s||o.error(\"Vertex buffer is uninitialized!\");const n=i[e];n||o.error(\"Vertex element descriptor is empty!\"),r(this._context,this._locations,s,n)}if(e(s)){!!this._context.capabilities.vao?n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s.glName):this._context.bindBuffer(s)}}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:t,_layout:i}=this;t||o.error(\"Vertex buffer dictionary is empty!\");for(const e in t){const s=t[e];s||o.error(\"Vertex buffer is uninitialized!\");const r=i[e];n(this._context,this._locations,s,r)}e(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/has.js\";import t from\"../../core/Logger.js\";const n=t.getLogger(\"esri/views/webgl\");function o(e,r){switch(r){case e.INVALID_ENUM:return\"Invalid Enum. An unacceptable value has been specified for an enumerated argument.\";case e.INVALID_VALUE:return\"Invalid Value. A numeric argument is out of range.\";case e.INVALID_OPERATION:return\"Invalid Operation. The specified command is not allowed for the current state.\";case e.INVALID_FRAMEBUFFER_OPERATION:return\"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.\";case e.OUT_OF_MEMORY:return\"Out of memory. Not enough memory is left to execute the command.\";case e.CONTEXT_LOST_WEBGL:return\"WebGL context has been lost\";default:return\"Unknown error\"}}const a=!!r(\"enable-feature:webgl-debug\");function u(){return a}function c(){return a}function s(r){if(u()){const t=r.getError();if(t){const a=o(r,t),u=(new Error).stack;n.error(new e(\"webgl-error\",\"WebGL error occured\",{message:a,stack:u}))}}}export{s as checkWebGLError,a as hasFeatureFlagWebGLDebug,u as webglDebugEnabled,c as webglValidateShadersEnabled};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst r=33984;var e;!function(r){r[r.Texture=0]=\"Texture\",r[r.Buffer=1]=\"Buffer\",r[r.VAO=2]=\"VAO\",r[r.Program=3]=\"Program\",r[r.Framebuffer=4]=\"Framebuffer\",r[r.Renderbuffer=5]=\"Renderbuffer\",r[r.COUNT=6]=\"COUNT\"}(e||(e={}));const f=33306;export{r as BASE_TEXTURE_UNIT,f as DepthStencilAttachment,e as ResourceType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,e,i=32774,n=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function e(t,e,i,n,s=32774,l=32774,r=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:n,opRgb:s,opAlpha:l,color:{r:r[0],g:r[1],b:r[2],a:r[3]}}}const i={face:1029,mode:2305},n={face:1028,mode:2305},s=t=>2===t?i:1===t?n:null,l={zNear:0,zFar:1},r={r:!0,g:!0,b:!0,a:!0};function h(t){return I.intern(t)}function o(t){return S.intern(t)}function a(t){return T.intern(t)}function c(t){return O.intern(t)}function d(t){return w.intern(t)}function p(t){return D.intern(t)}function u(t){return A.intern(t)}function _(t){return k.intern(t)}function g(t){return B.intern(t)}class f{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),i=this.interns;return i.has(e)||i.set(e,this.makeRef(t)),i.get(e)}}function v(t){return\"[\"+t.join(\",\")+\"]\"}const I=new f(W,(t=>({__tag:\"Blending\",...t})));function W(t){return t?v([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const S=new f(b,(t=>({__tag:\"Culling\",...t})));function b(t){return t?v([t.face,t.mode]):null}const T=new f(y,(t=>({__tag:\"PolygonOffset\",...t})));function y(t){return t?v([t.factor,t.units]):null}const O=new f(R,(t=>({__tag:\"DepthTest\",...t})));function R(t){return t?v([t.func]):null}const w=new f(C,(t=>({__tag:\"StencilTest\",...t})));function C(t){return t?v([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const D=new f(m,(t=>({__tag:\"DepthWrite\",...t})));function m(t){return t?v([t.zNear,t.zFar]):null}const A=new f(P,(t=>({__tag:\"ColorWrite\",...t})));function P(t){return t?v([t.r,t.g,t.b,t.a]):null}const k=new f(z,(t=>({__tag:\"StencilWrite\",...t})));function z(t){return t?v([t.mask]):null}const B=new f(F,(t=>({blending:h(t.blending),culling:o(t.culling),polygonOffset:a(t.polygonOffset),depthTest:c(t.depthTest),stencilTest:d(t.stencilTest),depthWrite:p(t.depthWrite),colorWrite:u(t.colorWrite),stencilWrite:_(t.stencilWrite)})));function F(t){return t?v([W(t.blending),b(t.culling),y(t.polygonOffset),R(t.depthTest),C(t.stencilTest),m(t.depthWrite),P(t.colorWrite),z(t.stencilWrite)]):null}class K{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this.setBlending(t.blending),this.setCulling(t.culling),this.setPolygonOffset(t.polygonOffset),this.setDepthTest(t.depthTest),this.setStencilTest(t.stencilTest),this.setDepthWrite(t.depthWrite),this.setColorWrite(t.colorWrite),this.setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(t){this._blending=this.setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(t){this._culling=this.setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(t){this._polygonOffset=this.setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(t){this._depthTest=this.setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(t){this._stencilTest=this.setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(t){this._depthWrite=this.setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(t){this._colorWrite=this.setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(t){this._stencilWrite=this.setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}export{K as StateTracker,i as backFaceCullingParams,s as cullingParams,r as defaultColorWriteParams,l as defaultDepthWriteParams,n as frontFaceCullingParams,h as makeBlending,u as makeColorWrite,o as makeCulling,c as makeDepthTest,p as makeDepthWrite,g as makePipelineState,a as makePolygonOffset,d as makeStencilTest,_ as makeStencilWrite,e as separateBlendingParams,t as simpleBlendingParams};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nvar e=[\"layout\",\"centroid\",\"smooth\",\"case\",\"mat2x2\",\"mat2x3\",\"mat2x4\",\"mat3x2\",\"mat3x3\",\"mat3x4\",\"mat4x2\",\"mat4x3\",\"mat4x4\",\"uint\",\"uvec2\",\"uvec3\",\"uvec4\",\"samplerCubeShadow\",\"sampler2DArray\",\"sampler2DArrayShadow\",\"isampler2D\",\"isampler3D\",\"isamplerCube\",\"isampler2DArray\",\"usampler2D\",\"usampler3D\",\"usamplerCube\",\"usampler2DArray\",\"coherent\",\"restrict\",\"readonly\",\"writeonly\",\"resource\",\"atomic_uint\",\"noperspective\",\"patch\",\"sample\",\"subroutine\",\"common\",\"partition\",\"active\",\"filter\",\"image1D\",\"image2D\",\"image3D\",\"imageCube\",\"iimage1D\",\"iimage2D\",\"iimage3D\",\"iimageCube\",\"uimage1D\",\"uimage2D\",\"uimage3D\",\"uimageCube\",\"image1DArray\",\"image2DArray\",\"iimage1DArray\",\"iimage2DArray\",\"uimage1DArray\",\"uimage2DArray\",\"image1DShadow\",\"image2DShadow\",\"image1DArrayShadow\",\"image2DArrayShadow\",\"imageBuffer\",\"iimageBuffer\",\"uimageBuffer\",\"sampler1DArray\",\"sampler1DArrayShadow\",\"isampler1D\",\"isampler1DArray\",\"usampler1D\",\"usampler1DArray\",\"isampler2DRect\",\"usampler2DRect\",\"samplerBuffer\",\"isamplerBuffer\",\"usamplerBuffer\",\"sampler2DMS\",\"isampler2DMS\",\"usampler2DMS\",\"sampler2DMSArray\",\"isampler2DMSArray\",\"usampler2DMSArray\",\"trunc\",\"round\",\"roundEven\",\"isnan\",\"isinf\",\"floatBitsToInt\",\"floatBitsToUint\",\"intBitsToFloat\",\"uintBitsToFloat\",\"packSnorm2x16\",\"unpackSnorm2x16\",\"packUnorm2x16\",\"unpackUnorm2x16\",\"packHalf2x16\",\"unpackHalf2x16\",\"outerProduct\",\"transpose\",\"determinant\",\"inverse\",\"texture\",\"textureSize\",\"textureProj\",\"textureLod\",\"textureOffset\",\"texelFetch\",\"texelFetchOffset\",\"textureProjOffset\",\"textureLodOffset\",\"textureProjLod\",\"textureProjLodOffset\",\"textureGrad\",\"textureGradOffset\",\"textureProjGrad\",\"textureProjGradOffset\"];export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{blendingAlpha as e}from\"../3d/webgl-engine/lib/OrderIndependentTransparency.js\";import t from\"./BufferObject.js\";import r from\"./FramebufferObject.js\";import{Program as n}from\"./Program.js\";import{makePipelineState as o}from\"./renderState.js\";import i from\"./VertexArrayObject.js\";var a,u,f,l={exports:{}};function c(a){var u,f,c,s,d;if(!a.gl)return!1;if(\"webgl\"===a.webglVersion)return(null==(s=a.capabilities.textureFloat)?void 0:s.textureFloat)&&(null==(d=a.capabilities.colorBufferFloat)?void 0:d.textureFloat);if(!((null==(u=a.capabilities.textureFloat)?void 0:u.textureFloat)&&(null==(f=a.capabilities.colorBufferFloat)?void 0:f.textureFloat)&&(null==(c=a.capabilities.colorBufferFloat)?void 0:c.floatBlend)))return!1;const g=new r(a,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5126,internalFormat:34836,samplingMode:9728,width:1,height:1}),b=t.createVertex(a,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new i(a,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:b}),m=new n(a,\"\\n  precision highp float;\\n  attribute vec2 a_pos;\\n\\n  void main() {\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n   precision highp float;\\n\\n   void main() {\\n    gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\\n   }\\n  \",new Map([[\"a_pos\",0]]));a.useProgram(m);const E=a.getBoundFramebufferObject(),{x:v,y:T,width:F,height:_}=a.getViewport();a.bindFramebuffer(g),a.setViewport(0,0,1,1),a.bindVAO(p),a.drawArrays(5,0,4);const x=o({blending:e});a.setPipelineState(x),a.drawArrays(5,0,4),l.exports.init(a);const h=a.gl.getError();return a.setViewport(v,T,F,_),a.bindFramebuffer(E),m.dispose(),p.dispose(!1),b.dispose(),g.dispose(),1282!==h||(console.warn(\"Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back.\"),!1)}a=l,u=function(){var e=function(e){window.console&&window.console.log&&window.console.log(e)},t=function(t){window.console&&window.console.error?window.console.error(t):e(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:[\"COLOR_BUFFER_BIT\",\"DEPTH_BUFFER_BIT\",\"STENCIL_BUFFER_BIT\"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},n=null,o=null;function i(e){if(null==n)for(var t in n={},o={},e)\"number\"==typeof e[t]&&(n[e[t]]=t,o[t]=e[t])}function a(){if(null==n)throw\"WebGLDebugUtils.init(ctx) not called\"}function u(e){return a(),void 0!==n[e]}function f(e){a();var t=n[e];return void 0!==t?\"gl.\"+t:\"/*UNKNOWN WebGL ENUM*/ 0x\"+e.toString(16)}function l(e,t,n,i){var a;if(void 0!==(a=r[e])&&void 0!==(a=a[t])&&a[n]){if(\"object\"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var u=a[n].enumBitwiseOr,l=0,c=[],s=0;s<u.length;++s){var d=o[u[s]];0!=(i&d)&&(l|=d,c.push(f(d)))}return l===i?c.join(\" | \"):f(i)}return f(i)}return null===i?\"null\":void 0===i?\"undefined\":i.toString()}function c(e,t){for(var r=\"\",n=t.length,o=0;o<n;++o)r+=(0==o?\"\":\", \")+l(e,n,o,t[o]);return r}function s(e,t,r){e.__defineGetter__(r,(function(){return t[r]})),e.__defineSetter__(r,(function(e){t[r]=e}))}function d(e,r,n,o){o=o||e,i(e),r=r||function(e,r,n){for(var o=\"\",i=n.length,a=0;a<i;++a)o+=(0==a?\"\":\", \")+l(r,i,a,n[a]);t(\"WebGL error \"+f(e)+\" in \"+r+\"(\"+o+\")\")};var a={};function u(e,t){return function(){n&&n(t,arguments);var i=e[t].apply(e,arguments),u=o.getError();return 0!=u&&(a[u]=!0,r(u,t,arguments)),i}}var c={};for(var g in e)if(\"function\"==typeof e[g])if(\"getExtension\"!=g)c[g]=u(e,g);else{var b=u(e,g);c[g]=function(){return d(b.apply(e,arguments),r,n,o)}}else s(c,e,g);return c.getError=function(){for(var t in a)if(a.hasOwnProperty(t)&&a[t])return a[t]=!1,t;return e.NO_ERROR},c}function g(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(r);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(n=0;n<o;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function b(e){var t,r,n=[],o=[],i={},a=1,u=!1,f=[],l=0,c=0,d=!1,b=0,p={};function m(e){return\"function\"==typeof e?e:function(t){e.handleEvent(t)}}e.getContext=(r=e.getContext,function(){var n=r.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=t){if(t)throw\"got different context\";i=R(t=n)}return i}return n});var E=function(e){n.push(m(e))},v=function(e){o.push(m(e))};function T(e){var t=e.addEventListener;e.addEventListener=function(r,n,o){switch(r){case\"webglcontextlost\":E(n);break;case\"webglcontextrestored\":v(n);break;default:t.apply(e,arguments)}}}function F(){for(var e=Object.keys(p),t=0;t<e.length;++t)delete p[e]}function _(){++c,u||l==c&&e.loseContext()}function x(e,t){var r=e[t];return function(){if(_(),!u)return r.apply(e,arguments)}}function h(){for(var e=0;e<f.length;++e){var r=f[e];r instanceof WebGLBuffer?t.deleteBuffer(r):r instanceof WebGLFramebuffer?t.deleteFramebuffer(r):r instanceof WebGLProgram?t.deleteProgram(r):r instanceof WebGLRenderbuffer?t.deleteRenderbuffer(r):r instanceof WebGLShader?t.deleteShader(r):r instanceof WebGLTexture&&t.deleteTexture(r)}}function A(e){return{statusMessage:e,preventDefault:function(){d=!0}}}return T(e),e.loseContext=function(){if(!u){for(u=!0,l=0,++a;t.getError(););F(),p[t.CONTEXT_LOST_WEBGL]=!0;var r=A(\"context lost\"),o=n.slice();setTimeout((function(){for(var t=0;t<o.length;++t)o[t](r);b>=0&&setTimeout((function(){e.restoreContext()}),b)}),0)}},e.restoreContext=function(){u&&o.length&&setTimeout((function(){if(!d)throw\"can not restore. webglcontestlost listener did not call event.preventDefault\";h(),g(t),u=!1,c=0,d=!1;for(var e=o.slice(),r=A(\"context restored\"),n=0;n<e.length;++n)e[n](r)}),0)},e.loseContextInNCalls=function(e){if(u)throw\"You can not ask a lost contet to be lost\";l=c+e},e.getNumCalls=function(){return c},e.setRestoreTimeout=function(e){b=e},e;function R(e){for(var r in e)\"function\"==typeof e[r]?i[r]=x(e,r):s(i,e,r);i.getError=function(){if(_(),!u)for(;e=t.getError();)p[e]=!0;for(var e in p)if(p[e])return delete p[e],e;return i.NO_ERROR};for(var n=[\"createBuffer\",\"createFramebuffer\",\"createProgram\",\"createRenderbuffer\",\"createShader\",\"createTexture\"],o=0;o<n.length;++o){var l=n[o];i[l]=function(t){return function(){if(_(),u)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=a,f.push(r),r}}(e[l])}var c=[\"getActiveAttrib\",\"getActiveUniform\",\"getBufferParameter\",\"getContextAttributes\",\"getAttachedShaders\",\"getFramebufferAttachmentParameter\",\"getParameter\",\"getProgramParameter\",\"getProgramInfoLog\",\"getRenderbufferParameter\",\"getShaderParameter\",\"getShaderInfoLog\",\"getShaderSource\",\"getTexParameter\",\"getUniform\",\"getUniformLocation\",\"getVertexAttrib\"];for(o=0;o<c.length;++o)l=c[o],i[l]=function(t){return function(){return _(),u?null:t.apply(e,arguments)}}(i[l]);var d=[\"isBuffer\",\"isEnabled\",\"isFramebuffer\",\"isProgram\",\"isRenderbuffer\",\"isShader\",\"isTexture\"];for(o=0;o<d.length;++o)l=d[o],i[l]=function(t){return function(){return _(),!u&&t.apply(e,arguments)}}(i[l]);return i.checkFramebufferStatus=function(t){return function(){return _(),u?i.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(i.checkFramebufferStatus),i.getAttribLocation=function(t){return function(){return _(),u?-1:t.apply(e,arguments)}}(i.getAttribLocation),i.getVertexAttribOffset=function(t){return function(){return _(),u?0:t.apply(e,arguments)}}(i.getVertexAttribOffset),i.isContextLost=function(){return u},i}}return{init:i,mightBeEnum:u,glEnumToString:f,glFunctionArgToString:l,glFunctionArgsToString:c,makeDebugContext:d,makeLostContextSimulatingCanvas:b,resetToInitialState:g}},void 0!==(f=u())&&(a.exports=f);export{c as testFloatBufferBlend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"./BufferObject.js\";import t from\"./FramebufferObject.js\";import{Program as r}from\"./Program.js\";import i from\"./Texture.js\";import o from\"./VertexArrayObject.js\";async function n(n){const a=new Image;if(a.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",a.width=5,a.height=5,await a.decode(),!n.gl)return!0;const s=new t(n,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=e.createVertex(n,35044,new Uint16Array([0,0,1,0,0,1,1,1])),m=new o(n,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),d=new r(n,\"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \",new Map([[\"a_pos\",0]]));n.useProgram(d);const g=new i(n,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},a);n.bindTexture(g,0),d.setUniform1i(\"u_texture\",0);const c=n.getBoundFramebufferObject(),{x:u,y:f,width:w,height:l}=n.getViewport();n.bindFramebuffer(s),n.setViewport(0,0,1,1),n.bindVAO(m),n.drawArrays(5,0,4);const v=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,v),d.dispose(),m.dispose(!1),p.dispose(),s.dispose(),g.dispose(),n.setViewport(u,f,w,l),n.bindFramebuffer(c),a.src=\"\",255===v[0]}export{n as testSVGPremultipliedAlpha};\n"],"sourceRoot":""}