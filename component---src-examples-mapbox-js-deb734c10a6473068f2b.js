/*! For license information please see component---src-examples-mapbox-js-deb734c10a6473068f2b.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{BIHw:function(t,e,r){"use strict";var n=r("I+eb"),i=r("or9q"),o=r("ewvW"),a=r("UMSQ"),u=r("ppGB"),s=r("ZfDv");n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),r=a(e.length),n=s(e,0);return n.length=i(n,e,e,r,0,void 0===t?1:u(t)),n}})},QGkA:function(t,e,r){r("RNIs")("flat")},kHIg:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("foSv"),i=r("s4An");var o=r("RHh3");function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return Object(o.a)(t,arguments,Object(n.a)(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(a,t)})(t)}},lH08:function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(T){s=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),u=new j(i||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(T){return{type:"throw",arg:T}}}t.wrap=c;var h={};function f(){}function d(){}function g(){}var p={};s(p,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(_([])));y&&y!==e&&r.call(y,o)&&(p=y);var m=g.prototype=f.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,u){var s=l(t[i],t,o);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function x(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return C()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=k(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=g,n(m,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:d,configurable:!0}),d.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(w.prototype),s(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(m),s(m,u,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}(t.exports);try{regeneratorRuntime=n}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},oInV:function(t,e,r){"use strict";r.r(e);var n=r("dI71"),i=r("q1tI"),o=r.n(i),a=r("lxDd"),u=r("o0o1"),s=r.n(u),c=(r("lH08"),r("HaE+")),l=r("O8i2"),h=r.n(l),f=r("rePB"),d=r("udoT"),g=r("CtJ5"),p=r("lILb"),v=r("3ghQ"),y=r("0mpS");function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){Object(f.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t){var e=t.map,r=t.gl,n=t.deck;if(e.__deck)return e.__deck;var i,o,a,u=null==n?void 0:n.props._customRender,s=(i=b(b({},null==n?void 0:n.props),{},{_customRender:function(){e.triggerRepaint(),null==u||u("")}}),o=!("useDevicePixels"in i)||i.useDevicePixels,b(b({},i),{},{useDevicePixels:o,parameters:b({depthMask:!0,depthTest:!0,blend:!0,blendFunc:[y.a.SRC_ALPHA,y.a.ONE_MINUS_SRC_ALPHA,y.a.ONE,y.a.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthFunc:y.a.LEQUAL,blendEquation:y.a.FUNC_ADD},i.parameters),views:i.views||[new g.a({id:"mapbox"})]}));return n&&n.props.gl!==r||(Object.assign(s,{gl:r,width:null,height:null,touchAction:"unset",viewState:x(e)}),e.on("move",(function(){return function(t,e){t.setProps({viewState:x(e)}),t.needsRedraw({clearRedrawFlags:!0})}(a,e)}))),n?(a=n,n.setProps(s),n.userData.isExternal=!0):(a=new d.a(s),e.on("remove",(function(){a.finalize(),e.__deck=null}))),a.userData.mapboxLayers=new Set,a.userData.mapboxVersion=function(t){var e=0,r=0,n=t.version;if(n){var i=n.split(".").slice(0,2).map(Number);e=i[0],r=i[1]}return{major:e,minor:r}}(e),e.__deck=a,e.on("render",(function(){a.isInitialized&&function(t,e){var r=t.userData,n=r.mapboxLayers;if(r.isExternal){var i=Array.from(n,(function(t){return t.id})),o=Object(v.b)(t.props.layers,Boolean).some((function(t){return t&&!i.includes(t.id)})),a=t.getViewports(),u=a.findIndex((function(t){return"mapbox"===t.id})),s=a.length>1||u<0;(o||s)&&(u>=0&&((a=a.slice())[u]=k(t,e,!1)),t._drawLayers("mapbox-repaint",{viewports:a,layerFilter:function(e){return(!t.props.layerFilter||t.props.layerFilter(e))&&("mapbox"!==e.viewport.id||!i.includes(e.layer.id))},clearCanvas:!1}))}t.userData.currentViewport=null}(a,e)})),a}function x(t){var e=t.getCenter();return{longitude:(e.lng+540)%360-180,latitude:e.lat,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()}}function k(t,e,r){void 0===r&&(r=!0);var n=t.userData.mapboxVersion;return new p.a(Object.assign({id:"mapbox",x:0,y:0,width:t.width,height:t.height},x(e),r?{nearZMultiplier:1===n.major&&n.minor>=3||n.major>=2?.02:1/(t.height||1)}:{nearZMultiplier:.1}))}function M(t){if(!t.userData.isExternal){var e=[];t.userData.mapboxLayers.forEach((function(t){var r=new(0,t.props.type)(t.props);e.push(r)})),t.setProps({layers:e})}}var O=function(){function t(t){if(!t.id)throw new Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}var e=t.prototype;return e.onAdd=function(t,e){var r,n;this.map=t,this.deck=w({map:t,gl:e,deck:this.props.deck}),r=this.deck,n=this,r.userData.mapboxLayers.add(n),M(r)},e.onRemove=function(){var t,e;this.deck&&(t=this.deck,e=this,t.userData.mapboxLayers.delete(e),M(t))},e.setProps=function(t){Object.assign(this.props,t,{id:this.id}),this.deck&&M(this.deck)},e.render=function(){var t,e,r,n,i;t=this.deck,e=this.map,r=this,n=t.userData.currentViewport,i=!1,n||(n=k(t,e,!0),t.userData.currentViewport=n,i=!0),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[n],layerFilter:function(t){var e=t.layer;return r.id===e.id},clearStack:i,clearCanvas:!1})},t}(),j=r("dpS0"),_=r("rZG1"),C=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},T=function(t){var e;return 1===t.length&&(e=t,t=function(t,r){return C(e(t),r)}),{left:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}};var D=T(C),A=D.right,E=(D.left,A);var S=Array.prototype,U=(S.slice,S.map,Math.sqrt(50)),R=Math.sqrt(10),F=Math.sqrt(2),L=function(t,e,r){var n,i,o,a,u=-1;if(r=+r,(t=+t)===(e=+e)&&r>0)return[t];if((n=e<t)&&(i=t,t=e,e=i),0===(a=N(t,e,r))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return n&&o.reverse(),o};function N(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return i>=0?(o>=U?10:o>=R?5:o>=F?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=U?10:o>=R?5:o>=F?2:1)}function P(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function I(){}function B(t,e){var r=new I;if(t instanceof I)t.each((function(t,e){r.set(e,t)}));else if(Array.isArray(t)){var n,i=-1,o=t.length;if(null==e)for(;++i<o;)r.set(i,t[i]);else for(;++i<o;)r.set(e(n=t[i],i,t),n)}else if(t)for(var a in t)r.set(a,t[a]);return r}I.prototype=B.prototype={constructor:I,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var H=B;function q(){}var Y=H.prototype;function z(t,e){var r=new q;if(t instanceof q)t.each((function(t){r.add(t)}));else if(t){var n=-1,i=t.length;if(null==e)for(;++n<i;)r.add(t[n]);else for(;++n<i;)r.add(e(t[n],n,t))}return r}q.prototype=z.prototype={constructor:q,has:Y.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Y.remove,clear:Y.clear,values:Y.keys,size:Y.size,empty:Y.empty,each:Y.each};var $=Array.prototype,Z=$.map,V=$.slice;var G=function(t,e,r){t.prototype=e.prototype=r,r.constructor=t};function W(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function J(){}var Q="\\s*([+-]?\\d+)\\s*",X="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",K="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tt=/^#([0-9a-f]{3,8})$/,et=new RegExp("^rgb\\("+[Q,Q,Q]+"\\)$"),rt=new RegExp("^rgb\\("+[K,K,K]+"\\)$"),nt=new RegExp("^rgba\\("+[Q,Q,Q,X]+"\\)$"),it=new RegExp("^rgba\\("+[K,K,K,X]+"\\)$"),ot=new RegExp("^hsl\\("+[X,K,K]+"\\)$"),at=new RegExp("^hsla\\("+[X,K,K,X]+"\\)$"),ut={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function st(){return this.rgb().formatHex()}function ct(){return this.rgb().formatRgb()}function lt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=tt.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?ht(e):3===r?new pt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?ft(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?ft(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=et.exec(t))?new pt(e[1],e[2],e[3],1):(e=rt.exec(t))?new pt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=nt.exec(t))?ft(e[1],e[2],e[3],e[4]):(e=it.exec(t))?ft(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ot.exec(t))?bt(e[1],e[2]/100,e[3]/100,1):(e=at.exec(t))?bt(e[1],e[2]/100,e[3]/100,e[4]):ut.hasOwnProperty(t)?ht(ut[t]):"transparent"===t?new pt(NaN,NaN,NaN,0):null}function ht(t){return new pt(t>>16&255,t>>8&255,255&t,1)}function ft(t,e,r,n){return n<=0&&(t=e=r=NaN),new pt(t,e,r,n)}function dt(t){return t instanceof J||(t=lt(t)),t?new pt((t=t.rgb()).r,t.g,t.b,t.opacity):new pt}function gt(t,e,r,n){return 1===arguments.length?dt(t):new pt(t,e,r,null==n?1:n)}function pt(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function vt(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)}function yt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function mt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bt(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new xt(t,e,r,n)}function wt(t){if(t instanceof xt)return new xt(t.h,t.s,t.l,t.opacity);if(t instanceof J||(t=lt(t)),!t)return new xt;if(t instanceof xt)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),a=NaN,u=o-i,s=(o+i)/2;return u?(a=e===o?(r-n)/u+6*(r<n):r===o?(n-e)/u+2:(e-r)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new xt(a,u,s,t.opacity)}function xt(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function kt(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}function Mt(t,e,r,n,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*r+(1+3*t+3*o-3*a)*n+a*i)/6}G(J,lt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:st,formatHex:st,formatHsl:function(){return wt(this).formatHsl()},formatRgb:ct,toString:ct}),G(pt,gt,W(J,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vt,formatHex:vt,formatRgb:yt,toString:yt})),G(xt,(function(t,e,r,n){return 1===arguments.length?wt(t):new xt(t,e,r,null==n?1:n)}),W(J,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new pt(kt(t>=240?t-240:t+120,i,n),kt(t,i,n),kt(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ot=function(t){return function(){return t}};function jt(t,e){return function(r){return t+r*e}}function _t(t){return 1==(t=+t)?Ct:function(e,r){return r-e?function(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}(e,r,t):Ot(isNaN(e)?r:e)}}function Ct(t,e){var r=e-t;return r?jt(t,r):Ot(isNaN(t)?e:t)}var Tt=function t(e){var r=_t(e);function n(t,e){var n=r((t=gt(t)).r,(e=gt(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=Ct(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return n.gamma=t,n}(1);function Dt(t){return function(e){var r,n,i=e.length,o=new Array(i),a=new Array(i),u=new Array(i);for(r=0;r<i;++r)n=gt(e[r]),o[r]=n.r||0,a[r]=n.g||0,u[r]=n.b||0;return o=t(o),a=t(a),u=t(u),n.opacity=1,function(t){return n.r=o(t),n.g=a(t),n.b=u(t),n+""}}}Dt((function(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],o=t[n+1],a=n>0?t[n-1]:2*i-o,u=n<e-1?t[n+2]:2*o-i;return Mt((r-n/e)*e,a,i,o,u)}})),Dt((function(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],o=t[n%e],a=t[(n+1)%e],u=t[(n+2)%e];return Mt((r-n/e)*e,i,o,a,u)}}));var At=function(t,e){e||(e=[]);var r,n=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}};function Et(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function St(t,e){var r,n=e?e.length:0,i=t?Math.min(n,t.length):0,o=new Array(i),a=new Array(n);for(r=0;r<i;++r)o[r]=It(t[r],e[r]);for(;r<n;++r)a[r]=e[r];return function(t){for(r=0;r<i;++r)a[r]=o[r](t);return a}}var Ut=function(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}},Rt=function(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}},Ft=function(t,e){var r,n={},i={};for(r in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)r in t?n[r]=It(t[r],e[r]):i[r]=e[r];return function(t){for(r in n)i[r]=n[r](t);return i}},Lt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nt=new RegExp(Lt.source,"g");var Pt=function(t,e){var r,n,i,o=Lt.lastIndex=Nt.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(r=Lt.exec(t))&&(n=Nt.exec(e));)(i=n.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(r=r[0])===(n=n[0])?u[a]?u[a]+=n:u[++a]=n:(u[++a]=null,s.push({i:a,x:Rt(r,n)})),o=Nt.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var r,n=0;n<e;++n)u[(r=s[n]).i]=r.x(t);return u.join("")})},It=function(t,e){var r,n=typeof e;return null==e||"boolean"===n?Ot(e):("number"===n?Rt:"string"===n?(r=lt(e))?(e=r,Tt):Pt:e instanceof lt?Tt:e instanceof Date?Ut:Et(e)?At:Array.isArray(e)?St:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ft:Rt)(t,e)},Bt=function(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}},Ht=function(t){return+t},qt=[0,1];function Yt(t){return t}function zt(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:(r=isNaN(e)?NaN:.5,function(){return r});var r}function $t(t){var e,r=t[0],n=t[t.length-1];return r>n&&(e=r,r=n,n=e),function(t){return Math.max(r,Math.min(n,t))}}function Zt(t,e,r){var n=t[0],i=t[1],o=e[0],a=e[1];return i<n?(n=zt(i,n),o=r(a,o)):(n=zt(n,i),o=r(o,a)),function(t){return o(n(t))}}function Vt(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=zt(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(e){var r=E(t,e,1,n)-1;return o[r](i[r](e))}}function Gt(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Wt(){var t,e,r,n,i,o,a=qt,u=qt,s=It,c=Yt;function l(){return n=Math.min(a.length,u.length)>2?Vt:Zt,i=o=null,h}function h(e){return isNaN(e=+e)?r:(i||(i=n(a.map(t),u,s)))(t(c(e)))}return h.invert=function(r){return c(e((o||(o=n(u,a.map(t),Rt)))(r)))},h.domain=function(t){return arguments.length?(a=Z.call(t,Ht),c===Yt||(c=$t(a)),l()):a.slice()},h.range=function(t){return arguments.length?(u=V.call(t),l()):u.slice()},h.rangeRound=function(t){return u=V.call(t),s=Bt,l()},h.clamp=function(t){return arguments.length?(c=t?$t(a):Yt,h):c!==Yt},h.interpolate=function(t){return arguments.length?(s=t,l()):s},h.unknown=function(t){return arguments.length?(r=t,h):r},function(r,n){return t=r,e=n,l()}}var Jt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qt(t){if(!(e=Jt.exec(t)))throw new Error("invalid format: "+t);var e;return new Xt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Xt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Qt.prototype=Xt.prototype,Xt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Kt(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}var te,ee,re,ne=function(t){return(t=Kt(Math.abs(t)))?t[1]:NaN},ie=function(t,e){var r=Kt(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")},oe={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ie(100*t,e)},r:ie,s:function(t,e){var r=Kt(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(te=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Kt(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ae=function(t){return t},ue=Array.prototype.map,se=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];ee=function(t){var e,r,n=void 0===t.grouping||void 0===t.thousands?ae:(e=ue.call(t.grouping,Number),r=t.thousands+"",function(t,n){for(var i=t.length,o=[],a=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>n&&(u=Math.max(1,n-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>n));)u=e[a=(a+1)%e.length];return o.reverse().join(r)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?ae:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(ue.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Qt(t)).fill,r=t.align,h=t.sign,f=t.symbol,d=t.zero,g=t.width,p=t.comma,v=t.precision,y=t.trim,m=t.type;"n"===m?(p=!0,m="g"):oe[m]||(void 0===v&&(v=12),y=!0,m="g"),(d||"0"===e&&"="===r)&&(d=!0,e="0",r="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",w="$"===f?o:/[%p]/.test(m)?s:"",x=oe[m],k=/[defgprs%]/.test(m);function M(t){var i,o,s,f=b,M=w;if("c"===m)M=x(t)+M,t="";else{var O=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),v),y&&(t=function(t){t:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":0===i&&(i=n),e=n;break;default:if(!+t[n])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),O&&0==+t&&"+"!==h&&(O=!1),f=(O?"("===h?h:c:"-"===h||"("===h?"":h)+f,M=("s"===m?se[8+te/3]:"")+M+(O&&"("===h?")":""),k)for(i=-1,o=t.length;++i<o;)if(48>(s=t.charCodeAt(i))||s>57){M=(46===s?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}p&&!d&&(t=n(t,1/0));var j=f.length+t.length+M.length,_=j<g?new Array(g-j+1).join(e):"";switch(p&&d&&(t=n(_+t,_.length?g-M.length:1/0),_=""),r){case"<":t=f+t+M+_;break;case"=":t=f+_+t+M;break;case"^":t=_.slice(0,j=_.length>>1)+f+t+M+_.slice(j);break;default:t=_+f+t+M}return u(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,e){var r=h(((t=Qt(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(ne(e)/3))),i=Math.pow(10,-n),o=se[8+n/3];return function(t){return r(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),re=ee.format,ee.formatPrefix;var ce=function(t,e){var r,n=0,i=(t=t.slice()).length-1,o=t[n],a=t[i];return a<o&&(r=n,n=i,i=r,r=o,o=a,a=r),t[n]=e.floor(o),t[i]=e.ceil(a),t};function le(t){return Math.log(t)}function he(t){return Math.exp(t)}function fe(t){return-Math.log(-t)}function de(t){return-Math.exp(-t)}function ge(t){return isFinite(t)?+("1e"+t):t<0?0:t}function pe(t){return function(e){return-t(-e)}}function ve(t){var e,r,n=t(le,he),i=n.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),r=function(t){return 10===t?ge:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=pe(e),r=pe(r),t(fe,de)):t(le,he),n}return n.base=function(t){return arguments.length?(o=+t,a()):o},n.domain=function(t){return arguments.length?(i(t),a()):i()},n.ticks=function(t){var n,a=i(),u=a[0],s=a[a.length-1];(n=s<u)&&(f=u,u=s,s=f);var c,l,h,f=e(u),d=e(s),g=null==t?10:+t,p=[];if(!(o%1)&&d-f<g){if(f=Math.round(f)-1,d=Math.round(d)+1,u>0){for(;f<d;++f)for(l=1,c=r(f);l<o;++l)if(!((h=c*l)<u)){if(h>s)break;p.push(h)}}else for(;f<d;++f)for(l=o-1,c=r(f);l>=1;--l)if(!((h=c*l)<u)){if(h>s)break;p.push(h)}}else p=L(f,d,Math.min(d-f,g)).map(r);return n?p.reverse():p},n.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=re(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/n.ticks().length);return function(t){var n=t/r(Math.round(e(t)));return n*o<o-.5&&(n*=o),n<=a?i(t):""}},n.nice=function(){return i(ce(i(),{floor:function(t){return r(Math.floor(e(t)))},ceil:function(t){return r(Math.ceil(e(t)))}}))},n}var ye=new Date,me=new Date;function be(t,e,r,n){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(r){return t(r=new Date(r-1)),e(r,1),t(r),r},i.round=function(t){var e=i(t),r=i.ceil(t);return t-e<r-t?e:r},i.offset=function(t,r){return e(t=new Date(+t),null==r?1:Math.floor(r)),t},i.range=function(r,n,o){var a,u=[];if(r=i.ceil(r),o=null==o?1:Math.floor(o),!(r<n&&o>0))return u;do{u.push(a=new Date(+r)),e(r,o),t(r)}while(a<r&&r<n);return u},i.filter=function(r){return be((function(e){if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;e(t,-1),!r(t););else for(;--n>=0;)for(;e(t,1),!r(t););}))},r&&(i.count=function(e,n){return ye.setTime(+e),me.setTime(+n),t(ye),t(me),Math.floor(r(ye,me))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(n?function(e){return n(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var we=be((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));we.every=function(t){return isFinite(t=Math.floor(t))&&t>0?be((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,r){e.setFullYear(e.getFullYear()+r*t)})):null};var xe=we,ke=(we.range,be((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));ke.range;function Me(t){return be((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Oe=Me(0),je=Me(1),_e=Me(2),Ce=Me(3),Te=Me(4),De=Me(5),Ae=Me(6),Ee=(Oe.range,je.range,_e.range,Ce.range,Te.range,De.range,Ae.range,be((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),Se=Ee,Ue=(Ee.range,be((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),Re=(Ue.range,be((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Fe=(Re.range,be((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),Le=(Fe.range,be((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));Le.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?be((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,r){e.setTime(+e+r*t)}),(function(e,r){return(r-e)/t})):Le:null};Le.range;function Ne(t){return be((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var Pe=Ne(0),Ie=Ne(1),Be=Ne(2),He=Ne(3),qe=Ne(4),Ye=Ne(5),ze=Ne(6),$e=(Pe.range,Ie.range,Be.range,He.range,qe.range,Ye.range,ze.range,be((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Ze=$e,Ve=($e.range,be((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ve.every=function(t){return isFinite(t=Math.floor(t))&&t>0?be((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)})):null};var Ge=Ve;Ve.range;function We(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Je(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qe(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}var Xe,Ke={"-":"",_:" ",0:"0"},tr=/^\s*\d+/,er=/^%/,rr=/[\\^$*+?|[\]().{}]/g;function nr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function ir(t){return t.replace(rr,"\\$&")}function or(t){return new RegExp("^(?:"+t.map(ir).join("|")+")","i")}function ar(t){for(var e={},r=-1,n=t.length;++r<n;)e[t[r].toLowerCase()]=r;return e}function ur(t,e,r){var n=tr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function sr(t,e,r){var n=tr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function cr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function lr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function hr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function fr(t,e,r){var n=tr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function dr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function gr(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function pr(t,e,r){var n=tr.exec(e.slice(r,r+1));return n?(t.q=3*n[0]-3,r+n[0].length):-1}function vr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function yr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function mr(t,e,r){var n=tr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function br(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function wr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function xr(t,e,r){var n=tr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function kr(t,e,r){var n=tr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Mr(t,e,r){var n=tr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Or(t,e,r){var n=er.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function jr(t,e,r){var n=tr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function _r(t,e,r){var n=tr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Cr(t,e){return nr(t.getDate(),e,2)}function Tr(t,e){return nr(t.getHours(),e,2)}function Dr(t,e){return nr(t.getHours()%12||12,e,2)}function Ar(t,e){return nr(1+Se.count(xe(t),t),e,3)}function Er(t,e){return nr(t.getMilliseconds(),e,3)}function Sr(t,e){return Er(t,e)+"000"}function Ur(t,e){return nr(t.getMonth()+1,e,2)}function Rr(t,e){return nr(t.getMinutes(),e,2)}function Fr(t,e){return nr(t.getSeconds(),e,2)}function Lr(t){var e=t.getDay();return 0===e?7:e}function Nr(t,e){return nr(Oe.count(xe(t)-1,t),e,2)}function Pr(t){var e=t.getDay();return e>=4||0===e?Te(t):Te.ceil(t)}function Ir(t,e){return t=Pr(t),nr(Te.count(xe(t),t)+(4===xe(t).getDay()),e,2)}function Br(t){return t.getDay()}function Hr(t,e){return nr(je.count(xe(t)-1,t),e,2)}function qr(t,e){return nr(t.getFullYear()%100,e,2)}function Yr(t,e){return nr((t=Pr(t)).getFullYear()%100,e,2)}function zr(t,e){return nr(t.getFullYear()%1e4,e,4)}function $r(t,e){var r=t.getDay();return nr((t=r>=4||0===r?Te(t):Te.ceil(t)).getFullYear()%1e4,e,4)}function Zr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+nr(e/60|0,"0",2)+nr(e%60,"0",2)}function Vr(t,e){return nr(t.getUTCDate(),e,2)}function Gr(t,e){return nr(t.getUTCHours(),e,2)}function Wr(t,e){return nr(t.getUTCHours()%12||12,e,2)}function Jr(t,e){return nr(1+Ze.count(Ge(t),t),e,3)}function Qr(t,e){return nr(t.getUTCMilliseconds(),e,3)}function Xr(t,e){return Qr(t,e)+"000"}function Kr(t,e){return nr(t.getUTCMonth()+1,e,2)}function tn(t,e){return nr(t.getUTCMinutes(),e,2)}function en(t,e){return nr(t.getUTCSeconds(),e,2)}function rn(t){var e=t.getUTCDay();return 0===e?7:e}function nn(t,e){return nr(Pe.count(Ge(t)-1,t),e,2)}function on(t){var e=t.getUTCDay();return e>=4||0===e?qe(t):qe.ceil(t)}function an(t,e){return t=on(t),nr(qe.count(Ge(t),t)+(4===Ge(t).getUTCDay()),e,2)}function un(t){return t.getUTCDay()}function sn(t,e){return nr(Ie.count(Ge(t)-1,t),e,2)}function cn(t,e){return nr(t.getUTCFullYear()%100,e,2)}function ln(t,e){return nr((t=on(t)).getUTCFullYear()%100,e,2)}function hn(t,e){return nr(t.getUTCFullYear()%1e4,e,4)}function fn(t,e){var r=t.getUTCDay();return nr((t=r>=4||0===r?qe(t):qe.ceil(t)).getUTCFullYear()%1e4,e,4)}function dn(){return"+0000"}function gn(){return"%"}function pn(t){return+t}function vn(t){return Math.floor(+t/1e3)}!function(t){Xe=function(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,s=t.shortMonths,c=or(i),l=ar(i),h=or(o),f=ar(o),d=or(a),g=ar(a),p=or(u),v=ar(u),y=or(s),m=ar(s),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:Cr,e:Cr,f:Sr,g:Yr,G:$r,H:Tr,I:Dr,j:Ar,L:Er,m:Ur,M:Rr,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:pn,s:vn,S:Fr,u:Lr,U:Nr,V:Ir,w:Br,W:Hr,x:null,X:null,y:qr,Y:zr,Z:Zr,"%":gn},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Vr,e:Vr,f:Xr,g:ln,G:fn,H:Gr,I:Wr,j:Jr,L:Qr,m:Kr,M:tn,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:pn,s:vn,S:en,u:rn,U:nn,V:an,w:un,W:sn,x:null,X:null,y:cn,Y:hn,Z:dn,"%":gn},x={a:function(t,e,r){var n=d.exec(e.slice(r));return n?(t.w=g[n[0].toLowerCase()],r+n[0].length):-1},A:function(t,e,r){var n=h.exec(e.slice(r));return n?(t.w=f[n[0].toLowerCase()],r+n[0].length):-1},b:function(t,e,r){var n=y.exec(e.slice(r));return n?(t.m=m[n[0].toLowerCase()],r+n[0].length):-1},B:function(t,e,r){var n=p.exec(e.slice(r));return n?(t.m=v[n[0].toLowerCase()],r+n[0].length):-1},c:function(t,r,n){return O(t,e,r,n)},d:yr,e:yr,f:Mr,g:dr,G:fr,H:br,I:br,j:mr,L:kr,m:vr,M:wr,p:function(t,e,r){var n=c.exec(e.slice(r));return n?(t.p=l[n[0].toLowerCase()],r+n[0].length):-1},q:pr,Q:jr,s:_r,S:xr,u:sr,U:cr,V:lr,w:ur,W:hr,x:function(t,e,n){return O(t,r,e,n)},X:function(t,e,r){return O(t,n,e,r)},y:dr,Y:fr,Z:gr,"%":Or};function k(t,e){return function(r){var n,i,o,a=[],u=-1,s=0,c=t.length;for(r instanceof Date||(r=new Date(+r));++u<c;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=Ke[n=t.charAt(++u)])?n=t.charAt(++u):i="e"===n?" ":"0",(o=e[n])&&(n=o(r,i)),a.push(n),s=u+1);return a.push(t.slice(s,u)),a.join("")}}function M(t,e){return function(r){var n,i,o=Qe(1900,void 0,1);if(O(o,t,r+="",0)!=r.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(n=Je(Qe(o.y,0,1))).getUTCDay(),n=i>4||0===i?Ie.ceil(n):Ie(n),n=Ze.offset(n,7*(o.V-1)),o.y=n.getUTCFullYear(),o.m=n.getUTCMonth(),o.d=n.getUTCDate()+(o.w+6)%7):(i=(n=We(Qe(o.y,0,1))).getDay(),n=i>4||0===i?je.ceil(n):je(n),n=Se.offset(n,7*(o.V-1)),o.y=n.getFullYear(),o.m=n.getMonth(),o.d=n.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Je(Qe(o.y,0,1)).getUTCDay():We(Qe(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Je(o)):We(o)}}function O(t,e,r,n){for(var i,o,a=0,u=e.length,s=r.length;a<u;){if(n>=s)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in Ke?e.charAt(a++):i])||(n=o(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return b.x=k(r,b),b.X=k(n,b),b.c=k(e,b),w.x=k(r,w),w.X=k(n,w),w.c=k(e,w),{format:function(t){var e=k(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}(t),Xe.format,Xe.parse,Xe.utcFormat,Xe.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var yn=be((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),mn=(yn.range,be((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),bn=(mn.range,be((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})));bn.range;var wn=r("j4zw");r("p1p/"),r("BIHw"),r("QGkA");function xn(t,e){if(!t)throw new Error("null row");if(!e)throw new Error("no headers");for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r}function kn(t,e){if(!t)throw new Error("null row");if(!e)throw new Error("no headers");for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=t[e[n]];return r}var Mn,On=r("1OyB"),jn=r("vuIU"),_n=r("Ji7U"),Cn=r("md7G"),Tn=r("foSv"),Dn=r("kHIg");function An(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(Tn.a)(t);if(e){var i=Object(Tn.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(Cn.a)(this,r)}}var En=function(t){Object(_n.a)(r,t);var e=An(r);function r(){return Object(On.a)(this,r),e.apply(this,arguments)}return Object(jn.a)(r,[{key:"enqueue",value:function(t){return this.push(t)}},{key:"dequeue",value:function(){return this.shift()}}]),r}(Object(Dn.a)(Array));Mn=Symbol.asyncIterator;var Sn=function(){function t(){Object(On.a)(this,t),Object(f.a)(this,"_values",void 0),Object(f.a)(this,"_settlers",void 0),Object(f.a)(this,"_closed",void 0),this._values=new En,this._settlers=new En,this._closed=!1}return Object(jn.a)(t,[{key:"close",value:function(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}},{key:Mn,value:function(){return this}},{key:"enqueue",value:function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.dequeue();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.enqueue(t)}},{key:"next",value:function(){var t=this;if(this._values.length>0){var e=this._values.dequeue();return e instanceof Error?Promise.reject(e):Promise.resolve({value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((function(e,r){t._settlers.enqueue({resolve:e,reject:r})}))}}]),t}();var Un=function(){function t(e,r){if(Object(On.a)(this,t),Object(f.a)(this,"schema",void 0),Object(f.a)(this,"options",void 0),Object(f.a)(this,"length",0),Object(f.a)(this,"rows",null),Object(f.a)(this,"cursor",0),Object(f.a)(this,"_headers",[]),this.options=r,this.schema=e,!Array.isArray(e))for(var n in this._headers=[],e)this._headers[e[n].index]=e[n].name}return Object(jn.a)(t,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(t,e){Number.isFinite(e)&&(this.cursor=e),this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}},{key:"addObjectRow",value:function(t,e){Number.isFinite(e)&&(this.cursor=e),this.rows=this.rows||new Array(100),this.rows[this.length]=t,this.length++}},{key:"getBatch",value:function(){var t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}]),t}(),Rn=function(){function t(e,r){if(Object(On.a)(this,t),Object(f.a)(this,"schema",void 0),Object(f.a)(this,"options",void 0),Object(f.a)(this,"length",0),Object(f.a)(this,"objectRows",null),Object(f.a)(this,"arrayRows",null),Object(f.a)(this,"cursor",0),Object(f.a)(this,"_headers",[]),this.options=r,this.schema=e,!Array.isArray(e))for(var n in this._headers=[],e)this._headers[e[n].index]=e[n].name}return Object(jn.a)(t,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this.options.shape){case"object-row-table":var r=xn(t,this._headers);this.addObjectRow(r,e);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(100),this.arrayRows[this.length]=t,this.length++}}},{key:"addObjectRow",value:function(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this.options.shape){case"array-row-table":var r=kn(t,this._headers);this.addArrayRow(r,e);break;case"object-row-table":this.objectRows=this.objectRows||new Array(100),this.objectRows[this.length]=t,this.length++}}},{key:"getBatch",value:function(){var t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}]),t}(),Fn=r("ODXe"),Ln=function(){function t(e,r){Object(On.a)(this,t),Object(f.a)(this,"schema",void 0),Object(f.a)(this,"length",0),Object(f.a)(this,"allocated",0),Object(f.a)(this,"columns",{}),this.schema=e,this._reallocateColumns()}return Object(jn.a)(t,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(t){this._reallocateColumns();var e=0;for(var r in this.columns)this.columns[r][this.length]=t[e++];this.length++}},{key:"addObjectRow",value:function(t){for(var e in this._reallocateColumns(),t)this.columns[e][this.length]=t[e];this.length++}},{key:"getBatch",value:function(){this._pruneColumns();var t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(var e in this.schema){var r=this.schema[e];t[r.name]=this.columns[r.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}},{key:"_reallocateColumns",value:function(){if(!(this.length<this.allocated))for(var t in this.allocated=this.allocated>0?this.allocated*=2:100,this.columns={},this.schema){var e=this.schema[t],r=e.type||Float32Array,n=this.columns[e.index];if(n&&ArrayBuffer.isView(n)){var i=new r(this.allocated);i.set(n),this.columns[e.index]=i}else n?(n.length=this.allocated,this.columns[e.index]=n):this.columns[e.index]=new r(this.allocated)}}},{key:"_pruneColumns",value:function(){for(var t=0,e=Object.entries(this.columns);t<e.length;t++){var r=Object(Fn.a)(e[t],2),n=r[0],i=r[1];this.columns[n]=i.slice(0,this.length)}}}]),t}();function Nn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nn(Object(r),!0).forEach((function(e){Object(f.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var In={shape:"array-row-table",batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},Bn=function(){function t(e,r){Object(On.a)(this,t),Object(f.a)(this,"schema",void 0),Object(f.a)(this,"options",void 0),Object(f.a)(this,"aggregator",null),Object(f.a)(this,"batchCount",0),Object(f.a)(this,"bytesUsed",0),Object(f.a)(this,"isChunkComplete",!1),Object(f.a)(this,"lastBatchEmittedMs",Date.now()),Object(f.a)(this,"totalLength",0),Object(f.a)(this,"totalBytes",0),Object(f.a)(this,"rowBytes",0),this.schema=e,this.options=Pn(Pn({},In),r)}return Object(jn.a)(t,[{key:"limitReached",value:function(){var t,e;return!!(Boolean(null===(t=this.options)||void 0===t?void 0:t.limit)&&this.totalLength>=this.options.limit)||!!(Boolean(null===(e=this.options)||void 0===e?void 0:e._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}},{key:"addRow",value:function(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}},{key:"addArrayRow",value:function(t){if(!this.aggregator){var e=this._getTableBatchType();this.aggregator=new e(this.schema,this.options)}this.aggregator.addArrayRow(t)}},{key:"addObjectRow",value:function(t){if(!this.aggregator){var e=this._getTableBatchType();this.aggregator=new e(this.schema,this.options)}this.aggregator.addObjectRow(t)}},{key:"chunkComplete",value:function(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),"string"==typeof t&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}},{key:"getFullBatch",value:function(t){return this._isFull()?this._getBatch(t):null}},{key:"getFinalBatch",value:function(t){return this._getBatch(t)}},{key:"_estimateRowMB",value:function(t){return Array.isArray(t)?8*t.length:8*Object.keys(t).length}},{key:"_isFull",value:function(){if(!this.aggregator||0===this.aggregator.rowCount())return!1;if("auto"===this.options.batchSize){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return!(this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs)&&(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}},{key:"_getBatch",value:function(t){if(!this.aggregator)return null;null!=t&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);var e=this.aggregator.getBatch();return e.count=this.batchCount,e.bytesUsed=this.bytesUsed,Object.assign(e,t),this.batchCount++,this.aggregator=null,e}},{key:"_getTableBatchType",value:function(){switch(this.options.shape){case"row-table":return Un;case"array-row-table":case"object-row-table":return Rn;case"columnar-table":return Ln;case"arrow-table":if(!t.ArrowBatch)throw new Error("TableBatchBuilder");return t.ArrowBatch;default:throw new Error("TableBatchBuilder")}}}]),t}();Object(f.a)(Bn,"ArrowBatch",void 0);var Hn={parse:function(t,e,r){var n=(e=e||{}).dynamicTyping||!1;Wn(n)&&(e.dynamicTypingFunction=n,n={});if(e.dynamicTyping=n,e.transform=!!Wn(e.transform)&&e.transform,e.worker&&Hn.WORKERS_SUPPORTED){var i=newWorker();return i.userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=Wn(e.step),e.chunk=Wn(e.chunk),e.complete=Wn(e.complete),e.error=Wn(e.error),delete e.worker,void i.postMessage({input:t,config:e,workerId:i.id})}var o=null;"string"==typeof t&&(o=new zn(e));o||(o=new r(e));return o.stream(t)},unparse:function(t,e){var r=!1,n=!0,i=",",o="\r\n",a='"',u=a+a,s=!1,c=null;!function(){if("object"!=typeof e)return;"string"!=typeof e.delimiter||Hn.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter);("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(r=e.quotes);"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(s=e.skipEmptyLines);"string"==typeof e.newline&&(o=e.newline);"string"==typeof e.quoteChar&&(a=e.quoteChar);"boolean"==typeof e.header&&(n=e.header);if(Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+a)}();var l=new RegExp(Zn(a),"g");"string"==typeof t&&(t=JSON.parse(t));if(Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,s);if("object"==typeof t[0])return f(c||h(t[0]),t,s)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:h(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],s);throw new Error("Unable to serialize unrecognized input");function h(t){if("object"!=typeof t)return[];var e=[];for(var r in t)e.push(r);return e}function f(t,e,r){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var u=Array.isArray(t)&&t.length>0,s=!Array.isArray(e[0]);if(u&&n){for(var c=0;c<t.length;c++)c>0&&(a+=i),a+=d(t[c],c);e.length>0&&(a+=o)}for(var l=0;l<e.length;l++){var h=u?t.length:e[l].length,f=!1,g=u?0===Object.keys(e[l]).length:0===e[l].length;if(r&&!u&&(f="greedy"===r?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===r&&u){for(var p=[],v=0;v<h;v++){var y=s?t[v]:v;p.push(e[l][y])}f=""===p.join("").trim()}if(!f){for(var m=0;m<h;m++){m>0&&!g&&(a+=i);var b=u&&s?t[m]:m;a+=d(e[l][b],m)}l<e.length-1&&(!r||h>0&&!g)&&(a+=o)}}return a}function d(t,e){return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(t=t.toString().replace(l,u),"boolean"==typeof r&&r||Array.isArray(r)&&r[e]||function(t,e){for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return!0;return!1}(t,Hn.BAD_DELIMITERS)||t.indexOf(i)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1)?a+t+a:t)}},RECORD_SEP:String.fromCharCode(30),UNIT_SEP:String.fromCharCode(31),BYTE_ORDER_MARK:"\ufeff",BAD_DELIMITERS:["\r","\n",'"',"\ufeff"],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:10485760,RemoteChunkSize:5242880,DefaultDelimiter:",",Parser:Vn,ParserHandle:$n,ChunkStreamer:Yn,StringStreamer:zn},qn=Hn;function Yn(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=Gn(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null);this._handle=new $n(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&Wn(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var i=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=i.meta.cursor;this._finished||(this._partialLine=n.substring(o-this._baseIndex),this._baseIndex=o),i&&i.data&&(this._rowCount+=i.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Wn(this._config.chunk)&&!e){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return;i=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!a||!Wn(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(t){Wn(this._config.error)&&this._config.error(t)}}function zn(t){var e;t=t||{},Yn.call(this,t),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,r=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(r)}}}function $n(t){var e,r,n,i=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,a=this,u=0,s=0,c=!1,l=!1,h=[],f={data:[],errors:[],meta:{}};if(Wn(t.step)){var d=t.step;t.step=function(e){if(f=e,v())p();else{if(p(),!f.data||0===f.data.length)return;u+=e.data.length,t.preview&&u>t.preview?r.abort():d(f,a)}}}function g(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function p(){if(f&&n&&(m("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Hn.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines)for(var e=0;e<f.data.length;e++)g(f.data[e])&&f.data.splice(e--,1);return v()&&function(){if(!f)return;function e(e){Wn(t.transformHeader)&&(e=t.transformHeader(e)),h.push(e)}if(Array.isArray(f.data[0])){for(var r=0;v()&&r<f.data.length;r++)f.data[r].forEach(e);f.data.splice(0,1)}else f.data.forEach(e)}(),function(){if(!f||!f.data||!t.header&&!t.dynamicTyping&&!t.transform)return f;function e(e,r){var n,i=t.header?{}:[];for(n=0;n<e.length;n++){var o=n,a=e[n];t.header&&(o=n>=h.length?"__parsed_extra":h[n]),t.transform&&(a=t.transform(a,o)),a=y(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return t.header&&(n>h.length?m("FieldMismatch","TooManyFields","Too many fields: expected "+h.length+" fields but parsed "+n,s+r):n<h.length&&m("FieldMismatch","TooFewFields","Too few fields: expected "+h.length+" fields but parsed "+n,s+r)),i}var r=1;!f.data[0]||Array.isArray(f.data[0])?(f.data=f.data.map(e),r=f.data.length):f.data=e(f.data,0);t.header&&f.meta&&(f.meta.fields=h);return s+=r,f}()}function v(){return t.header&&0===h.length}function y(e,r){return function(e){return t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)}(e)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(i.test(r)?parseFloat(r):o.test(r)?new Date(r):""===r?null:r):r}function m(t,e,r,n){f.errors.push({type:t,code:e,message:r,row:n})}this.parse=function(i,o,a){var u=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var r=new RegExp(Zn(e)+"([^]*?)"+Zn(e),"gm"),n=(t=t.replace(r,"")).split("\r"),i=t.split("\n"),o=i.length>1&&i[0].length<n[0].length;if(1===n.length||o)return"\n";for(var a=0,u=0;u<n.length;u++)"\n"===n[u][0]&&a++;return a>=n.length/2?"\r\n":"\r"}(i,u)),n=!1,t.delimiter)Wn(t.delimiter)&&(t.delimiter=t.delimiter(i),f.meta.delimiter=t.delimiter);else{var s=function(e,r,n,i,o){var a,u,s;o=o||[",","\t","|",";",Hn.RECORD_SEP,Hn.UNIT_SEP];for(var c=0;c<o.length;c++){var l=o[c],h=0,f=0,d=0;s=void 0;for(var p=new Vn({comments:i,delimiter:l,newline:r,preview:10}).parse(e),v=0;v<p.data.length;v++)if(n&&g(p.data[v]))d++;else{var y=p.data[v].length;f+=y,void 0!==s?y>1&&(h+=Math.abs(y-s),s=y):s=0}p.data.length>0&&(f/=p.data.length-d),(void 0===u||h>u)&&f>1.99&&(u=h,a=l)}return t.delimiter=a,{successful:!!a,bestDelimiter:a}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);s.successful?t.delimiter=s.bestDelimiter:(n=!0,t.delimiter=Hn.DefaultDelimiter),f.meta.delimiter=t.delimiter}var l=Gn(t);return t.preview&&t.header&&l.preview++,e=i,r=new Vn(l),f=r.parse(e,o,a),p(),c?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,r.abort(),e=e.substr(r.getCharIndex())},this.resume=function(){c=!1,a.streamer.parseChunk(e,!0)},this.aborted=function(){return l},this.abort=function(){l=!0,r.abort(),f.meta.aborted=!0,Wn(t.complete)&&t.complete(f),e=""}}function Zn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Vn(t){var e,r=(t=t||{}).delimiter,n=t.newline,i=t.comments,o=t.step,a=t.preview,u=t.fastMode,s=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(s=t.escapeChar),("string"!=typeof r||Hn.BAD_DELIMITERS.indexOf(r)>-1)&&(r=","),i===r)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||Hn.BAD_DELIMITERS.indexOf(i)>-1)&&(i=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var c=0,l=!1;this.parse=function(t,h,f){if("string"!=typeof t)throw new Error("Input must be a string");var d=t.length,g=r.length,p=n.length,v=i.length,y=Wn(o);c=0;var m=[],b=[],w=[],x=0;if(!t)return R();if(u||!1!==u&&-1===t.indexOf(e)){for(var k=t.split(n),M=0;M<k.length;M++){if(w=k[M],c+=w.length,M!==k.length-1)c+=n.length;else if(f)return R();if(!i||w.substr(0,v)!==i){if(y){if(m=[],A(w.split(r)),F(),l)return R()}else A(w.split(r));if(a&&M>=a)return m=m.slice(0,a),R(!0)}}return R()}for(var O,j=t.indexOf(r,c),_=t.indexOf(n,c),C=new RegExp(Zn(s)+Zn(e),"g");;)if(t[c]!==e)if(i&&0===w.length&&t.substr(c,v)===i){if(-1===_)return R();c=_+p,_=t.indexOf(n,c),j=t.indexOf(r,c)}else if(-1!==j&&(j<_||-1===_))w.push(t.substring(c,j)),c=j+g,j=t.indexOf(r,c);else{if(-1===_)break;if(w.push(t.substring(c,_)),U(_+p),y&&(F(),l))return R();if(a&&m.length>=a)return R(!0)}else{for(O=c,c++;;){if(-1===(O=t.indexOf(e,O+1)))return f||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:m.length,index:c}),S();if(O===d-1)return S(t.substring(c,O).replace(C,e));if(e!==s||t[O+1]!==s){if(e===s||0===O||t[O-1]!==s){var T=E(-1===_?j:Math.min(j,_));if(t[O+1+T]===r){if(w.push(t.substring(c,O).replace(C,e)),c=O+1+T+g,j=t.indexOf(r,c),_=t.indexOf(n,c),y&&(F(),l))return R();if(a&&m.length>=a)return R(!0);break}var D=E(_);if(t.substr(O+1+D,p)===n){if(w.push(t.substring(c,O).replace(C,e)),U(O+1+D+p),j=t.indexOf(r,c),y&&(F(),l))return R();if(a&&m.length>=a)return R(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:m.length,index:c}),O++}}else O++}if(y&&(F(),l))return R();if(a&&m.length>=a)return R(!0)}return S();function A(t){m.push(t),x=c}function E(e){var r=0;if(-1!==e){var n=t.substring(O+1,e);n&&""===n.trim()&&(r=n.length)}return r}function S(e){return f||(void 0===e&&(e=t.substr(c)),w.push(e),c=d,A(w),y&&F()),R()}function U(e){c=e,A(w),w=[],_=t.indexOf(n,c)}function R(t,e){return{data:e||!1?m[0]:m,errors:b,meta:{delimiter:r,linebreak:n,aborted:l,truncated:!!t,cursor:x+(h||0)}}}function F(){o(R(void 0,!0)),m=[],b=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return c}}function Gn(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var r in t)e[r]=Gn(t[r]);return e}function Wn(t){return"function"==typeof t}zn.prototype=Object.create(zn.prototype),zn.prototype.constructor=zn;var Jn=r("Zova"),Qn=qn.ChunkStreamer;function Xn(t){t=t||{},Qn.call(this,t),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=function(){var t=Object(c.a)(s.a.mark((function t(e){var r,n,i,o,a,u,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._input=e,t.prev=1,r=!0,n=!1,t.prev=4,o=Object(Jn.a)(e);case 6:return t.next=8,o.next();case 8:return a=t.sent,r=a.done,t.next=12,a.value;case 12:if(u=t.sent,r){t.next=19;break}c=u,this.parseChunk(this.getStringChunk(c));case 16:r=!0,t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),n=!0,i=t.t0;case 25:if(t.prev=25,t.prev=26,r||null==o.return){t.next=30;break}return t.next=30,o.return();case 30:if(t.prev=30,!n){t.next=33;break}throw i;case 33:return t.finish(30);case 34:return t.finish(25);case 35:this._finished=!0,this.parseChunk(""),t.next=42;break;case 39:t.prev=39,t.t1=t.catch(1),this._sendError(t.t1);case 42:case"end":return t.stop()}}),t,this,[[1,39],[4,21,25,35],[26,,30,34]])})));return function(e){return t.apply(this,arguments)}}(),this._nextChunk=function(){},this.getStringChunk=function(t){return"string"==typeof t?t:this.textDecoder.decode(t,{stream:!0})}}function Kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kn(Object(r),!0).forEach((function(e){Object(f.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Xn.prototype=Object.create(Qn.prototype),Xn.prototype.constructor=Xn;var ei,ri={csv:{shape:"object-row-table",optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","\t","|",";"]}};ei=Object(c.a)(s.a.mark((function t(e,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ni((new TextDecoder).decode(e),r));case 1:case"end":return t.stop()}}),t)})));function ni(t,e){return ii.apply(this,arguments)}function ii(){return(ii=Object(c.a)(s.a.mark((function t(e,r){var n,i,o,a,u,c,l,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ti(ti({},ri.csv),null==r?void 0:r.csv),i=ai(e),o="auto"===n.header?oi(i):Boolean(n.header),a=o,u=ti(ti({},n),{},{header:a,download:!1,transformHeader:a?ui():void 0,error:function(t){throw new Error(t)}}),c=qn.parse(e,u),l=c.data,h=c.meta.fields||si(n.columnPrefix,i.length),t.t0=n.shape,t.next="object-row-table"===t.t0?11:"array-row-table"===t.t0?13:15;break;case 11:return l=l.map((function(t){return Array.isArray(t)?xn(t,h):t})),t.abrupt("break",15);case 13:return l=l.map((function(t){return Array.isArray(t)?t:kn(t,h)})),t.abrupt("break",15);case 15:return t.abrupt("return",l);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oi(t){return t&&t.every((function(t){return"string"==typeof t}))}function ai(t){return qn.parse(t,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function ui(){var t=new Set;return function(e){for(var r=e,n=1;t.has(r);)r="".concat(e,".").concat(n),n++;return t.add(r),r}}function si(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0;n<e;n++)r.push("".concat(t).concat(n+1));return r}function ci(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return li(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return li(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function li(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}h.a.accessToken="pk.eyJ1IjoidWNmLW1hcGJveCIsImEiOiJja2tyNHQzdnIzYmNnMndwZGI3djNzdjVyIn0.xgCXV9mLZ47q7easx6WLCQ";var hi=function t(){var e=ve(Wt()).domain([1,10]);return e.copy=function(){return Gt(e,t()).base(e.base())},P.apply(e,arguments),e}().domain([10,100,1e3,1e4]).range([[255,255,178],[254,204,92],[253,141,60],[227,26,28]]);function fi(t,e){var r=new h.a.Map({container:t,style:"mapbox://styles/mapbox/light-v9",antialias:!0,center:[-122.4034,37.7845],zoom:15.5,bearing:20,pitch:60});return r.addControl(new h.a.NavigationControl,"top-left"),r.on("load",(function(){r.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:14,paint:{"fill-extrusion-color":"#ccc","fill-extrusion-height":["get","height"]}}),di(r,e)})),{update:function(t){return di(r,t)},remove:function(){r.remove()}}}function di(t,e){if(e){var r,n=new O({id:"deckgl-connections",type:j.a,data:[],getSourcePosition:function(t){return r},getTargetPosition:function(t){return[t.home_lng,t.home_lat]},getSourceColor:[255,0,128],getTargetColor:[0,200,255],getWidth:function(t){return Math.max(2,t.count/15)}}),i=function(t){var i=Object(wn.a)(t),o=i[0],a=i[1];r=[a,o],n.setProps({data:e.filter((function(e){return e.hex===t}))})},o=new O({id:"deckgl-pois",type:_.a,data:gi(e),opacity:.4,pickable:!0,autoHighlight:!0,onClick:function(t){var e=t.object;return e&&i(e.hex)},getHexagon:function(t){return t.hex},getFillColor:function(t){return hi(t.count)},extruded:!1,stroked:!1});t.addLayer(o,function(t){for(var e=t.layers,r=0;r<e.length;r++)if("symbol"===e[r].type)return e[r].id;return}(t.getStyle())),t.addLayer(n),i("8a283082aa17fff")}}function gi(t){for(var e,r={},n=ci(t);!(e=n()).done;){var i=e.value;r[i.hex]||(r[i.hex]={hex:i.hex,count:0}),r[i.hex].count+=i.count}return Object.values(r)}var pi=r("CtqP"),vi=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._containerRef=Object(i.createRef)(),e}Object(n.a)(e,t),e.renderInfo=function(t){return o.a.createElement("div",null,o.a.createElement("p",null,"Visitors to San Francisco businesses, grouped by their home census block group, during the first week of Feb 2020."),o.a.createElement("p",null,"Click on a region to see where its visitors come from."),o.a.createElement("p",null,"Data source: ",o.a.createElement("a",{href:"https://docs.safegraph.com/docs/weekly-patterns"},"SafeGraph")))};var r=e.prototype;return r.componentDidMount=function(){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css"),document.head.appendChild(t),this._view=fi(this._containerRef.current,this.props.data)},r.componentDidUpdate=function(t){this.props.data&&!t.data&&this._view.update(this.props.data)},r.componentWillUnmount=function(){this._view&&this._view.remove()},r.render=function(){return o.a.createElement("div",{ref:this._containerRef,style:{width:"100%",height:"100%"}})},e}(i.Component);vi.title="Who Is Visiting San Francisco?",vi.code=a.b+"/examples/website/safegraph",vi.data={url:a.a+"/safegraph.txt",worker:"/workers/poi-data-decoder.js"};e.default=Object(pi.a)(vi)}}]);